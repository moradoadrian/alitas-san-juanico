var zR=Object.defineProperty,WR=Object.defineProperties;var GR=Object.getOwnPropertyDescriptors;var fE=Object.getOwnPropertySymbols,KR=Object.getPrototypeOf,QR=Object.prototype.hasOwnProperty,YR=Object.prototype.propertyIsEnumerable,ZR=Reflect.get;var pE=(n,e,t)=>e in n?zR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ze=(n,e)=>{for(var t in e||={})QR.call(e,t)&&pE(n,t,e[t]);if(fE)for(var t of fE(e))YR.call(e,t)&&pE(n,t,e[t]);return n},Je=(n,e)=>WR(n,GR(e));var Qc=(n,e,t)=>ZR(KR(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function kf(n,e){return Object.is(n,e)}var Ge=null,Yc=!1,xf=1,kt=Symbol("SIGNAL");function se(n){let e=Ge;return Ge=n,e}function Of(){return Ge}var Yi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qs(n){if(Yc)throw new Error("");if(Ge===null)return;Ge.consumerOnSignalRead(n);let e=Ge.nextProducerIndex++;if(tu(Ge),e<Ge.producerNode.length&&Ge.producerNode[e]!==n&&Hs(Ge)){let t=Ge.producerNode[e];eu(t,Ge.producerIndexOfThis[e])}Ge.producerNode[e]!==n&&(Ge.producerNode[e]=n,Ge.producerIndexOfThis[e]=Hs(Ge)?mE(n,Ge,e):0),Ge.producerLastReadVersion[e]=n.version}function gE(){xf++}function Ff(n){if(!(Hs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===xf)){if(!n.producerMustRecompute(n)&&!Xc(n)){Mf(n);return}n.producerRecomputeValue(n),Mf(n)}}function Lf(n){if(n.liveConsumerNode===void 0)return;let e=Yc;Yc=!0;try{for(let t of n.liveConsumerNode)t.dirty||JR(t)}finally{Yc=e}}function Vf(){return Ge?.consumerAllowSignalWrites!==!1}function JR(n){n.dirty=!0,Lf(n),n.consumerMarkedDirty?.(n)}function Mf(n){n.dirty=!1,n.lastCleanEpoch=xf}function zs(n){return n&&(n.nextProducerIndex=0),se(n)}function Jc(n,e){if(se(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Hs(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)eu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Xc(n){tu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ff(t),r!==t.version))return!0}return!1}function Ws(n){if(tu(n),Hs(n))for(let e=0;e<n.producerNode.length;e++)eu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function mE(n,e,t){if(yE(n),n.liveConsumerNode.length===0&&vE(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=mE(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function eu(n,e){if(yE(n),n.liveConsumerNode.length===1&&vE(n))for(let r=0;r<n.producerNode.length;r++)eu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];tu(i),i.producerIndexOfThis[r]=e}}function Hs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function tu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function yE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function vE(n){return n.producerNode!==void 0}function jf(n,e){let t=Object.create(XR);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ff(t),qs(t),t.value===Zc)throw t.error;return t.value};return r[kt]=t,r}var Rf=Symbol("UNSET"),Pf=Symbol("COMPUTING"),Zc=Symbol("ERRORED"),XR=Je(Ze({},Yi),{value:Rf,dirty:!0,error:null,equal:kf,kind:"computed",producerMustRecompute(n){return n.value===Rf||n.value===Pf},producerRecomputeValue(n){if(n.value===Pf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Pf;let t=zs(n),r,i=!1;try{r=n.computation(),se(null),i=e!==Rf&&e!==Zc&&r!==Zc&&n.equal(e,r)}catch(o){r=Zc,n.error=o}finally{Jc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function eP(){throw new Error}var _E=eP;function IE(n){_E(n)}function Bf(n){_E=n}var tP=null;function Uf(n,e){let t=Object.create(nu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(qs(t),t.value);return r[kt]=t,r}function Gs(n,e){Vf()||IE(n),n.equal(n.value,e)||(n.value=e,nP(n))}function $f(n,e){Vf()||IE(n),Gs(n,e(n.value))}var nu=Je(Ze({},Yi),{equal:kf,value:void 0,kind:"signal"});function nP(n){n.version++,gE(),Lf(n),tP?.()}function Hf(n){let e=se(null);try{return n()}finally{se(e)}}var qf;function Ks(){return qf}function bn(n){let e=qf;return qf=n,e}var ru=Symbol("NotFound");function Q(n){return typeof n=="function"}function Zi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var iu=Zi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $r(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Le=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Q(r))try{r()}catch(o){e=o instanceof iu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{EE(o)}catch(s){e=e??[],s instanceof iu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new iu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)EE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$r(t,e)}remove(e){let{_finalizers:t}=this;t&&$r(t,e),e instanceof n&&e._removeParent(this)}};Le.EMPTY=(()=>{let n=new Le;return n.closed=!0,n})();var zf=Le.EMPTY;function ou(n){return n instanceof Le||n&&"closed"in n&&Q(n.remove)&&Q(n.add)&&Q(n.unsubscribe)}function EE(n){Q(n)?n():n.unsubscribe()}var $t={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ji={setTimeout(n,e,...t){let{delegate:r}=Ji;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ji;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function su(n){Ji.setTimeout(()=>{let{onUnhandledError:e}=$t;if(e)e(n);else throw n})}function Hr(){}var wE=Wf("C",void 0,void 0);function TE(n){return Wf("E",void 0,n)}function DE(n){return Wf("N",n,void 0)}function Wf(n,e,t){return{kind:n,value:e,error:t}}var qr=null;function Xi(n){if($t.useDeprecatedSynchronousErrorHandling){let e=!qr;if(e&&(qr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=qr;if(qr=null,t)throw r}}else n()}function bE(n){$t.useDeprecatedSynchronousErrorHandling&&qr&&(qr.errorThrown=!0,qr.error=n)}var zr=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ou(e)&&e.add(this)):this.destination=cP}static create(e,t,r){return new Jn(e,t,r)}next(e){this.isStopped?Kf(DE(e),this):this._next(e)}error(e){this.isStopped?Kf(TE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kf(wE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sP=Function.prototype.bind;function Gf(n,e){return sP.call(n,e)}var Qf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){au(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){au(r)}else au(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){au(t)}}},Jn=class extends zr{constructor(e,t,r){super();let i;if(Q(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&$t.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Gf(e.next,o),error:e.error&&Gf(e.error,o),complete:e.complete&&Gf(e.complete,o)}):i=e}this.destination=new Qf(i)}};function au(n){$t.useDeprecatedSynchronousErrorHandling?bE(n):su(n)}function aP(n){throw n}function Kf(n,e){let{onStoppedNotification:t}=$t;t&&Ji.setTimeout(()=>t(n,e))}var cP={closed:!0,next:Hr,error:aP,complete:Hr};var eo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(n){return n}function cu(...n){return Yf(n)}function Yf(n){return n.length===0?dt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var X=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=lP(t)?t:new Jn(t,r,i);return Xi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=CE(r),new r((i,o)=>{let s=new Jn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[eo](){return this}pipe(...t){return Yf(t)(this)}toPromise(t){return t=CE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function CE(n){var e;return(e=n??$t.Promise)!==null&&e!==void 0?e:Promise}function uP(n){return n&&Q(n.next)&&Q(n.error)&&Q(n.complete)}function lP(n){return n&&n instanceof zr||uP(n)&&ou(n)}function Zf(n){return Q(n?.lift)}function ee(n){return e=>{if(Zf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(n,e,t,r,i){return new Jf(n,e,t,r,i)}var Jf=class extends zr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xf(){return ee((n,e)=>{let t=null;n._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ep=class extends X{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Zf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let t=this.getSubject();e.add(this.source.subscribe(Y(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return Xf()(this)}};var SE=Zi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Cn=(()=>{class n extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new uu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new SE}next(t){Xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zf:(this.currentObservers=null,o.push(t),new Le(()=>{this.currentObservers=null,$r(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new X;return t.source=this,t}}return n.create=(e,t)=>new uu(e,t),n})(),uu=class extends Cn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:zf}};var Qs=class extends Cn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var tp={now(){return(tp.delegate||Date).now()},delegate:void 0};var lu=class extends Le{constructor(e,t){super()}schedule(e,t=0){return this}};var Ys={setInterval(n,e,...t){let{delegate:r}=Ys;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ys;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var to=class extends lu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ys.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ys.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$r(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var no=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};no.now=tp.now;var ro=class extends no{constructor(e,t=no.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var du=new ro(to),np=du;var hu=class extends to{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var fu=class extends ro{};var rp=new fu(hu);var Zs=new X(n=>n.complete());function pu(n){return n&&Q(n.schedule)}function AE(n){return n[n.length-1]}function gu(n){return Q(AE(n))?n.pop():void 0}function Xn(n){return pu(AE(n))?n.pop():void 0}function ip(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function RE(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{l(r.next(d))}catch(f){s(f)}}function u(d){try{l(r.throw(d))}catch(f){s(f)}}function l(d){d.done?o(d.value):i(d.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function NE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wr(n){return this instanceof Wr?(this.v=n,this):new Wr(n)}function PE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(w){return Promise.resolve(w).then(m,f)}}function a(m,w){r[m]&&(i[m]=function(R){return new Promise(function(P,O){o.push([m,R,P,O])>1||u(m,R)})},w&&(i[m]=w(i[m])))}function u(m,w){try{l(r[m](w))}catch(R){g(o[0][3],R)}}function l(m){m.value instanceof Wr?Promise.resolve(m.value.v).then(d,f):g(o[0][2],m)}function d(m){u("next",m)}function f(m){u("throw",m)}function g(m,w){m(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function ME(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof NE=="function"?NE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var mu=n=>n&&typeof n.length=="number"&&typeof n!="function";function yu(n){return Q(n?.then)}function vu(n){return Q(n[eo])}function _u(n){return Symbol.asyncIterator&&Q(n?.[Symbol.asyncIterator])}function Iu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Eu=dP();function wu(n){return Q(n?.[Eu])}function Tu(n){return PE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Wr(t.read());if(i)return yield Wr(void 0);yield yield Wr(r)}}finally{t.releaseLock()}})}function Du(n){return Q(n?.getReader)}function Pe(n){if(n instanceof X)return n;if(n!=null){if(vu(n))return hP(n);if(mu(n))return fP(n);if(yu(n))return pP(n);if(_u(n))return kE(n);if(wu(n))return gP(n);if(Du(n))return mP(n)}throw Iu(n)}function hP(n){return new X(e=>{let t=n[eo]();if(Q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fP(n){return new X(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pP(n){return new X(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,su)})}function gP(n){return new X(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function kE(n){return new X(e=>{yP(n,e).catch(t=>e.error(t))})}function mP(n){return kE(Tu(n))}function yP(n,e){var t,r,i,o;return RE(this,void 0,void 0,function*(){try{for(t=ME(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function yt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function er(n,e=0){return ee((t,r)=>{t.subscribe(Y(r,i=>yt(r,n,()=>r.next(i),e),()=>yt(r,n,()=>r.complete(),e),i=>yt(r,n,()=>r.error(i),e)))})}function tr(n,e=0){return ee((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xE(n,e){return Pe(n).pipe(tr(e),er(e))}function OE(n,e){return Pe(n).pipe(tr(e),er(e))}function FE(n,e){return new X(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function LE(n,e){return new X(t=>{let r;return yt(t,e,()=>{r=n[Eu](),yt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Q(r?.return)&&r.return()})}function bu(n,e){if(!n)throw new Error("Iterable cannot be null");return new X(t=>{yt(t,e,()=>{let r=n[Symbol.asyncIterator]();yt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function VE(n,e){return bu(Tu(n),e)}function jE(n,e){if(n!=null){if(vu(n))return xE(n,e);if(mu(n))return FE(n,e);if(yu(n))return OE(n,e);if(_u(n))return bu(n,e);if(wu(n))return LE(n,e);if(Du(n))return VE(n,e)}throw Iu(n)}function xt(n,e){return e?jE(n,e):Pe(n)}function vP(...n){let e=Xn(n);return xt(n,e)}function _P(n,e){let t=Q(n)?n:()=>n,r=i=>i.error(t());return new X(e?i=>e.schedule(r,0,i):r)}function IP(n){return!!n&&(n instanceof X||Q(n.lift)&&Q(n.subscribe))}var Sn=Zi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function EP(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Jn({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Sn)}});n.subscribe(o)})}function BE(n){return n instanceof Date&&!isNaN(n)}function vt(n,e){return ee((t,r)=>{let i=0;t.subscribe(Y(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:wP}=Array;function TP(n,e){return wP(e)?n(...e):n(e)}function Cu(n){return vt(e=>TP(n,e))}var{isArray:DP}=Array,{getPrototypeOf:bP,prototype:CP,keys:SP}=Object;function Su(n){if(n.length===1){let e=n[0];if(DP(e))return{args:e,keys:null};if(AP(e)){let t=SP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function AP(n){return n&&typeof n=="object"&&bP(n)===CP}function Au(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function NP(...n){let e=Xn(n),t=gu(n),{args:r,keys:i}=Su(n);if(r.length===0)return xt([],e);let o=new X(RP(r,e,i?s=>Au(i,s):dt));return t?o.pipe(Cu(t)):o}function RP(n,e,t=dt){return r=>{UE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)UE(e,()=>{let l=xt(n[u],e),d=!1;l.subscribe(Y(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function UE(n,e,t){n?yt(t,n,e):e()}function $E(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},m=R=>l<r?w(R):u.push(R),w=R=>{o&&e.next(R),l++;let P=!1;Pe(t(R,d++)).subscribe(Y(e,O=>{i?.(O),o?m(O):e.next(O)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;u.length&&l<r;){let O=u.shift();s?yt(e,s,()=>w(O)):w(O)}g()}catch(O){e.error(O)}}))};return n.subscribe(Y(e,m,()=>{f=!0,g()})),()=>{a?.()}}function Gr(n,e,t=1/0){return Q(e)?Gr((r,i)=>vt((o,s)=>e(r,o,i,s))(Pe(n(r,i))),t):(typeof e=="number"&&(t=e),ee((r,i)=>$E(r,i,n,t)))}function HE(n=1/0){return Gr(dt,n)}function qE(){return HE(1)}function Nu(...n){return qE()(xt(n,Xn(n)))}function PP(n){return new X(e=>{Pe(n()).subscribe(e)})}function MP(...n){let e=gu(n),{args:t,keys:r}=Su(n),i=new X(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;Pe(t[d]).subscribe(Y(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Au(r,a):a),o.complete())}))}});return e?i.pipe(Cu(e)):i}function op(n=0,e,t=np){let r=-1;return e!=null&&(pu(e)?t=e:r=e),new X(i=>{let o=BE(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function nr(n,e){return ee((t,r)=>{let i=0;t.subscribe(Y(r,o=>n.call(e,o,i++)&&r.next(o)))})}function zE(n){return ee((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Y(t,void 0,void 0,s=>{o=Pe(n(s,zE(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function WE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(Y(s,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function sp(n,e){return Q(e)?Gr(n,e,1):Gr(n,1)}function Js(n){return ee((e,t)=>{let r=!1;e.subscribe(Y(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ap(n){return n<=0?()=>Zs:ee((e,t)=>{let r=0;e.subscribe(Y(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function cp(n,e){return ee((t,r)=>{let i=new Set;t.subscribe(Y(r,o=>{let s=n?n(o):o;i.has(s)||(i.add(s),r.next(o))})),e&&Pe(e).subscribe(Y(r,()=>i.clear(),Hr))})}function up(n,e=dt){return n=n??kP,ee((t,r)=>{let i,o=!0;t.subscribe(Y(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function kP(n,e){return n===e}function Ru(n=xP){return ee((e,t)=>{let r=!1;e.subscribe(Y(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xP(){return new Sn}function OP(n){return ee((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function FP(n,e){let t=arguments.length>=2;return r=>r.pipe(n?nr((i,o)=>n(i,o,r)):dt,ap(1),t?Js(e):Ru(()=>new Sn))}function lp(n){return n<=0?()=>Zs:ee((e,t)=>{let r=[];e.subscribe(Y(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function LP(n,e){let t=arguments.length>=2;return r=>r.pipe(n?nr((i,o)=>n(i,o,r)):dt,lp(1),t?Js(e):Ru(()=>new Sn))}function dp(){return ee((n,e)=>{let t,r=!1;n.subscribe(Y(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Pu(n,e){return ee(WE(n,e,arguments.length>=2,!0))}function hp(...n){let e=Xn(n);return ee((t,r)=>{(e?Nu(n,t,e):Nu(n,t)).subscribe(r)})}function GE(n,e){return ee((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Y(r,u=>{i?.unsubscribe();let l=0,d=o++;Pe(n(u,d)).subscribe(i=Y(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function VP(n){return ee((e,t)=>{Pe(n).subscribe(Y(t,()=>t.complete(),Hr)),!t.closed&&e.subscribe(t)})}function jP(n,e,t){let r=Q(n)||e||t?{next:n,error:e,complete:t}:n;return r?ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}var kw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",re=class extends Error{code;constructor(e,t){super(UP(e,t)),this.code=e}};function BP(n){return`NG0${Math.abs(n)}`}function UP(n,e){return`${BP(n)}${e?": "+e:""}`}var xw=Symbol("InputSignalNode#UNSET"),$P=Je(Ze({},nu),{transformFn:void 0,applyValueToInputSignal(n,e){Gs(n,e)}});function Ow(n,e){let t=Object.create($P);t.value=n,t.transformFn=e?.transform;function r(){if(qs(t),t.value===xw){let i=null;throw new re(-950,i)}return t.value}return r[kt]=t,r}function ha(n){return{toString:n}.toString()}var Mu="__parameters__";function HP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Fw(n,e,t){return ha(()=>{let r=HP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(Mu)?u[Mu]:Object.defineProperty(u,Mu,{value:[]})[Mu];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ku=globalThis;function Ie(n){for(let e in n)if(n[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function qP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function It(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(It).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function KE(n,e){return n?e?`${n} ${e}`:n:e||""}var zP=Ie({__forward_ref__:Ie});function Lw(n){return n.__forward_ref__=Lw,n.toString=function(){return It(this())},n}function ht(n){return Vw(n)?n():n}function Vw(n){return typeof n=="function"&&n.hasOwnProperty(zP)&&n.__forward_ref__===Lw}function De(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gl(n){return{providers:n.providers||[],imports:n.imports||[]}}function ml(n){return QE(n,jw)||QE(n,Bw)}function qz(n){return ml(n)!==null}function QE(n,e){return n.hasOwnProperty(e)?n[e]:null}function WP(n){let e=n&&(n[jw]||n[Bw]);return e||null}function YE(n){return n&&(n.hasOwnProperty(ZE)||n.hasOwnProperty(GP))?n[ZE]:null}var jw=Ie({\u0275prov:Ie}),ZE=Ie({\u0275inj:Ie}),Bw=Ie({ngInjectableDef:Ie}),GP=Ie({ngInjectorDef:Ie}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=De({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Uw(n){return n&&!!n.\u0275providers}var KP=Ie({\u0275cmp:Ie}),QP=Ie({\u0275dir:Ie}),YP=Ie({\u0275pipe:Ie}),ZP=Ie({\u0275mod:Ie}),Bu=Ie({\u0275fac:Ie}),na=Ie({__NG_ELEMENT_ID__:Ie}),JE=Ie({__NG_ENV_ID__:Ie});function co(n){return typeof n=="string"?n:n==null?"":String(n)}function JP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():co(n)}function $w(n,e){throw new re(-200,n)}function gg(n,e){throw new re(-201,!1)}var ne=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ne||{}),Ap;function Hw(){return Ap}function _t(n){let e=Ap;return Ap=n,e}function qw(n,e,t){let r=ml(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ne.Optional)return null;if(e!==void 0)return e;gg(n,"Injector")}var XP={},Qr=XP,Np="__NG_DI_FLAG__",Uu=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?ru:Qr,r)}},$u="ngTempTokenPath",eM="ngTokenPath",tM=/\n/gm,nM="\u0275",XE="__source";function rM(n,e=ne.Default){if(Ks()===void 0)throw new re(-203,!1);if(Ks()===null)return qw(n,void 0,e);{let t=Ks(),r;return t instanceof Uu?r=t.injector:r=t,r.get(n,e&ne.Optional?null:void 0,e)}}function ft(n,e=ne.Default){return(Hw()||rM)(ht(n),e)}function K(n,e=ne.Default){return ft(n,yl(e))}function yl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Rp(n){let e=[];for(let t=0;t<n.length;t++){let r=ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=ne.Default;for(let s=0;s<r.length;s++){let a=r[s],u=iM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ft(i,o))}else e.push(ft(r))}return e}function zw(n,e){return n[Np]=e,n.prototype[Np]=e,n}function iM(n){return n[Np]}function oM(n,e,t,r){let i=n[$u];throw e[XE]&&i.unshift(e[XE]),n.message=sM(`
`+n.message,i,t,r),n[eM]=i,n[$u]=null,n}function sM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==nM?n.slice(2):n;let i=It(e);if(Array.isArray(e))i=e.map(It).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):It(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(tM,`
  `)}`}var Rn=zw(Fw("Optional"),8);var aM=zw(Fw("SkipSelf"),4);function Zr(n,e){let t=n.hasOwnProperty(Bu);return t?n[Bu]:null}function mg(n,e){n.forEach(t=>Array.isArray(t)?mg(t,e):e(t))}function Ww(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function cM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function uM(n,e,t){let r=fa(n,e);return r>=0?n[r|1]=t:(r=~r,cM(n,r,e,t)),r}function fp(n,e){let t=fa(n,e);if(t>=0)return n[t|1]}function fa(n,e){return lM(n,e,1)}function lM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Jr={},Ot=[],qu=new ae(""),Gw=new ae("",-1),Kw=new ae(""),zu=class{get(e,t=Qr){if(t===Qr){let r=new Error(`NullInjectorError: No provider for ${It(e)}!`);throw r.name="NullInjectorError",r}return t}};function Qw(n,e){let t=n[ZP]||null;if(!t&&e===!0)throw new Error(`Type ${It(n)} does not have '\u0275mod' property.`);return t}function uo(n){return n[KP]||null}function dM(n){return n[QP]||null}function hM(n){return n[YP]||null}function pa(n){return{\u0275providers:n}}function fM(...n){return{\u0275providers:Yw(!0,n),\u0275fromNgModule:!0}}function Yw(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return mg(e,s=>{let a=s;Pp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Zw(i,o),t}function Zw(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];yg(i,o=>{e(o,r)})}}function Pp(n,e,t,r){if(n=ht(n),!n)return!1;let i=null,o=YE(n),s=!o&&uo(n);if(!o&&!s){let u=n.ngModule;if(o=YE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Pp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{mg(o.imports,d=>{Pp(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Zw(l,e)}if(!a){let l=Zr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ot},i),e({provide:Kw,useValue:i,multi:!0},i),e({provide:qu,useValue:()=>ft(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;yg(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function yg(n,e){for(let t of n)Uw(t)&&(t=t.\u0275providers),Array.isArray(t)?yg(t,e):e(t)}var pM=Ie({provide:String,useValue:Ie});function Jw(n){return n!==null&&typeof n=="object"&&pM in n}function gM(n){return!!(n&&n.useExisting)}function mM(n){return!!(n&&n.useFactory)}function lo(n){return typeof n=="function"}function yM(n){return!!n.useClass}var Xw=new ae(""),Ou={},ew={},pp;function vg(){return pp===void 0&&(pp=new zu),pp}var tn=class{},ra=class extends tn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,kp(e,s=>this.processProvider(s)),this.records.set(Gw,io(void 0,this)),i.has("environment")&&this.records.set(tn,io(void 0,this));let o=this.records.get(Xw);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Kw,Ot,ne.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?ru:Qr,r)}destroy(){ea(this),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return ea(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ea(this);let t=bn(this),r=_t(void 0),i;try{return e()}finally{bn(t),_t(r)}}get(e,t=Qr,r=ne.Default){if(ea(this),e.hasOwnProperty(JE))return e[JE](this);r=yl(r);let i,o=bn(this),s=_t(void 0);try{if(!(r&ne.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=wM(e)&&ml(e);l&&this.injectableDefInScope(l)?u=io(Mp(e),Ou):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&ne.Self?vg():this.parent;return t=r&ne.Optional&&t===Qr?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[$u]=a[$u]||[]).unshift(It(e)),o)throw a;return oM(a,e,"R3InjectorError",this.source)}else throw a}finally{_t(s),bn(o)}}resolveInjectorInitializers(){let e=se(null),t=bn(this),r=_t(void 0),i;try{let o=this.get(qu,Ot,ne.Self);for(let s of o)s()}finally{bn(t),_t(r),se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(It(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ht(e);let t=lo(e)?e:ht(e&&e.provide),r=_M(e);if(!lo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=io(void 0,Ou,!0),i.factory=()=>Rp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=se(null);try{return t.value===ew?$w(It(e)):t.value===Ou&&(t.value=ew,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&EM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Mp(n){let e=ml(n),t=e!==null?e.factory:Zr(n);if(t!==null)return t;if(n instanceof ae)throw new re(204,!1);if(n instanceof Function)return vM(n);throw new re(204,!1)}function vM(n){if(n.length>0)throw new re(204,!1);let t=WP(n);return t!==null?()=>t.factory(n):()=>new n}function _M(n){if(Jw(n))return io(void 0,n.useValue);{let e=eT(n);return io(e,Ou)}}function eT(n,e,t){let r;if(lo(n)){let i=ht(n);return Zr(i)||Mp(i)}else if(Jw(n))r=()=>ht(n.useValue);else if(mM(n))r=()=>n.useFactory(...Rp(n.deps||[]));else if(gM(n))r=(i,o)=>ft(ht(n.useExisting),o!==void 0&&o&ne.Optional?ne.Optional:void 0);else{let i=ht(n&&(n.useClass||n.provide));if(IM(n))r=()=>new i(...Rp(n.deps));else return Zr(i)||Mp(i)}return r}function ea(n){if(n.destroyed)throw new re(205,!1)}function io(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function IM(n){return!!n.deps}function EM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function wM(n){return typeof n=="function"||typeof n=="object"&&n instanceof ae}function kp(n,e){for(let t of n)Array.isArray(t)?kp(t,e):t&&Uw(t)?kp(t.\u0275providers,e):e(t)}function Io(n,e){let t;n instanceof ra?(ea(n),t=n):t=new Uu(n);let r,i=bn(t),o=_t(void 0);try{return e()}finally{bn(i),_t(o)}}function tT(){return Hw()!==void 0||Ks()!=null}function _g(n){if(!tT())throw new re(-203,!1)}function TM(n){return typeof n=="function"}var Pn=0,de=1,Z=2,pt=3,qt=4,zt=5,Wu=6,Gu=7,Et=8,ho=9,An=10,je=11,ia=12,tw=13,Eo=14,nn=15,fo=16,oo=17,po=18,vl=19,nT=20,ir=21,gp=22,Xr=23,Ft=24,mp=25,St=26,rT=1;var ei=7,Ku=8,Qu=9,Lt=10;function or(n){return Array.isArray(n)&&typeof n[rT]=="object"}function Mn(n){return Array.isArray(n)&&n[rT]===!0}function Ig(n){return(n.flags&4)!==0}function wo(n){return n.componentOffset>-1}function _l(n){return(n.flags&1)===1}function rn(n){return!!n.template}function Yu(n){return(n[Z]&512)!==0}function To(n){return(n[Z]&256)===256}var xp=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function iT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var DM=(()=>{let n=()=>oT;return n.ngInherit=!0,n})();function oT(n){return n.type.prototype.ngOnChanges&&(n.setInput=CM),bM}function bM(){let n=aT(this),e=n?.current;if(e){let t=n.previous;if(t===Jr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function CM(n,e,t,r,i){let o=this.declaredInputs[r],s=aT(n)||SM(n,{previous:Jr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new xp(l&&l.currentValue,t,u===Jr),iT(n,e,i,t)}var sT="__ngSimpleChanges__";function aT(n){return n[sT]||null}function SM(n,e){return n[sT]=e}var nw=null;var Ee=function(n,e=null,t){nw?.(n,e,t)},AM="svg",NM="math";function on(n){for(;Array.isArray(n);)n=n[Pn];return n}function cT(n,e){return on(e[n])}function an(n,e){return on(e[n.index])}function uT(n,e){return n.data[e]}function lT(n,e){return n[e]}function RM(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function sn(n,e){let t=e[n];return or(t)?t:t[Pn]}function Eg(n){return(n[Z]&128)===128}function PM(n){return Mn(n[pt])}function go(n,e){return e==null?null:n[e]}function dT(n){n[oo]=0}function hT(n){n[Z]&1024||(n[Z]|=1024,Eg(n)&&ga(n))}function MM(n,e){for(;n>0;)e=e[Eo],n--;return e}function Il(n){return!!(n[Z]&9216||n[Ft]?.dirty)}function Op(n){n[An].changeDetectionScheduler?.notify(8),n[Z]&64&&(n[Z]|=1024),Il(n)&&ga(n)}function ga(n){n[An].changeDetectionScheduler?.notify(0);let e=ti(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!Eg(e)));)e=ti(e)}function fT(n,e){if(To(n))throw new re(911,!1);n[ir]===null&&(n[ir]=[]),n[ir].push(e)}function kM(n,e){if(n[ir]===null)return;let t=n[ir].indexOf(e);t!==-1&&n[ir].splice(t,1)}function ti(n){let e=n[pt];return Mn(e)?e[pt]:e}function pT(n){return n[Gu]??=[]}function gT(n){return n.cleanup??=[]}var te={lFrame:TT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Fp=!1;function xM(){return te.lFrame.elementDepthCount}function OM(){te.lFrame.elementDepthCount++}function FM(){te.lFrame.elementDepthCount--}function wg(){return te.bindingsEnabled}function LM(){return te.skipHydrationRootTNode!==null}function VM(n){return te.skipHydrationRootTNode===n}function jM(){te.skipHydrationRootTNode=null}function pe(){return te.lFrame.lView}function rt(){return te.lFrame.tView}function zz(n){return te.lFrame.contextLView=n,n[Et]}function Wz(n){return te.lFrame.contextLView=null,n}function wt(){let n=mT();for(;n!==null&&n.type===64;)n=n.parent;return n}function mT(){return te.lFrame.currentTNode}function BM(){let n=te.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function si(n,e){let t=te.lFrame;t.currentTNode=n,t.isParent=e}function Tg(){return te.lFrame.isParent}function yT(){te.lFrame.isParent=!1}function UM(){return te.lFrame.contextLView}function vT(){return Fp}function Zu(n){let e=Fp;return Fp=n,e}function Dg(){let n=te.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function $M(){return te.lFrame.bindingIndex}function HM(n){return te.lFrame.bindingIndex=n}function El(){return te.lFrame.bindingIndex++}function _T(n){let e=te.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function qM(){return te.lFrame.inI18n}function zM(n,e){let t=te.lFrame;t.bindingIndex=t.bindingRootIndex=n,Lp(e)}function WM(){return te.lFrame.currentDirectiveIndex}function Lp(n){te.lFrame.currentDirectiveIndex=n}function GM(n){let e=te.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function IT(n){te.lFrame.currentQueryIndex=n}function KM(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[zt]:null}function ET(n,e,t){if(t&ne.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ne.Host);)if(i=KM(o),i===null||(o=o[Eo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=te.lFrame=wT();return r.currentTNode=e,r.lView=n,!0}function bg(n){let e=wT(),t=n[de];te.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function wT(){let n=te.lFrame,e=n===null?null:n.child;return e===null?TT(n):e}function TT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function DT(){let n=te.lFrame;return te.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var bT=DT;function Cg(){let n=DT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function QM(n){return(te.lFrame.contextLView=MM(n,te.lFrame.contextLView))[Et]}function ai(){return te.lFrame.selectedIndex}function ni(n){te.lFrame.selectedIndex=n}function Sg(){let n=te.lFrame;return uT(n.tView,n.selectedIndex)}function YM(){return te.lFrame.currentNamespace}var CT=!0;function wl(){return CT}function Tl(n){CT=n}function ZM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=oT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Ag(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Fu(n,e,t){ST(n,e,3,t)}function Lu(n,e,t,r){(n[Z]&3)===t&&ST(n,e,t,r)}function yp(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function ST(n,e,t,r){let i=r!==void 0?n[oo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[oo]+=65536),(a<o||o==-1)&&(JM(n,t,e,u),n[oo]=(n[oo]&4294901760)+u+2),u++}function rw(n,e){Ee(4,n,e);let t=se(null);try{e.call(n)}finally{se(t),Ee(5,n,e)}}function JM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Z]>>14<n[oo]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,rw(a,o)):rw(a,o)}var ao=-1,ri=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function XM(n){return(n.flags&8)!==0}function ek(n){return(n.flags&16)!==0}function tk(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];rk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function nk(n){return n===3||n===4||n===6}function rk(n){return n.charCodeAt(0)===64}function mo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?iw(n,t,i,null,e[++r]):iw(n,t,i,null,null))}}return n}function iw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function AT(n){return n!==ao}function Ju(n){return n&32767}function ik(n){return n>>16}function Xu(n,e){let t=ik(n),r=e;for(;t>0;)r=r[Eo],t--;return r}var Vp=!0;function el(n){let e=Vp;return Vp=n,e}var ok=256,NT=ok-1,RT=5,sk=0,en={};function ak(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(na)&&(r=t[na]),r==null&&(r=t[na]=sk++);let i=r&NT,o=1<<i;e.data[n+(i>>RT)]|=o}function tl(n,e){let t=PT(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,vp(r.data,n),vp(e,null),vp(r.blueprint,null));let i=Ng(n,e),o=n.injectorIndex;if(AT(i)){let s=Ju(i),a=Xu(i,e),u=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function vp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function PT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ng(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=FT(i),r===null)return ao;if(t++,i=i[Eo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ao}function jp(n,e,t){ak(n,e,t)}function MT(n,e,t){if(t&ne.Optional||n!==void 0)return n;gg(e,"NodeInjector")}function kT(n,e,t,r){if(t&ne.Optional&&r===void 0&&(r=null),(t&(ne.Self|ne.Host))===0){let i=n[ho],o=_t(void 0);try{return i?i.get(e,r,t&ne.Optional):qw(e,r,t&ne.Optional)}finally{_t(o)}}return MT(r,e,t)}function xT(n,e,t,r=ne.Default,i){if(n!==null){if(e[Z]&2048&&!(r&ne.Self)){let s=hk(n,e,t,r,en);if(s!==en)return s}let o=OT(n,e,t,r,en);if(o!==en)return o}return kT(e,t,r,i)}function OT(n,e,t,r,i){let o=lk(t);if(typeof o=="function"){if(!ET(e,n,r))return r&ne.Host?MT(i,t,r):kT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ne.Optional))gg(t);else return s}finally{bT()}}else if(typeof o=="number"){let s=null,a=PT(n,e),u=ao,l=r&ne.Host?e[nn][zt]:null;for((a===-1||r&ne.SkipSelf)&&(u=a===-1?Ng(n,e):e[a+8],u===ao||!sw(r,!1)?a=-1:(s=e[de],a=Ju(u),e=Xu(u,e)));a!==-1;){let d=e[de];if(ow(o,a,d.data)){let f=ck(a,e,t,s,r,l);if(f!==en)return f}u=e[a+8],u!==ao&&sw(r,e[de].data[a+8]===l)&&ow(o,a,e)?(s=d,a=Ju(u),e=Xu(u,e)):a=-1}}return i}function ck(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],u=r==null?wo(a)&&Vp:r!=s&&(a.type&3)!==0,l=i&ne.Host&&o===a,d=uk(a,s,t,u,l);return d!==null?nl(e,s,d,a,i):en}function uk(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let w=s[m];if(m<u&&t===w||m>=u&&w.type===t)return m}if(i){let m=s[u];if(m&&rn(m)&&m.type===t)return u}return null}function nl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ri){let a=o;a.resolving&&$w(JP(s[t]));let u=el(a.canSeeViewProviders);a.resolving=!0;let l,d=a.injectImpl?_t(a.injectImpl):null,f=ET(n,r,ne.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&ZM(t,s[t],e)}finally{d!==null&&_t(d),el(u),a.resolving=!1,bT()}}return o}function lk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(na)?n[na]:void 0;return typeof e=="number"?e>=0?e&NT:dk:e}function ow(n,e,t){let r=1<<n;return!!(t[e+(n>>RT)]&r)}function sw(n,e){return!(n&ne.Self)&&!(n&ne.Host&&e)}var Yr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return xT(this._tNode,this._lView,e,yl(r),t)}};function dk(){return new Yr(wt(),pe())}function Gz(n){return ha(()=>{let e=n.prototype.constructor,t=e[Bu]||Bp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Bu]||Bp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Bp(n){return Vw(n)?()=>{let e=Bp(ht(n));return e&&e()}:Zr(n)}function hk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!Yu(s);){let a=OT(o,s,t,r|ne.Self,en);if(a!==en)return a;let u=o.parent;if(!u){let l=s[nT];if(l){let d=l.get(t,en,r);if(d!==en)return d}u=FT(s),s=s[Eo]}o=u}return i}function FT(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[zt]:null}function aw(n,e=null,t=null,r){let i=LT(n,e,t,r);return i.resolveInjectorInitializers(),i}function LT(n,e=null,t=null,r,i=new Set){let o=[t||Ot,fM(n)];return r=r||(typeof n=="object"?void 0:It(n)),new ra(o,e||vg(),r||null,i)}var Vt=class n{static THROW_IF_NOT_FOUND=Qr;static NULL=new zu;static create(e,t){if(Array.isArray(e))return aw({name:""},t,e,"");{let r=e.name??"";return aw({name:r},e.parent,e.providers,r)}}static \u0275prov=De({token:n,providedIn:"any",factory:()=>ft(Gw)});static __NG_ELEMENT_ID__=-1};var fk=new ae("");fk.__NG_ELEMENT_ID__=n=>{let e=wt();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&ne.Optional)return null;throw new re(204,!1)};var VT=!1,Dl=(()=>{class n{static __NG_ELEMENT_ID__=pk;static __NG_ENV_ID__=t=>t}return n})(),rl=class extends Dl{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return To(t)?(e(),()=>{}):(fT(t,e),()=>kM(t,e))}};function pk(){return new rl(pe())}var ii=class{},Rg=new ae("",{providedIn:"root",factory:()=>!1});var jT=new ae(""),BT=new ae(""),ma=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Qs(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=De({token:n,providedIn:"root",factory:()=>new n})}return n})(),bl=(()=>{class n{internalPendingTasks=K(ma);scheduler=K(ii);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return _(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=De({token:n,providedIn:"root",factory:()=>new n})}return n})(),Up=class extends Cn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,tT()&&(this.destroyRef=K(Dl,{optional:!0})??void 0,this.pendingTasks=K(ma,{optional:!0})??void 0)}emit(e){let t=se(null);try{super.next(e)}finally{se(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},rr=Up;function oa(...n){}function UT(n){let e,t;function r(){n=oa;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function cw(n){return queueMicrotask(()=>n()),()=>{n=oa}}var Pg="isAngularZone",il=Pg+"_ID",gk=0,Ve=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new rr(!1);onMicrotaskEmpty=new rr(!1);onStable=new rr(!1);onError=new rr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=VT}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,vk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Pg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,mk,oa,oa);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},mk={};function Mg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function yk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){UT(()=>{n.callbackScheduled=!1,$p(n),n.isCheckStableRunning=!0,Mg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$p(n)}function vk(n){let e=()=>{yk(n)},t=gk++;n._inner=n._inner.fork({name:"angular",properties:{[Pg]:!0,[il]:t,[il+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(_k(u))return r.invokeTask(o,s,a,u);try{return uw(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),lw(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return uw(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Ik(u)&&e(),lw(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,$p(n),Mg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function $p(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function uw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lw(n){n._nesting--,Mg(n)}var Hp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new rr;onMicrotaskEmpty=new rr;onStable=new rr;onError=new rr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function _k(n){return $T(n,"__ignore_ng_zone__")}function Ik(n){return $T(n,"__scheduler_tick__")}function $T(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var yo=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ek=new ae("",{providedIn:"root",factory:()=>{let n=K(Ve),e=K(yo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function dw(n,e){return Ow(n,e)}function wk(n){return Ow(xw,n)}var Kz=(dw.required=wk,dw);function Tk(){return Cl(wt(),pe())}function Cl(n,e){return new kg(an(n,e))}var kg=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Tk}return n})();function Dk(n){return typeof n=="function"&&n[kt]!==void 0}function bk(n,e){let t=Uf(n,e?.equal),r=t[kt];return t.set=i=>Gs(r,i),t.update=i=>$f(r,i),t.asReadonly=Ck.bind(t),t}function Ck(){let n=this[kt];if(n.readonlyFn===void 0){let e=()=>this();e[kt]=n,n.readonlyFn=e}return n.readonlyFn}function HT(n){return Dk(n)&&typeof n.set=="function"}function qT(n){return(n.flags&128)===128}var zT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(zT||{}),WT=new Map,Sk=0;function Ak(){return Sk++}function Nk(n){WT.set(n[vl],n)}function qp(n){WT.delete(n[vl])}var hw="__ngContext__";function Do(n,e){or(e)?(n[hw]=e[vl],Nk(e)):n[hw]=e}function GT(n){return QT(n[ia])}function KT(n){return QT(n[qt])}function QT(n){for(;n!==null&&!Mn(n);)n=n[qt];return n}var zp;function Qz(n){zp=n}function Rk(){if(zp!==void 0)return zp;if(typeof document<"u")return document;throw new re(210,!1)}var Yz=new ae("",{providedIn:"root",factory:()=>Pk}),Pk="ng",Mk=new ae(""),YT=new ae("",{providedIn:"platform",factory:()=>"unknown"});var Zz=new ae("",{providedIn:"root",factory:()=>Rk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kk="h",xk="b";var ZT=!1,Ok=new ae("",{providedIn:"root",factory:()=>ZT});var JT=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(JT||{}),XT=new ae(""),fw=new Set;function eD(n){fw.has(n)||(fw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var tD=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Fk}return n})();function Fk(){return new tD(pe(),wt())}var Lk=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=De({token:n,providedIn:"root",factory:()=>new n})}return n})();var Vk=(n,e,t,r)=>{};function jk(n,e,t,r){Vk(n,e,t,r)}var Bk=()=>null;function nD(n,e,t=!1){return Bk(n,e,t)}function rD(n,e){let t=n.contentQueries;if(t!==null){let r=se(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];IT(o),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function Wp(n,e,t){IT(0);let r=se(null);try{e(n,t)}finally{se(r)}}function xg(n,e,t){if(Ig(e)){let r=se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{se(r)}}}var sa=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(sa||{});var ol=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kw})`}};function iD(n){return n instanceof ol?n.changingThisBreaksApplicationSecurity:n}function Uk(n,e){let t=$k(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${kw})`)}return t===e}function $k(n){return n instanceof ol&&n.getTypeName()||null}var Hk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qk(n){return n=String(n),n.match(Hk)?n:"unsafe:"+n}var oD=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(oD||{});function Jz(n){let e=zk();return e?e.sanitize(oD.URL,n)||"":Uk(n,"URL")?iD(n):qk(co(n))}function zk(){let n=pe();return n&&n[An].sanitizer}var Wk=/^>|^->|<!--|-->|--!>|<!-$/g,Gk=/(<|>)/g,Kk="\u200B$1\u200B";function Qk(n){return n.replace(Wk,e=>e.replace(Gk,Kk))}function sD(n){return n instanceof Function?n():n}function Yk(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var aD="ng-template";function Zk(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Yk(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Og(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Og(n){return n.type===4&&n.value!==aD}function Jk(n,e,t){let r=n.type===4&&!t?aD:n.value;return e===r}function Xk(n,e,t){let r=4,i=n.attrs,o=i!==null?nx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Ht(r)&&!Ht(u))return!1;if(s&&Ht(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Jk(n,u,t)||u===""&&e.length===1){if(Ht(r))return!1;s=!0}}else if(r&8){if(i===null||!Zk(n,i,u,t)){if(Ht(r))return!1;s=!0}}else{let l=e[++a],d=ex(u,i,Og(n),t);if(d===-1){if(Ht(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Ht(r))return!1;s=!0}}}}return Ht(r)||s}function Ht(n){return(n&1)===0}function ex(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return rx(e,n)}function tx(n,e,t=!1){for(let r=0;r<e.length;r++)if(Xk(n,e[r],t))return!0;return!1}function nx(n){for(let e=0;e<n.length;e++){let t=n[e];if(nk(t))return e}return n.length}function rx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function pw(n,e){return n?":not("+e.trim()+")":e}function ix(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ht(s)&&(e+=pw(o,i),i=""),r=s,o=o||!Ht(r);t++}return i!==""&&(e+=pw(o,i)),e}function ox(n){return n.map(ix).join(",")}function sx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ht(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var cn={};function ax(n,e){return n.createText(e)}function cx(n,e,t){n.setValue(e,t)}function ux(n,e){return n.createComment(Qk(e))}function cD(n,e,t){return n.createElement(e,t)}function sl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function uD(n,e,t){n.appendChild(e,t)}function gw(n,e,t,r,i){r!==null?sl(n,e,t,r,i):uD(n,e,t)}function lx(n,e,t){n.removeChild(null,e,t)}function dx(n,e,t){n.setAttribute(e,"style",t)}function hx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function lD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&tk(n,e,r),i!==null&&hx(n,e,i),o!==null&&dx(n,e,o)}function Fg(n,e,t,r,i,o,s,a,u,l,d){let f=St+r,g=f+i,m=fx(f,g),w=typeof l=="function"?l():l;return m[de]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:d}}function fx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:cn);return t}function px(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Fg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Lg(n,e,t,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[Pn]=i,f[Z]=r|4|128|8|64|1024,(l!==null||n&&n[Z]&2048)&&(f[Z]|=2048),dT(f),f[pt]=f[Eo]=n,f[Et]=t,f[An]=s||n&&n[An],f[je]=a||n&&n[je],f[ho]=u||n&&n[ho]||null,f[zt]=o,f[vl]=Ak(),f[Wu]=d,f[nT]=l,f[nn]=e.type==2?n[nn]:f,f}function gx(n,e,t){let r=an(e,n),i=px(t),o=n[An].rendererFactory,s=Vg(n,Lg(n,i,null,dD(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function dD(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function hD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Vg(n,e){return n[ia]?n[tw][qt]=e:n[ia]=e,n[tw]=e,e}function Xz(n=1){fD(rt(),pe(),ai()+n,!1)}function fD(n,e,t,r){if(!r)if((e[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Lu(e,o,0,t)}ni(t)}var Sl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Sl||{});function Gp(n,e,t,r){let i=se(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Sl.SignalBased)!==0&&(u=e[o][kt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):iT(e,u,o,r)}finally{se(i)}}function pD(n,e,t,r,i){let o=ai(),s=r&2;try{ni(-1),s&&e.length>St&&fD(n,e,St,!1),Ee(s?2:0,i),t(r,i)}finally{ni(o),Ee(s?3:1,i)}}function Al(n,e,t){Ex(n,e,t),(t.flags&64)===64&&wx(n,e,t)}function jg(n,e,t=an){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function mx(n,e,t,r){let o=r.get(Ok,ZT)||t===sa.ShadowDom,s=n.selectRootElement(e,o);return yx(s),s}function yx(n){vx(n)}var vx=()=>null;function _x(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function gD(n,e,t,r,i,o,s,a){if(!a&&Ug(e,n,t,r,i)){wo(e)&&Ix(t,e.index);return}if(e.type&3){let u=an(e,t);r=_x(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function Ix(n,e){let t=sn(e,n);t[Z]&16||(t[Z]|=64)}function Ex(n,e,t){let r=t.directiveStart,i=t.directiveEnd;wo(t)&&gx(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||tl(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=nl(e,n,s,t);if(Do(u,e),o!==null&&Cx(e,s-r,u,a,t,o),rn(a)){let l=sn(t.index,e);l[Et]=nl(e,n,s,t)}}}function wx(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=WM();try{ni(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Lp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Tx(u,l)}}finally{ni(-1),Lp(s)}}function Tx(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Bg(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];tx(e,o.selectors,!1)&&(r??=[],rn(o)?r.unshift(o):r.push(o))}return r}function Dx(n,e,t,r,i,o){let s=an(n,e);bx(e[je],s,o,n.value,t,r,i)}function bx(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?co(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Cx(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Gp(r,t,u,l)}}function Sx(n,e){let t=n[ho],r=t?t.get(yo,null):null;r&&r.handleError(e)}function Ug(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],d=s[u+1],f=e.data[l];Gp(f,t[l],d,i),a=!0}if(o)for(let u of o){let l=t[u],d=e.data[u];Gp(d,l,r,i),a=!0}return a}function Ax(n,e){let t=sn(e,n),r=t[de];Nx(r,t);let i=t[Pn];i!==null&&t[Wu]===null&&(t[Wu]=nD(i,t[ho])),Ee(18),$g(r,t,t[Et]),Ee(19,t[Et])}function Nx(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $g(n,e,t){bg(e);try{let r=n.viewQuery;r!==null&&Wp(1,r,t);let i=n.template;i!==null&&pD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[po]?.finishViewCreation(n),n.staticContentQueries&&rD(n,e),n.staticViewQueries&&Wp(2,n.viewQuery,t);let o=n.components;o!==null&&Rx(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Z]&=-5,Cg()}}function Rx(n,e){for(let t=0;t<e.length;t++)Ax(n,e[t])}function Px(n,e,t,r){let i=se(null);try{let o=e.tView,a=n[Z]&4096?4096:16,u=Lg(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[fo]=l;let d=n[po];return d!==null&&(u[po]=d.createEmbeddedView(o)),$g(o,u,t),u}finally{se(i)}}function mw(n,e){return!e||e.firstChild===null||qT(n)}var Mx;function Hg(n,e){return Mx(n,e)}var al=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(al||{});function mD(n){return(n.flags&32)===32}function so(n,e,t,r,i){if(r!=null){let o,s=!1;Mn(r)?o=r:or(r)&&(s=!0,r=r[Pn]);let a=on(r);n===0&&t!==null?i==null?uD(e,t,a):sl(e,t,a,i||null,!0):n===1&&t!==null?sl(e,t,a,i||null,!0):n===2?lx(e,a,s):n===3&&e.destroyNode(a),o!=null&&qx(e,n,o,t,i)}}function kx(n,e){yD(n,e),e[Pn]=null,e[zt]=null}function xx(n,e,t,r,i,o){r[Pn]=i,r[zt]=e,Rl(n,r,t,1,i,o)}function yD(n,e){e[An].changeDetectionScheduler?.notify(9),Rl(n,e,e[je],2,null,null)}function Ox(n){let e=n[ia];if(!e)return _p(n[de],n);for(;e;){let t=null;if(or(e))t=e[ia];else{let r=e[Lt];r&&(t=r)}if(!t){for(;e&&!e[qt]&&e!==n;)or(e)&&_p(e[de],e),e=e[pt];e===null&&(e=n),or(e)&&_p(e[de],e),t=e&&e[qt]}e=t}}function qg(n,e){let t=n[Qu],r=t.indexOf(e);t.splice(r,1)}function vD(n,e){if(To(e))return;let t=e[je];t.destroyNode&&Rl(n,e,t,3,null,null),Ox(e)}function _p(n,e){if(To(e))return;let t=se(null);try{e[Z]&=-129,e[Z]|=256,e[Ft]&&Ws(e[Ft]),Lx(n,e),Fx(n,e),e[de].type===1&&e[je].destroy();let r=e[fo];if(r!==null&&Mn(e[pt])){r!==e[pt]&&qg(r,e);let i=e[po];i!==null&&i.detachView(n)}qp(e)}finally{se(t)}}function Fx(n,e){let t=n.cleanup,r=e[Gu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Gu]=null);let i=e[ir];if(i!==null){e[ir]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Xr];if(o!==null){e[Xr]=null;for(let s of o)s.destroy()}}function Lx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ri)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ee(4,a,u);try{u.call(a)}finally{Ee(5,a,u)}}else{Ee(4,i,o);try{o.call(i)}finally{Ee(5,i,o)}}}}}function Vx(n,e,t){return jx(n,e.parent,t)}function jx(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Pn];if(wo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===sa.None||i===sa.Emulated)return null}return an(r,t)}function Bx(n,e,t){return $x(n,e,t)}function Ux(n,e,t){return n.type&40?an(n,t):null}var $x=Ux,yw;function Nl(n,e,t,r){let i=Vx(n,r,e),o=e[je],s=r.parent||e[zt],a=Bx(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)gw(o,i,t[u],a,!1);else gw(o,i,t,a,!1);yw!==void 0&&yw(o,r,e,t,i)}function ta(n,e){if(e!==null){let t=e.type;if(t&3)return an(e,n);if(t&4)return Kp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ta(n,r);{let i=n[e.index];return Mn(i)?Kp(-1,i):on(i)}}else{if(t&128)return ta(n,e.next);if(t&32)return Hg(e,n)()||on(n[e.index]);{let r=_D(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ti(n[nn]);return ta(i,r)}else return ta(n,e.next)}}}return null}function _D(n,e){if(e!==null){let r=n[nn][zt],i=e.projection;return r.projection[i]}return null}function Kp(n,e){let t=Lt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return ta(r,i)}return e[ei]}function zg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Do(on(a),r),t.flags|=2),!mD(t))if(u&8)zg(n,e,t.child,r,i,o,!1),so(e,n,i,a,o);else if(u&32){let l=Hg(t,r),d;for(;d=l();)so(e,n,i,d,o);so(e,n,i,a,o)}else u&16?Hx(n,e,r,t,i,o):so(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Rl(n,e,t,r,i,o){zg(t,r,n.firstChild,e,i,o,!1)}function Hx(n,e,t,r,i,o){let s=t[nn],u=s[zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];so(e,n,i,d,o)}else{let l=u,d=s[pt];qT(r)&&(l.flags|=128),zg(n,e,l,d,i,o,!0)}}function qx(n,e,t,r,i){let o=t[ei],s=on(t);o!==s&&so(e,n,r,o,i);for(let a=Lt;a<t.length;a++){let u=t[a];Rl(u[de],u,n,e,r,o)}}function zx(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:al.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=al.Important),n.setStyle(t,r,i,o))}}function cl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(on(o)),Mn(o)&&Wx(o,r);let s=t.type;if(s&8)cl(n,e,t.child,r);else if(s&32){let a=Hg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=_D(e,t);if(Array.isArray(a))r.push(...a);else{let u=ti(e[nn]);cl(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Wx(n,e){for(let t=Lt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&cl(r[de],r,i,e)}n[ei]!==n[Pn]&&e.push(n[ei])}function ID(n){if(n[mp]!==null){for(let e of n[mp])e.impl.addSequence(e);n[mp].length=0}}var ED=[];function Gx(n){return n[Ft]??Kx(n)}function Kx(n){let e=ED.pop()??Object.create(Yx);return e.lView=n,e}function Qx(n){n.lView[Ft]!==n&&(n.lView=null,ED.push(n))}var Yx=Je(Ze({},Yi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ga(n.lView)},consumerOnSignalRead(){this.lView[Ft]=this}});function Zx(n){let e=n[Ft]??Object.create(Jx);return e.lView=n,e}var Jx=Je(Ze({},Yi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ti(n.lView);for(;e&&!wD(e[de]);)e=ti(e);e&&hT(e)},consumerOnSignalRead(){this.lView[Ft]=this}});function wD(n){return n.type!==2}function TD(n){if(n[Xr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Xr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Z]&8192)}}var Xx=100;function DD(n,e=!0,t=0){let i=n[An].rendererFactory,o=!1;o||i.begin?.();try{e1(n,t)}catch(s){throw e&&Sx(n,s),s}finally{o||i.end?.()}}function e1(n,e){let t=vT();try{Zu(!0),Qp(n,e);let r=0;for(;Il(n);){if(r===Xx)throw new re(103,!1);r++,Qp(n,1)}}finally{Zu(t)}}function t1(n,e,t,r){if(To(e))return;let i=e[Z],o=!1,s=!1;bg(e);let a=!0,u=null,l=null;o||(wD(n)?(l=Gx(e),u=zs(l)):Of()===null?(a=!1,l=Zx(e),u=zs(l)):e[Ft]&&(Ws(e[Ft]),e[Ft]=null));try{dT(e),HM(n.bindingStartIndex),t!==null&&pD(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&Fu(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Lu(e,m,0,null),yp(e,0)}if(s||n1(e),TD(e),bD(e,0),n.contentQueries!==null&&rD(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&Fu(e,m)}else{let m=n.contentHooks;m!==null&&Lu(e,m,1),yp(e,1)}i1(n,e);let f=n.components;f!==null&&SD(e,f,0);let g=n.viewQuery;if(g!==null&&Wp(2,g,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&Fu(e,m)}else{let m=n.viewHooks;m!==null&&Lu(e,m,2),yp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[gp]){for(let m of e[gp])m();e[gp]=null}o||(ID(e),e[Z]&=-73)}catch(d){throw o||ga(e),d}finally{l!==null&&(Jc(l,u),a&&Qx(l)),Cg()}}function bD(n,e){for(let t=GT(n);t!==null;t=KT(t))for(let r=Lt;r<t.length;r++){let i=t[r];CD(i,e)}}function n1(n){for(let e=GT(n);e!==null;e=KT(e)){if(!(e[Z]&2))continue;let t=e[Qu];for(let r=0;r<t.length;r++){let i=t[r];hT(i)}}}function r1(n,e,t){Ee(18);let r=sn(e,n);CD(r,t),Ee(19,r[Et])}function CD(n,e){Eg(n)&&Qp(n,e)}function Qp(n,e){let r=n[de],i=n[Z],o=n[Ft],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Xc(o)),s||=!1,o&&(o.dirty=!1),n[Z]&=-9217,s)t1(r,n,r.template,n[Et]);else if(i&8192){TD(n),bD(n,1);let a=r.components;a!==null&&SD(n,a,1),ID(n)}}function SD(n,e,t){for(let r=0;r<e.length;r++)r1(n,e[r],t)}function i1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ni(~i);else{let o=i,s=t[++r],a=t[++r];zM(s,o);let u=e[o];Ee(24,u),a(2,u),Ee(25,u)}}}finally{ni(-1)}}function Wg(n,e){let t=vT()?64:1088;for(n[An].changeDetectionScheduler?.notify(e);n;){n[Z]|=t;let r=ti(n);if(Yu(n)&&!r)return n;n=r}return null}function AD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function o1(n,e,t,r=!0){let i=e[de];if(s1(i,e,n,t),r){let s=Kp(t,n),a=e[je],u=a.parentNode(n[ei]);u!==null&&xx(i,n[zt],a,e,u,s)}let o=e[Wu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Yp(n,e){if(n.length<=Lt)return;let t=Lt+e,r=n[t];if(r){let i=r[fo];i!==null&&i!==n&&qg(i,r),e>0&&(n[t-1][qt]=r[qt]);let o=Hu(n,Lt+e);kx(r[de],r);let s=o[po];s!==null&&s.detachView(o[de]),r[pt]=null,r[qt]=null,r[Z]&=-129}return r}function s1(n,e,t,r){let i=Lt+r,o=t.length;r>0&&(t[i-1][qt]=e),r<o-Lt?(e[qt]=t[i],Ww(t,Lt+r,e)):(t.push(e),e[qt]=null),e[pt]=t;let s=e[fo];s!==null&&t!==s&&ND(s,e);let a=e[po];a!==null&&a.insertView(n),Op(e),e[Z]|=128}function ND(n,e){let t=n[Qu],r=e[pt];if(or(r))n[Z]|=2;else{let i=r[pt][nn];e[nn]!==i&&(n[Z]|=2)}t===null?n[Qu]=[e]:t.push(e)}var aa=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[de];return cl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Et]}set context(e){this._lView[Et]=e}get destroyed(){return To(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(Mn(e)){let t=e[Ku],r=t?t.indexOf(this):-1;r>-1&&(Yp(e,r),Hu(t,r))}this._attachedToViewContainer=!1}vD(this._lView[de],this._lView)}onDestroy(e){fT(this._lView,e)}markForCheck(){Wg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){Op(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,DD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Yu(this._lView),t=this._lView[fo];t!==null&&!e&&qg(t,this._lView),yD(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=Yu(this._lView),r=this._lView[fo];r!==null&&!t&&ND(r,this._lView),Op(this._lView)}};var Pl=(()=>{class n{static __NG_ELEMENT_ID__=u1}return n})(),a1=Pl,c1=class extends a1{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Px(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new aa(i)}};function u1(){return RD(wt(),pe())}function RD(n,e){return n.type&4?new c1(e,n,Cl(n,e)):null}function Ml(n,e,t,r,i){let o=n.data[e];if(o===null)o=l1(n,e,t,r,i),qM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=BM();o.injectorIndex=s===null?-1:s.injectorIndex}return si(o,!0),o}function l1(n,e,t,r,i){let o=mT(),s=Tg(),a=s?o:o&&o.parent,u=n.data[e]=h1(n,a,t,e,r,i);return d1(n,u,o,s),u}function d1(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function h1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return LM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var n9=new RegExp(`^(\\d+)*(${xk}|${kk})*(.*)`);var f1=()=>null;function vw(n,e){return f1(n,e)}var p1=class{},PD=class{},Zp=class{resolveComponentFactory(e){throw Error(`No component factory found for ${It(e)}.`)}},kl=class{static NULL=new Zp},ul=class{},MD=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>g1()}return n})();function g1(){let n=pe(),e=wt(),t=sn(e.index,n);return(or(t)?t:n)[je]}var m1=(()=>{class n{static \u0275prov=De({token:n,providedIn:"root",factory:()=>null})}return n})();var Ip={},Jp=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=yl(r);let i=this.injector.get(e,Ip,r);return i!==Ip||t===Ip?i:this.parentInjector.get(e,t,r)}};function Xp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=KE(i,a);else if(o==2){let u=a,l=e[++s];r=KE(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Tt(n,e=ne.Default){let t=pe();if(t===null)return ft(n,e);let r=wt();return xT(r,t,ht(n),e)}function Gg(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,d=v1(s);d===null?a=s:[a,u,l]=d,E1(n,e,t,a,o,u,l)}o!==null&&r!==null&&y1(t,r,o)}function y1(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}function v1(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&rn(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,_1(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function _1(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function I1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function E1(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let m=r[g];!u&&rn(m)&&(u=!0,I1(n,t,g)),jp(tl(t,e),n,m.type)}S1(t,n.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let l=!1,d=!1,f=hD(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(t.mergedAttrs=mo(t.mergedAttrs,m.hostAttrs),T1(n,t,e,f,m),C1(f,m,i),s!==null&&s.has(m)){let[R,P]=s.get(m);t.directiveToIndex.set(m.type,[f,R+t.directiveStart,P+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let w=m.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}w1(n,t,o)}function w1(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))_w(0,e,i,r),_w(1,e,i,r),Ew(e,r,!1);else{let o=t.get(i);Iw(0,e,o,r),Iw(1,e,o,r),Ew(e,r,!0)}}}function _w(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),kD(e,o)}}function Iw(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),kD(e,s)}}function kD(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Ew(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Og(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let d of l)if(d===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let d=0;d<l.length;d+=2)if(l[d]===e){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function T1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Zr(i.type,!0)),s=new ri(o,rn(i),Tt);n.blueprint[r]=s,t[r]=s,D1(n,e,r,hD(n,t,i.hostVars,cn),i)}function D1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;b1(s)!=a&&s.push(a),s.push(t,r,o)}}function b1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function C1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;rn(e)&&(t[""]=n)}}function S1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function xD(n,e,t,r,i,o,s,a){let u=e.consts,l=go(u,s),d=Ml(e,n,2,r,l);return o&&Gg(e,t,d,go(u,a),i),d.mergedAttrs=mo(d.mergedAttrs,d.attrs),d.attrs!==null&&Xp(d,d.attrs,!1),d.mergedAttrs!==null&&Xp(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function OD(n,e){Ag(n,e),Ig(e)&&n.queries.elementEnd(e)}var ll=class extends kl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=uo(e);return new ca(t,this.ngModule)}};function A1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Sl.SignalBased)!==0};return i&&(o.transform=i),o})}function N1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function R1(n,e,t){let r=e instanceof tn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Jp(t,r):t}function P1(n){let e=n.get(ul,null);if(e===null)throw new re(407,!1);let t=n.get(m1,null),r=n.get(ii,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function M1(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return cD(e,t,t==="svg"?AM:t==="math"?NM:null)}var ca=class extends PD{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=A1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=N1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ox(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Ee(22);let o=se(null);try{let s=this.componentDef,a=r?["ng-version","19.2.14"]:sx(this.componentDef.selectors[0]),u=Fg(0,null,null,1,0,null,null,null,null,[a],null),l=R1(s,i||this.ngModule,e),d=P1(l),f=d.rendererFactory.createRenderer(null,s),g=r?mx(f,r,s.encapsulation,l):M1(s,f),m=Lg(null,u,null,512|dD(s),null,null,d,f,l,null,nD(g,l,!0));m[St]=g,bg(m);let w=null;try{let R=xD(St,u,m,"#host",()=>[this.componentDef],!0,0);g&&(lD(f,g,R),Do(g,m)),Al(u,m,R),xg(u,R,m),OD(u,R),t!==void 0&&k1(R,this.ngContentSelectors,t),w=sn(R.index,m),m[Et]=w[Et],$g(u,m,null)}catch(R){throw w!==null&&qp(w),qp(m),R}finally{Ee(23),Cg()}return new eg(this.componentType,m)}finally{se(o)}}},eg=class extends p1{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=uT(t[de],St),this.location=Cl(this._tNode,t),this.instance=sn(this._tNode.index,t)[Et],this.hostView=this.changeDetectorRef=new aa(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Ug(r,i[de],i,e,t);this.previousInputValues.set(e,t);let s=sn(r.index,i);Wg(s,1)}get injector(){return new Yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function k1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var xl=(()=>{class n{static __NG_ELEMENT_ID__=x1}return n})();function x1(){let n=wt();return F1(n,pe())}var O1=xl,FD=class extends O1{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Cl(this._hostTNode,this._hostLView)}get injector(){return new Yr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ng(this._hostTNode,this._hostLView);if(AT(e)){let t=Xu(e,this._hostLView),r=Ju(e),i=t[de].data[r+8];return new Yr(i,t)}else return new Yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=ww(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Lt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=vw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,mw(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!TM(e),a;if(s)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?e:new ca(uo(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(tn,null);R&&(o=R)}let d=uo(u.componentType??{}),f=vw(this._lContainer,d?.id??null),g=f?.firstChild??null,m=u.create(l,i,g,o);return this.insertImpl(m.hostView,a,mw(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(PM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[pt],l=new FD(u,u[zt],u[pt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return o1(s,i,o,r),e.attachToViewContainerRef(),Ww(Ep(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=ww(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Yp(this._lContainer,t);r&&(Hu(Ep(this._lContainer),t),vD(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=Yp(this._lContainer,t);return r&&Hu(Ep(this._lContainer),t)!=null?new aa(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ww(n){return n[Ku]}function Ep(n){return n[Ku]||(n[Ku]=[])}function F1(n,e){let t,r=e[n.index];return Mn(r)?t=r:(t=AD(r,e,null,n),e[n.index]=t,Vg(e,t)),V1(t,e,n,r),new FD(t,n,e)}function L1(n,e){let t=n[je],r=t.createComment(""),i=an(e,n),o=t.parentNode(i);return sl(t,o,r,t.nextSibling(i),!1),r}var V1=U1,j1=()=>!1;function B1(n,e,t){return j1(n,e,t)}function U1(n,e,t,r){if(n[ei])return;let i;t.type&8?i=on(r):i=L1(e,t),n[ei]=i}var vo=class{},$1=class{};var tg=class extends vo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ll(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Qw(e);this._bootstrapComponents=sD(o.bootstrap),this._r3Injector=LT(e,t,[{provide:vo,useValue:this},{provide:kl,useValue:this.componentFactoryResolver},...r],It(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ng=class extends $1{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new tg(this.moduleType,e,[])}};var dl=class extends vo{injector;componentFactoryResolver=new ll(this);instance=null;constructor(e){super();let t=new ra([...e.providers,{provide:vo,useValue:this},{provide:kl,useValue:this.componentFactoryResolver}],e.parent||vg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function H1(n,e,t=null){return new dl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var q1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Yw(!1,t.type),i=r.length>0?H1([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=De({token:n,providedIn:"environment",factory:()=>new n(ft(tn))})}return n})();function u9(n){return ha(()=>{let e=VD(n),t=Je(Ze({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(q1).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||sa.Emulated,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&eD("NgStandalone"),jD(t);let r=n.dependencies;return t.directiveDefs=Tw(r,!1),t.pipeDefs=Tw(r,!0),t.id=Q1(t),t})}function z1(n){return uo(n)||dM(n)}function W1(n){return n!==null}function Ol(n){return ha(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function G1(n,e){if(n==null)return Jr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Sl.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function K1(n){if(n==null)return Jr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Fl(n){return ha(()=>{let e=VD(n);return jD(e),e})}function LD(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function VD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Jr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:G1(n.inputs,e),outputs:K1(n.outputs),debugInfo:null}}function jD(n){n.features?.forEach(e=>e(n))}function Tw(n,e){if(!n)return null;let t=e?hM:z1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(W1)}function Q1(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Y1(n){return Object.getPrototypeOf(n.prototype).constructor}function Z1(n){let e=Y1(n.type),t=!0,r=[n];for(;e;){let i;if(rn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=wp(n.inputs),s.declaredInputs=wp(n.declaredInputs),s.outputs=wp(n.outputs);let a=i.hostBindings;a&&nO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&eO(n,u),l&&tO(n,l),J1(n,i),qP(n.outputs,i.outputs),rn(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Z1&&(t=!1)}}e=Object.getPrototypeOf(e)}X1(r)}function J1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function X1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=mo(i.hostAttrs,t=mo(t,i.hostAttrs))}}function wp(n){return n===Jr?{}:n===Ot?[]:n}function eO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function tO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function nO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function BD(n){return iO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function rO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function iO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Kg(n,e,t){return n[e]=t}function oO(n,e){return n[e]}function Nn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function UD(n,e,t,r){let i=Nn(n,e,t);return Nn(n,e+1,r)||i}function sO(n,e,t,r,i){let o=UD(n,e,t,r);return Nn(n,e+2,i)||o}function aO(n,e,t,r,i,o,s,a,u){let l=e.consts,d=Ml(e,n,4,s||null,a||null);wg()&&Gg(e,t,d,go(l,u),Bg),d.mergedAttrs=mo(d.mergedAttrs,d.attrs),Ag(e,d);let f=d.tView=Fg(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function cO(n,e,t,r,i,o,s,a,u,l){let d=t+St,f=e.firstCreatePass?aO(d,e,n,r,i,o,s,a,u):e.data[d];si(f,!1);let g=lO(e,n,f,t);wl()&&Nl(e,n,g,f),Do(g,n);let m=AD(g,n,g,f);return n[d]=m,Vg(n,m),B1(m,f,n),_l(f)&&Al(e,n,f),u!=null&&jg(n,f,l),f}function uO(n,e,t,r,i,o,s,a){let u=pe(),l=rt(),d=go(l.consts,o);return cO(u,l,n,e,t,r,i,d,s,a),uO}var lO=dO;function dO(n,e,t,r){return Tl(!0),e[je].createComment("")}var l9=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var hO=new ae("");var $D=(()=>{class n{static \u0275prov=De({token:n,providedIn:"root",factory:()=>new rg})}return n})(),rg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Qg(n){return!!n&&typeof n.then=="function"}function HD(n){return!!n&&typeof n.subscribe=="function"}var fO=new ae("");var qD=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=K(fO,{optional:!0})??[];injector=K(Vt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Io(this.injector,i);if(Qg(o))t.push(o);else if(HD(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pO=new ae("");function gO(){Bf(()=>{throw new re(600,!1)})}function mO(n){return n.isBoundToModule}var yO=10;var ua=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=K(Ek);afterRenderManager=K(Lk);zonelessEnabled=K(Rg);rootEffectScheduler=K($D);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Cn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=K(ma).hasPendingTasks.pipe(vt(t=>!t));constructor(){K(XT,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=K(tn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Vt.NULL){Ee(10);let o=t instanceof PD;if(!this._injector.get(qD).done){let m="";throw new re(405,m)}let a;o?a=t:a=this._injector.get(kl).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=mO(a)?void 0:this._injector.get(vo),l=r||a.selector,d=a.create(i,[],l,u),f=d.location.nativeElement,g=d.injector.get(hO,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Vu(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),Ee(11,d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(JT.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let t=se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(t),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ul,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<yO;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)vO(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Il(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Vu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(pO,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Vu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vO(n,e,t,r){if(!t&&!Il(n))return;DD(n,e,t&&!r?0:1)}function _O(n,e,t,r){let i=pe(),o=El();if(Nn(i,o,e)){let s=rt(),a=Sg();Dx(a,i,n,e,t,r)}return _O}function IO(n,e,t,r){return Nn(n,El(),t)?e+co(t)+r:cn}function EO(n,e,t,r,i,o){let s=$M(),a=UD(n,s,t,i);return _T(2),a?e+co(t)+r+co(i)+o:cn}function xu(n,e){return n<<17|e<<2}function oi(n){return n>>17&32767}function wO(n){return(n&2)==2}function TO(n,e){return n&131071|e<<17}function ig(n){return n|2}function _o(n){return(n&131068)>>2}function Tp(n,e){return n&-131069|e<<2}function DO(n){return(n&1)===1}function og(n){return n|1}function bO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=oi(s),u=_o(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||fa(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=oi(n[a+1]);n[r+1]=xu(g,a),g!==0&&(n[g+1]=Tp(n[g+1],r)),n[a+1]=TO(n[a+1],r)}else n[r+1]=xu(a,0),a!==0&&(n[a+1]=Tp(n[a+1],r)),a=r;else n[r+1]=xu(u,0),a===0?a=r:n[u+1]=Tp(n[u+1],r),u=r;l&&(n[r+1]=ig(n[r+1])),Dw(n,d,r,!0),Dw(n,d,r,!1),CO(e,d,n,r,o),s=xu(a,u),o?e.classBindings=s:e.styleBindings=s}function CO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&fa(o,e)>=0&&(t[r+1]=og(t[r+1]))}function Dw(n,e,t,r){let i=n[t+1],o=e===null,s=r?oi(i):_o(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];SO(u,e)&&(a=!0,n[s+1]=r?og(l):ig(l)),s=r?oi(l):_o(l)}a&&(n[t+1]=r?ig(i):og(i))}function SO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?fa(n,e)>=0:!1}function AO(n,e,t){let r=pe(),i=El();if(Nn(r,i,e)){let o=rt(),s=Sg();gD(o,s,r,n,e,r[je],t,!1)}return AO}function bw(n,e,t,r,i){Ug(e,n,t,i?"class":"style",r)}function NO(n,e,t){return zD(n,e,t,!1),NO}function RO(n,e){return zD(n,e,null,!0),RO}function zD(n,e,t,r){let i=pe(),o=rt(),s=_T(2);if(o.firstUpdatePass&&MO(o,n,s,r),e!==cn&&Nn(i,s,e)){let a=o.data[ai()];LO(o,a,i,i[je],n,i[s+1]=VO(e,t),r,s)}}function PO(n,e){return e>=n.expandoStartIndex}function MO(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ai()],s=PO(n,t);jO(o,r)&&e===null&&!s&&(e=!1),e=kO(i,o,e,r),bO(i,o,e,t,s,r)}}function kO(n,e,t,r){let i=GM(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Dp(null,n,e,t,r),t=la(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Dp(i,n,e,t,r),o===null){let u=xO(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Dp(null,n,e,u[1],r),u=la(u,e.attrs,r),OO(n,e,r,u))}else o=FO(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function xO(n,e,t){let r=t?e.classBindings:e.styleBindings;if(_o(r)!==0)return n[oi(r)]}function OO(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[oi(i)]=r}function FO(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=la(r,s,t)}return la(r,e.attrs,t)}function Dp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=la(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function la(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),uM(n,s,t?!0:e[++o]))}return n===void 0?null:n}function LO(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=DO(l)?Cw(u,e,t,i,_o(l),s):void 0;if(!hl(d)){hl(o)||wO(l)&&(o=Cw(u,null,t,i,a,s));let f=cT(ai(),t);zx(r,s,f,i,o)}}function Cw(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=t[i+1];g===cn&&(g=f?Ot:void 0);let m=f?fp(g,r):d===r?g:void 0;if(l&&!hl(m)&&(m=fp(u,r)),hl(m)&&(a=m,s))return a;let w=n[i+1];i=s?oi(w):_o(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=fp(u,r))}return a}function hl(n){return n!==void 0}function VO(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=It(iD(n)))),n}function jO(n,e){return(n.flags&(e?8:16))!==0}function WD(n,e,t,r){let i=pe(),o=rt(),s=St+n,a=i[je],u=o.firstCreatePass?xD(s,o,i,e,Bg,wg(),t,r):o.data[s],l=UO(o,i,u,a,e,n);i[s]=l;let d=_l(u);return si(u,!0),lD(a,l,u),!mD(u)&&wl()&&Nl(o,i,l,u),(xM()===0||d)&&Do(l,i),OM(),d&&(Al(o,i,u),xg(o,u,i)),r!==null&&jg(i,u),WD}function GD(){let n=wt();Tg()?yT():(n=n.parent,si(n,!1));let e=n;VM(e)&&jM(),FM();let t=rt();return t.firstCreatePass&&OD(t,e),e.classesWithoutHost!=null&&XM(e)&&bw(t,e,pe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ek(e)&&bw(t,e,pe(),e.stylesWithoutHost,!1),GD}function BO(n,e,t,r){return WD(n,e,t,r),GD(),BO}var UO=(n,e,t,r,i,o)=>(Tl(!0),cD(r,i,YM()));function $O(n,e,t,r,i){let o=e.consts,s=go(o,r),a=Ml(e,n,8,"ng-container",s);s!==null&&Xp(a,s,!0);let u=go(o,i);return wg()&&Gg(e,t,a,u,Bg),a.mergedAttrs=mo(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function HO(n,e,t){let r=pe(),i=rt(),o=n+St,s=i.firstCreatePass?$O(o,i,r,e,t):i.data[o];si(s,!0);let a=zO(i,r,s,n);return r[o]=a,wl()&&Nl(i,r,a,s),Do(a,r),_l(s)&&(Al(i,r,s),xg(i,s,r)),t!=null&&jg(r,s),HO}function qO(){let n=wt(),e=rt();return Tg()?yT():(n=n.parent,si(n,!1)),e.firstCreatePass&&(Ag(e,n),Ig(n)&&e.queries.elementEnd(n)),qO}var zO=(n,e,t,r)=>(Tl(!0),ux(e[je],""));function d9(){return pe()}var Kr=void 0;function WO(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var GO=["en",[["a","p"],["AM","PM"],Kr],[["AM","PM"],Kr,Kr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kr,"{1} 'at' {0}",Kr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",WO],bp={};function Ll(n){let e=KO(n),t=Sw(e);if(t)return t;let r=e.split("-")[0];if(t=Sw(r),t)return t;if(r==="en")return GO;throw new re(701,!1)}function Sw(n){return n in bp||(bp[n]=ku.ng&&ku.ng.common&&ku.ng.common.locales&&ku.ng.common.locales[n]),bp[n]}var ci=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ci||{});function KO(n){return n.toLowerCase().replace(/_/g,"-")}var fl="en-US",QO="USD";var YO=fl;function ZO(n){typeof n=="string"&&(YO=n.toLowerCase().replace(/_/g,"-"))}function Aw(n,e,t){return function r(i){if(i===Function)return t;let o=wo(n)?sn(n.index,e):e;Wg(o,5);let s=e[Et],a=Nw(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=Nw(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function Nw(n,e,t,r){let i=se(null);try{return Ee(6,e,t),t(r)!==!1}catch(o){return JO(n,o),!1}finally{Ee(7,e,t),se(i)}}function JO(n,e){let t=n[ho],r=t?t.get(yo,null):null;r&&r.handleError(e)}function Rw(n,e,t,r,i,o){let s=e[t],a=e[de],l=a.data[t].outputs[r],d=s[l],f=a.firstCreatePass?gT(a):null,g=pT(e),m=d.subscribe(o),w=g.length;g.push(o,m),f&&f.push(i,n.index,w,-(w+1))}function XO(n,e,t,r){let i=pe(),o=rt(),s=wt();return KD(o,i,i[je],s,n,e,r),XO}function eF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Gu],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function KD(n,e,t,r,i,o,s){let a=_l(r),l=n.firstCreatePass?gT(n):null,d=pT(e),f=!0;if(r.type&3||s){let g=an(r,e),m=s?s(g):g,w=d.length,R=s?O=>s(on(O[r.index])):r.index,P=null;if(!s&&a&&(P=eF(n,e,i,r.index)),P!==null){let O=P.__ngLastListenerFn__||P;O.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,f=!1}else{o=Aw(r,e,o),jk(e,m,i,o);let O=t.listen(m,i,o);d.push(o,O),l&&l.push(i,R,w,w+1)}}else o=Aw(r,e,o);if(f){let g=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let w=0;w<m.length;w+=2){let R=m[w],P=m[w+1];Rw(r,e,R,P,i,o)}if(g&&g.length)for(let w of g)Rw(r,e,w,i,i,o)}}function h9(n=1){return QM(n)}function f9(n){let e=UM();return lT(e,St+n)}function p9(n,e=""){let t=pe(),r=rt(),i=n+St,o=r.firstCreatePass?Ml(r,i,1,e,null):r.data[i],s=tF(r,t,o,e,n);t[i]=s,wl()&&Nl(r,t,s,o),si(o,!1)}var tF=(n,e,t,r,i)=>(Tl(!0),ax(e[je],r));function nF(n){return QD("",n,""),nF}function QD(n,e,t){let r=pe(),i=IO(r,n,e,t);return i!==cn&&YD(r,ai(),i),QD}function rF(n,e,t,r,i){let o=pe(),s=EO(o,n,e,t,r,i);return s!==cn&&YD(o,ai(),s),rF}function YD(n,e,t){let r=cT(e,n);cx(n[je],r,t)}function iF(n,e,t){HT(e)&&(e=e());let r=pe(),i=El();if(Nn(r,i,e)){let o=rt(),s=Sg();gD(o,s,r,n,e,r[je],t,!1)}return iF}function g9(n,e){let t=HT(n);return t&&n.set(e),t}function oF(n,e){let t=pe(),r=rt(),i=wt();return KD(r,t,t[je],i,n,e),oF}function sF(n,e,t){let r=rt();if(r.firstCreatePass){let i=rn(n);sg(t,r.data,r.blueprint,i,!0),sg(e,r.data,r.blueprint,i,!1)}}function sg(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)sg(n[o],e,t,r,i);else{let o=rt(),s=pe(),a=wt(),u=lo(n)?n:ht(n.provide),l=eT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(lo(n)||!n.multi){let m=new ri(l,i,Tt),w=Sp(u,e,i?d:d+g,f);w===-1?(jp(tl(a,s),o,u),Cp(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[w]=m,s[w]=m)}else{let m=Sp(u,e,d+g,f),w=Sp(u,e,d,d+g),R=m>=0&&t[m],P=w>=0&&t[w];if(i&&!P||!i&&!R){jp(tl(a,s),o,u);let O=uF(i?cF:aF,t.length,i,r,l);!i&&P&&(t[w].providerFactory=O),Cp(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),s.push(O)}else{let O=ZD(t[i?w:m],l,!i&&r);Cp(o,n,m>-1?m:w,O)}!i&&r&&P&&t[w].componentProviders++}}}function Cp(n,e,t,r){let i=lo(e),o=yM(e);if(i||o){let u=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function ZD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Sp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function aF(n,e,t,r,i){return ag(this.multi,[])}function cF(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=nl(r,r[de],this.providerFactory.index,i);s=u.slice(0,a),ag(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],ag(o,s);return s}function ag(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function uF(n,e,t,r,i){let o=new ri(n,t,Tt);return o.multi=[],o.index=e,o.componentProviders=0,ZD(o,i,r&&!t),o}function m9(n,e=[]){return t=>{t.providersResolver=(r,i)=>sF(r,i?i(n):n,e)}}function y9(n,e,t){let r=Dg()+n,i=pe();return i[r]===cn?Kg(i,r,t?e.call(t):e()):oO(i,r)}function v9(n,e,t,r){return lF(pe(),Dg(),n,e,t,r)}function JD(n,e){let t=n[e];return t===cn?void 0:t}function lF(n,e,t,r,i,o){let s=e+t;return Nn(n,s,i)?Kg(n,s+1,o?r.call(o,i):r(i)):JD(n,s+1)}function dF(n,e,t,r,i,o,s,a){let u=e+t;return sO(n,u,i,o,s)?Kg(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):JD(n,u+3)}function _9(n,e){let t=rt(),r,i=n+St;t.firstCreatePass?(r=hF(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Zr(r.type,!0)),s,a=_t(Tt);try{let u=el(!1),l=o();return el(u),RM(t,pe(),i,l),l}finally{_t(a)}}function hF(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function I9(n,e,t,r,i){let o=n+St,s=pe(),a=lT(s,o);return fF(s,o)?dF(s,Dg(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function fF(n,e){return n[de].data[e].pure}function E9(n,e){return RD(n,e)}var da=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},XD=new da("19.2.14"),cg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},w9=(()=>{class n{compileModuleSync(t){return new ng(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Qw(t),o=sD(i.declarations).reduce((s,a)=>{let u=uo(a);return u&&s.push(new ca(u)),s},[]);return new cg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pF=(()=>{class n{zone=K(Ve);changeDetectionScheduler=K(ii);applicationRef=K(ua);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gF=new ae("",{factory:()=>!1});function eb({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ve(Je(Ze({},tb()),{scheduleInRootZone:t})),[{provide:Ve,useFactory:n},{provide:qu,multi:!0,useFactory:()=>{let r=K(pF,{optional:!0});return()=>r.initialize()}},{provide:qu,multi:!0,useFactory:()=>{let r=K(mF);return()=>{r.initialize()}}},e===!0?{provide:jT,useValue:!0}:[],{provide:BT,useValue:t??VT}]}function T9(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=eb({ngZoneFactory:()=>{let i=tb(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&eD("NgZone_CoalesceEvent"),new Ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return pa([{provide:gF,useValue:!0},{provide:Rg,useValue:!1},r])}function tb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var mF=(()=>{class n{subscription=new Le;initialized=!1;zone=K(Ve);pendingTasks=K(ma);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yF=(()=>{class n{appRef=K(ua);taskService=K(ma);ngZone=K(Ve);zonelessEnabled=K(Rg);tracing=K(XT,{optional:!0});disableScheduling=K(jT,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Le;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(il):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(K(BT,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Hp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?cw:UT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(il+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vF(){return typeof $localize<"u"&&$localize.locale||fl}var Vl=new ae("",{providedIn:"root",factory:()=>K(Vl,ne.Optional|ne.SkipSelf)||vF()}),nb=new ae("",{providedIn:"root",factory:()=>QO});var ug=new ae(""),_F=new ae("");function Xs(n){return!n.moduleRef}function IF(n){let e=Xs(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ve);return t.run(()=>{Xs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(yo,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Xs(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ug);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ug);s.add(o),n.moduleRef.onDestroy(()=>{Vu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return wF(r,t,()=>{let o=e.get(qD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Vl,fl);if(ZO(s||fl),!e.get(_F,!0))return Xs(n)?e.get(ua):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Xs(n)){let u=e.get(ua);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return EF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function EF(n,e){let t=n.injector.get(ua);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new re(-403,!1);e.push(n)}function wF(n,e,t){try{let r=t();return Qg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ju=null;function TF(n=[],e){return Vt.create({name:e,providers:[{provide:Xw,useValue:"platform"},{provide:ug,useValue:new Set([()=>ju=null])},...n]})}function DF(n=[]){if(ju)return ju;let e=TF(n);return ju=e,gO(),bF(e),e}function bF(n){let e=n.get(Mk,null);Io(n,()=>{e?.forEach(t=>t())})}function Yg(){return!1}var CF=(()=>{class n{static __NG_ELEMENT_ID__=SF}return n})();function SF(n){return AF(wt(),pe(),(n&16)===16)}function AF(n,e,t){if(wo(n)&&!t){let r=sn(n.index,e);return new aa(r,r)}else if(n.type&175){let r=e[nn];return new aa(r,e)}return null}var lg=class{constructor(){}supports(e){return BD(e)}create(e){return new dg(e)}},NF=(n,e)=>e,dg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||NF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Pw(r,i,o)?t:r,a=Pw(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let m=g<o.length?o[g]:o[g]=0,w=m+g;d<=w&&w<l&&(o[g]=m+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!BD(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,rO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new hg(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new pl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},hg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},fg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},pl=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new fg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Pw(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Mw(){return new Zg([new lg])}var Zg=(()=>{class n{factories;static \u0275prov=De({token:n,providedIn:"root",factory:Mw});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Mw()),deps:[[n,new aM,new Rn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new re(901,!1)}}return n})();function D9(n){Ee(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=DF(r),o=[eb({}),{provide:ii,useExisting:yF},...t||[]],s=new dl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return IF({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ee(9)}}function b9(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function rb(n){return Hf(n)}function RF(n,e){return jf(n,e?.equal)}var pg=class{[kt];constructor(e){this[kt]=e}destroy(){this[kt].destroy()}};function ib(n,e){!e?.injector&&_g(ib);let t=e?.injector??K(Vt),r=e?.manualCleanup!==!0?t.get(Dl):null,i,o=t.get(tD,null,{optional:!0}),s=t.get(ii);return o!==null&&!e?.forceRoot?(i=kF(o.view,s,n),r instanceof rl&&r._lView===o.view&&(r=null)):i=xF(n,t.get($D),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new pg(i)}var ob=Je(Ze({},Yi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:oa,run(){if(this.dirty=!1,this.hasRun&&!Xc(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=zs(this),t=Zu(!1);try{this.maybeCleanup(),this.fn(n)}finally{Zu(t),Jc(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),PF=Je(Ze({},ob),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Ws(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),MF=Je(Ze({},ob),{consumerMarkedDirty(){this.view[Z]|=8192,ga(this.view),this.notifier.notify(13)},destroy(){Ws(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Xr]?.delete(this)}});function kF(n,e,t){let r=Object.create(MF);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Xr]??=new Set,n[Xr].add(r),r.consumerMarkedDirty(r),r}function xF(n,e,t){let r=Object.create(PF);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var sb=()=>{};var ub=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},OF=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Bl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,m=l&63;u||(m=64,s||(g=64)),r.push(t[d],t[f],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ub(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):OF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||f==null)throw new Xg;let g=o<<2|a>>4;if(r.push(g),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let w=l<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Xg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},FF=function(n){let e=ub(n);return Bl.encodeByteArray(e,!0)},va=function(n){return FF(n).replace(/\./g,"")},Ul=function(n){try{return Bl.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $l(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var LF=()=>$l().__FIREBASE_DEFAULTS__,VF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ul(n[1]);return e&&JSON.parse(e)},Hl=()=>{try{return sb()||LF()||VF()||jF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lb=n=>{var e,t;return(t=(e=Hl())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},db=n=>{let e=lb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},tm=()=>{var n;return(n=Hl())===null||n===void 0?void 0:n.config},hb=n=>{var e;return(e=Hl())===null||e===void 0?void 0:e[`_${n}`]};var ui=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function sr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function ql(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function fb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[va(JSON.stringify(t)),va(JSON.stringify(s)),""].join(".")}var ya={};function BF(){let n={prod:[],emulator:[]};for(let e of Object.keys(ya))ya[e]?n.emulator.push(e):n.prod.push(e);return n}function UF(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var ab=!1;function nm(n,e){if(typeof window>"u"||typeof document>"u"||!sr(window.location.host)||ya[n]===e||ya[n]||ab)return;ya[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=BF().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{ab=!0,s()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){let g=UF(r),m=t("text"),w=document.getElementById(m)||document.createElement("span"),R=t("learnmore"),P=document.getElementById(R)||document.createElement("a"),O=t("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let U=g.element;a(U),d(P,R);let W=l();u(B,O),U.append(B,w,P,W),document.body.appendChild(U)}o?(w.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function gb(){var n;let e=(n=Hl())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rm(){return!gb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function im(){return!gb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function bo(){try{return typeof indexedDB=="object"}catch{return!1}}function _b(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var $F="FirebaseError",jt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$F,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}},Wt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?HF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new jt(i,a,r)}};function HF(n,e){return n.replace(qF,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var qF=/\{\$([^}]+)}/g;function Gt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(cb(o)&&cb(s)){if(!Gt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function cb(n){return n!==null&&typeof n=="object"}function om(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ib(n,e){let t=new em(n,e);return t.subscribe.bind(t)}var em=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zF(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Jg),i.error===void 0&&(i.error=Jg),i.complete===void 0&&(i.complete=Jg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zF(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jg(){}var N9=4*60*60*1e3;function we(n){return n&&n._delegate?n._delegate:n}var gt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var li="[DEFAULT]";var sm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ui;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GF(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WF(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function WF(n){return n===li?void 0:n}function GF(n){return n.instantiationMode==="EAGER"}var zl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new sm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var KF=[],ie=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ie||{}),QF={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},YF=ie.INFO,ZF={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},JF=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=ZF[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},un=class{constructor(e){this.name=e,this._logLevel=YF,this._logHandler=JF,this._userLogHandler=null,KF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}};var XF=(n,e)=>e.some(t=>n instanceof t),Eb,wb;function eL(){return Eb||(Eb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tL(){return wb||(wb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Tb=new WeakMap,cm=new WeakMap,Db=new WeakMap,am=new WeakMap,lm=new WeakMap;function nL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ln(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Tb.set(t,n)}).catch(()=>{}),lm.set(e,n),e}function rL(n){if(cm.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});cm.set(n,e)}var um={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Db.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ln(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bb(n){um=n(um)}function iL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Wl(this),e,...t);return Db.set(r,e.sort?e.sort():[e]),ln(r)}:tL().includes(n)?function(...e){return n.apply(Wl(this),e),ln(Tb.get(this))}:function(...e){return ln(n.apply(Wl(this),e))}}function oL(n){return typeof n=="function"?iL(n):(n instanceof IDBTransaction&&rL(n),XF(n,eL())?new Proxy(n,um):n)}function ln(n){if(n instanceof IDBRequest)return nL(n);if(am.has(n))return am.get(n);let e=oL(n);return e!==n&&(am.set(n,e),lm.set(e,n)),e}var Wl=n=>lm.get(n);function Sb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=ln(s);return r&&s.addEventListener("upgradeneeded",u=>{r(ln(s.result),u.oldVersion,u.newVersion,ln(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var sL=["get","getKey","getAll","getAllKeys","count"],aL=["put","add","delete","clear"],dm=new Map;function Cb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=aL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sL.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return dm.set(e,o),o}bb(n=>Je(Ze({},n),{get:(e,t,r)=>Cb(e,t)||n.get(e,t,r),has:(e,t)=>!!Cb(e,t)||n.has(e,t)}));var fm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function cL(n){let e=n.getComponent();return e?.type==="VERSION"}var pm="@firebase/app",Ab="0.13.2";var kn=new un("@firebase/app"),uL="@firebase/app-compat",lL="@firebase/analytics-compat",dL="@firebase/analytics",hL="@firebase/app-check-compat",fL="@firebase/app-check",pL="@firebase/auth",gL="@firebase/auth-compat",mL="@firebase/database",yL="@firebase/data-connect",vL="@firebase/database-compat",_L="@firebase/functions",IL="@firebase/functions-compat",EL="@firebase/installations",wL="@firebase/installations-compat",TL="@firebase/messaging",DL="@firebase/messaging-compat",bL="@firebase/performance",CL="@firebase/performance-compat",SL="@firebase/remote-config",AL="@firebase/remote-config-compat",NL="@firebase/storage",RL="@firebase/storage-compat",PL="@firebase/firestore",ML="@firebase/ai",kL="@firebase/firestore-compat",xL="firebase",OL="11.10.0";var Gl="[DEFAULT]",FL={[pm]:"fire-core",[uL]:"fire-core-compat",[dL]:"fire-analytics",[lL]:"fire-analytics-compat",[fL]:"fire-app-check",[hL]:"fire-app-check-compat",[pL]:"fire-auth",[gL]:"fire-auth-compat",[mL]:"fire-rtdb",[yL]:"fire-data-connect",[vL]:"fire-rtdb-compat",[_L]:"fire-fn",[IL]:"fire-fn-compat",[EL]:"fire-iid",[wL]:"fire-iid-compat",[TL]:"fire-fcm",[DL]:"fire-fcm-compat",[bL]:"fire-perf",[CL]:"fire-perf-compat",[SL]:"fire-rc",[AL]:"fire-rc-compat",[NL]:"fire-gcs",[RL]:"fire-gcs-compat",[PL]:"fire-fst",[kL]:"fire-fst-compat",[ML]:"fire-vertex","fire-js":"fire-js",[xL]:"fire-js-all"};var _a=new Map,LL=new Map,gm=new Map;function Nb(n,e){try{n.container.addComponent(e)}catch(t){kn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kt(n){let e=n.name;if(gm.has(e))return kn.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,n);for(let t of _a.values())Nb(t,n);for(let t of LL.values())Nb(t,n);return!0}function Co(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function kb(n,e,t=Gl){Co(n,e).clearInstance(t)}function xn(n){return n==null?!1:n.settings!==void 0}var VL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Wt("app","Firebase",VL);var mm=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}};var So=OL;function _m(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Gl,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ar.create("bad-app-name",{appName:String(i)});if(t||(t=tm()),!t)throw ar.create("no-options");let o=_a.get(i);if(o){if(Gt(t,o.options)&&Gt(r,o.config))return o;throw ar.create("duplicate-app",{appName:i})}let s=new zl(i);for(let u of gm.values())s.addComponent(u);let a=new mm(t,r,s);return _a.set(i,a),a}function di(n=Gl){let e=_a.get(n);if(!e&&n===Gl&&tm())return _m();if(!e)throw ar.create("no-app",{appName:n});return e}function Kl(){return Array.from(_a.values())}function Me(n,e,t){var r;let i=(r=FL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kn.warn(a.join(" "));return}Kt(new gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var jL="firebase-heartbeat-database",BL=1,Ia="firebase-heartbeat-store",hm=null;function xb(){return hm||(hm=Sb(jL,BL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ia)}catch(t){console.warn(t)}}}}).catch(n=>{throw ar.create("idb-open",{originalErrorMessage:n.message})})),hm}function UL(n){return _(this,null,function*(){try{let t=(yield xb()).transaction(Ia),r=yield t.objectStore(Ia).get(Ob(n));return yield t.done,r}catch(e){if(e instanceof jt)kn.warn(e.message);else{let t=ar.create("idb-get",{originalErrorMessage:e?.message});kn.warn(t.message)}}})}function Rb(n,e){return _(this,null,function*(){try{let r=(yield xb()).transaction(Ia,"readwrite");yield r.objectStore(Ia).put(e,Ob(n)),yield r.done}catch(t){if(t instanceof jt)kn.warn(t.message);else{let r=ar.create("idb-set",{originalErrorMessage:t?.message});kn.warn(r.message)}}})}function Ob(n){return`${n.name}!${n.options.appId}`}var $L=1024,HL=30,ym=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new vm(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Pb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>HL){let s=zL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){kn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Pb(),{heartbeatsToSend:r,unsentEntries:i}=qL(this._heartbeatsCache.heartbeats),o=va(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return kn.warn(t),""}})}};function Pb(){return new Date().toISOString().substring(0,10)}function qL(n,e=$L){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Mb(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Mb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var vm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return bo()?_b().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield UL(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Rb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Rb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Mb(n){return va(JSON.stringify({version:2,heartbeats:n})).length}function zL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function WL(n){Kt(new gt("platform-logger",e=>new fm(e),"PRIVATE")),Kt(new gt("heartbeat",e=>new ym(e),"PRIVATE")),Me(pm,Ab,n),Me(pm,Ab,"esm2017"),Me("fire-js","")}WL("");var GL="firebase",KL="11.10.0";Me(GL,KL,"app");function Im(n){n===void 0&&(_g(Im),n=K(Vt));let e=n.get(bl);return t=>new X(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var cr=new da("ANGULARFIRE2_VERSION");function Yl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var fi=(n,e)=>{let t=e?[e]:Kl(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ao=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Ao||{}),Fb=Yg()&&typeof Zone<"u"?Ao.WARN:Ao.SILENT;var Ql=class{zone;delegate;constructor(e,t=rp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},pi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=K(Ve);this.outsideAngular=t.runOutsideAngular(()=>new Ql(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Ql(typeof Zone>"u"?void 0:Zone.current,du))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lb=!1;function QL(n,e){!Lb&&(Fb>Ao.SILENT||Yg())&&(Lb=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Fb>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function YL(n){let e=K(Ve,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function hi(n){let e=K(Ve,{optional:!0});return e?e.run(()=>n()):n()}var ZL=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Io(t,()=>hi(()=>n.apply(void 0,r)))),j=(n,e,t)=>(t||=e?Ao.WARN:Ao.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=K(pi),s=K(bl),a=K(tn)}catch{return QL(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=hi(()=>s.add())),i[l]=ZL(i[l],r,a));let u=YL(()=>n.apply(this,i));return e?u instanceof X?u.pipe(tr(o.outsideAngular),er(o.insideAngular),Im(a)):u instanceof Promise?hi(()=>{let l=s.add();return new Promise((d,f)=>{u.then(g=>Io(a,()=>hi(()=>d(g))),g=>Io(a,()=>hi(()=>f(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:hi(()=>u):u instanceof X?u.pipe(tr(o.outsideAngular),er(o.insideAngular)):hi(()=>u)});var gi=class{constructor(e){return e}},Ea=class{constructor(){return Kl()}};function JL(n){return n&&n.length===1?n[0]:new gi(di())}var Em=new ae("angularfire2._apps"),XL={provide:gi,useFactory:JL,deps:[[new Rn,Em]]},eV={provide:Ea,deps:[[new Rn,Em]]};function tV(n){return(e,t)=>{let r=t.get(YT);Me("angularfire",cr.full,"core"),Me("angularfire",cr.full,"app"),Me("angular",XD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new gi(i)}}function C8(n,...e){return pa([XL,eV,{provide:Em,useFactory:tV(n),multi:!0,deps:[Ve,Vt,pi,...e]}])}var S8=j(di,!0);var A8=j(_m,!0);var Zl=new ae("");var Bb=null;function Jl(){return Bb}function nV(n){Bb??=n}var wm=class{},Tm=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:()=>K(Ub),providedIn:"platform"})}return n})();var Ub=(()=>{class n extends Tm{_location;_history;_doc=K(Zl);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jl().getBaseHref(this._doc)}onPopState(t){let r=Jl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Jl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function $b(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Vb(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ur(n){return n&&n[0]!=="?"?`?${n}`:n}var Xl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:()=>K(qb),providedIn:"root"})}return n})(),Hb=new ae(""),qb=(()=>{class n extends Xl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??K(Zl).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $b(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ur(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ur(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ur(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ft(Tm),ft(Hb,8))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zb=(()=>{class n{_subject=new Cn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=oV(Vb(jb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ur(r))}normalize(t){return n.stripTrailingSlash(iV(this._basePath,jb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ur(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ur(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ur;static joinWithSlash=$b;static stripTrailingSlash=Vb;static \u0275fac=function(r){return new(r||n)(ft(Xl))};static \u0275prov=De({token:n,factory:()=>rV(),providedIn:"root"})}return n})();function rV(){return new zb(ft(Xl))}function iV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function jb(n){return n.replace(/\/index.html$/,"")}function oV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Zb={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Sm=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Sm||{});var dn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function No(n,e){let t=Ll(n),r=t[ci.NumberSymbols][e];if(typeof r>"u"){if(e===dn.CurrencyDecimal)return t[ci.NumberSymbols][dn.Decimal];if(e===dn.CurrencyGroup)return t[ci.NumberSymbols][dn.Group]}return r}function Jb(n,e){return Ll(n)[ci.NumberFormats][e]}function sV(n){return Ll(n)[ci.Currencies]}function Xb(n,e,t="en"){let r=sV(t)[n]||Zb[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var aV=2;function eC(n){let e,t=Zb[n];return t&&(e=t[2]),typeof e=="number"?e:aV}var cV=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Wb=22,ed=".",wa="0",uV=";",lV=",",Dm="#",Gb="\xA4";function dV(n,e,t,r,i,o,s=!1){let a="",u=!1;if(!isFinite(n))a=No(t,dn.Infinity);else{let l=pV(n);s&&(l=fV(l));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(o){let B=o.match(cV);if(B===null)throw new Error(`${o} is not a valid digit info`);let U=B[1],W=B[3],le=B[5];U!=null&&(d=bm(U)),W!=null&&(f=bm(W)),le!=null?g=bm(le):W!=null&&f>g&&(g=f)}gV(l,f,g);let m=l.digits,w=l.integerLen,R=l.exponent,P=[];for(u=m.every(B=>!B);w<d;w++)m.unshift(0);for(;w<0;w++)m.unshift(0);w>0?P=m.splice(w,m.length):(P=m,m=[0]);let O=[];for(m.length>=e.lgSize&&O.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)O.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&O.unshift(m.join("")),a=O.join(No(t,r)),P.length&&(a+=No(t,i)+P.join("")),R&&(a+=No(t,dn.Exponential)+"+"+R)}return n<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function tC(n,e,t,r,i){let o=Jb(e,Sm.Currency),s=hV(o,No(e,dn.MinusSign));return s.minFrac=eC(r),s.maxFrac=s.minFrac,dV(n,s,e,dn.CurrencyGroup,dn.CurrencyDecimal,i).replace(Gb,t).replace(Gb,"").trim()}function hV(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(uV),i=r[0],o=r[1],s=i.indexOf(ed)!==-1?i.split(ed):[i.substring(0,i.lastIndexOf(wa)+1),i.substring(i.lastIndexOf(wa)+1)],a=s[0],u=s[1]||"";t.posPre=a.substring(0,a.indexOf(Dm));for(let d=0;d<u.length;d++){let f=u.charAt(d);f===wa?t.minFrac=t.maxFrac=d+1:f===Dm?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(lV);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(Dm);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function fV(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function pV(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(ed))>-1&&(e=e.replace(ed,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===wa;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===wa;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>Wb&&(r=r.splice(0,Wb-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function gV(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,g,m,w){return g=g+f,w[m]=g<10?g:g-10,u&&(w[m]===0&&m>=l?w.pop():u=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function bm(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Cm=/\s+/,Kb=[],mV=(()=>{class n{_ngEl;_renderer;initialClasses=Kb;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Cm):Kb}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Cm):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Cm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Tt(kg),Tt(MD))};static \u0275dir=Fl({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var td=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},nC=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new td(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Qb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Qb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Tt(xl),Tt(Pl),Tt(Zg))};static \u0275dir=Fl({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Qb(n,e){n.context.$implicit=e.item}var yV=(()=>{class n{_viewContainer;_context=new nd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Yb(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Yb(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Tt(xl),Tt(Pl))};static \u0275dir=Fl({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),nd=class{$implicit=null;ngIf=null};function Yb(n,e){if(n&&!n.createEmbeddedView)throw new re(2020,!1)}function vV(n,e){return new re(2100,!1)}var _V=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!IV(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=Xb(a,i==="symbol"?"wide":"narrow",s):a=i);try{let u=EV(t);return tC(u,s,a,r,o)}catch(u){throw vV(n,u.message)}}static \u0275fac=function(r){return new(r||n)(Tt(Vl,16),Tt(nb,16))};static \u0275pipe=LD({name:"currency",type:n,pure:!0})}return n})();function IV(n){return!(n==null||n===""||n!==n)}function EV(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var wV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ol({type:n});static \u0275inj=gl({})}return n})();function TV(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var DV="browser",rC="server";function bV(n){return n===rC}var Am=class{};var CV=new Map,SV={activated:!1,tokenObservers:[]},AV={initialized:!1,enabled:!1};function Qt(n){return CV.get(n)||Object.assign({},SV)}function aC(){return AV}var NV="https://content-firebaseappcheck.googleapis.com/v1";var RV="exchangeDebugToken",iC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},fW=24*60*60*1e3;var Pm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new ui,this.pending.promise.catch(t=>{}),yield PV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ui,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function PV(n){return new Promise(e=>{setTimeout(e,n)})}var MV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},lr=new Wt("appCheck","AppCheck",MV);function cC(n){if(!Qt(n).activated)throw lr.create("use-before-activation",{appName:n.name})}function uC(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(m){throw lr.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw lr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(m){throw lr.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw lr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function lC(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${NV}/projects/${t}/apps/${r}:${RV}?key=${i}`,body:{debug_token:e}}}var kV="firebase-app-check-database",xV=1,Mm="firebase-app-check-store";var rd=null;function OV(){return rd||(rd=new Promise((n,e)=>{try{let t=indexedDB.open(kV,xV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(lr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Mm,{keyPath:"compositeKey"})}}}catch(t){e(lr.create("storage-open",{originalErrorMessage:t?.message}))}}),rd)}function FV(n,e){return LV(VV(n),e)}function LV(n,e){return _(this,null,function*(){let r=(yield OV()).transaction(Mm,"readwrite"),o=r.objectStore(Mm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(lr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function VV(n){return`${n.options.appId}-${n.name}`}var Ta=new un("@firebase/app-check");function Nm(n,e){return bo()?FV(n,e).catch(t=>{Ta.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dC(){return aC().enabled}function hC(){return _(this,null,function*(){let n=aC();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var jV={error:"UNKNOWN_ERROR"};function BV(n){return Bl.encodeString(JSON.stringify(n),!1)}function km(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;cC(r);let i=Qt(r),o=i.token,s;if(o&&!Da(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Da(l)?o=l:yield Nm(r,void 0))}if(!e&&o&&Da(o))return{token:o.token};let a=!1;if(dC())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=uC(lC(r,yield hC()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Nm(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ta.warn(l.message):t&&Ta.error(l),Rm(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Qt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ta.warn(l.message):t&&Ta.error(l),s=l}let u;return o?s?Da(o)?u={token:o.token,internalError:s}:u=Rm(s):(u={token:o.token},i.token=o,yield Nm(r,o)):u=Rm(s),a&&qV(r,u),u})}function UV(n){return _(this,null,function*(){let e=n.app;cC(e);let{provider:t}=Qt(e);if(dC()){let r=yield hC(),{token:i}=yield uC(lC(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function $V(n,e,t,r){let{app:i}=n,o=Qt(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Da(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),oC(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>oC(n))}function fC(n,e){let t=Qt(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function oC(n){let{app:e}=n,t=Qt(e),r=t.tokenRefresher;r||(r=HV(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function HV(n){let{app:e}=n;return new Pm(()=>_(null,null,function*(){let t=Qt(e),r;if(t.token?r=yield km(n,!0):r=yield km(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Qt(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},iC.RETRIAL_MIN_WAIT,iC.RETRIAL_MAX_WAIT)}function qV(n,e){let t=Qt(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Da(n){return n.expireTimeMillis-Date.now()>0}function Rm(n){return{token:BV(jV),error:n}}var xm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Qt(this.app);for(let t of e)fC(this.app,t.next);return Promise.resolve()}};function zV(n,e){return new xm(n,e)}function WV(n){return{getToken:e=>km(n,e),getLimitedUseToken:()=>UV(n),addTokenListener:e=>$V(n,"INTERNAL",e),removeTokenListener:e=>fC(n.app,e)}}var GV="@firebase/app-check",KV="0.10.1";var QV="app-check",sC="app-check-internal";function YV(){Kt(new gt(QV,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return zV(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sC).initialize()})),Kt(new gt(sC,n=>{let e=n.getProvider("app-check").getImmediate();return WV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Me(GV,KV)}YV();var ZV="app-check";var id=class{constructor(){return fi(ZV)}};var JV=["localhost","0.0.0.0","127.0.0.1"],CW=typeof window<"u"&&JV.includes(window.location.hostname);function EC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wC=EC,TC=new Wt("auth","Firebase",EC());var cd=new un("@firebase/auth");function XV(n,...e){cd.logLevel<=ie.WARN&&cd.warn(`Auth (${So}): ${n}`,...e)}function sd(n,...e){cd.logLevel<=ie.ERROR&&cd.error(`Auth (${So}): ${n}`,...e)}function pC(n,...e){throw Wm(n,...e)}function zm(n,...e){return Wm(n,...e)}function DC(n,e,t){let r=Object.assign(Object.assign({},wC()),{[e]:t});return new Wt("auth","Firebase",r).create(e,{appName:n.name})}function ad(n){return DC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wm(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return TC.create(n,...e)}function ge(n,e,...t){if(!n)throw Wm(e,...t)}function ba(n){let e="INTERNAL ASSERTION FAILED: "+n;throw sd(e),new Error(e)}function ud(n,e){n||ba(e)}function e2(){return gC()==="http:"||gC()==="https:"}function gC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function t2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e2()||yb()||"connection"in navigator)?navigator.onLine:!0}function n2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var vi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ud(t>e,"Short delay should be less than long delay!"),this.isMobile=pb()||vb()}get(){return t2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function r2(n,e){ud(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ld=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var i2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var o2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s2=new vi(3e4,6e4);function bC(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function gd(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return CC(n,i,()=>_(null,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=om(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:g},l);return mb()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&sr(n.emulatorConfig.host)&&(m.credentials="include"),ld.fetch()(yield SC(n,n.config.apiHost,t,f),m)}))})}function CC(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},i2),e);try{let i=new Lm(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw od(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw od(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw od(n,"user-disabled",s);let d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw DC(n,d,l);pC(n,d)}}catch(i){if(i instanceof jt)throw i;pC(n,"network-request-failed",{message:String(i)})}})}function SC(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?r2(n.config,i):`${n.config.apiScheme}://${i}`;return o2.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Lm=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zm(this.auth,"network-request-failed")),s2.get())})}};function od(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=zm(n,e,r);return i.customData._tokenResponse=t,i}function a2(n,e){return _(this,null,function*(){return gd(n,"POST","/v1/accounts:delete",e)})}function dd(n,e){return _(this,null,function*(){return gd(n,"POST","/v1/accounts:lookup",e)})}function Ca(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Gm(n,e=!1){return _(this,null,function*(){let t=we(n),r=yield t.getIdToken(e),i=AC(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ca(Om(i.auth_time)),issuedAtTime:Ca(Om(i.iat)),expirationTime:Ca(Om(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Om(n){return Number(n)*1e3}function AC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return sd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ul(t);return i?JSON.parse(i):(sd("Failed to decode base64 JWT payload"),null)}catch(i){return sd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function mC(n){let e=AC(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Vm(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof jt&&c2(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function c2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var jm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Aa=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hd(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Vm(n,dd(t,{idToken:r}));ge(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?NC(o.providerUserInfo):[],a=u2(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,d=u?l:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Aa(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function Km(n){return _(this,null,function*(){let e=we(n);yield hd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function u2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NC(n){return n.map(e=>{var{providerId:t}=e,r=ip(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function l2(n,e){return _(this,null,function*(){let t=yield CC(n,{},()=>_(null,null,function*(){let r=om({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield SC(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&sr(n.emulatorConfig.host)&&(u.credentials="include"),ld.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function d2(n,e){return _(this,null,function*(){return gd(n,"POST","/v2/accounts:revokeToken",bC(n,e))})}var Sa=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");let t=mC(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield l2(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ge(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ge(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ba("not implemented")}};function dr(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var mi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=ip(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Aa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Vm(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Gm(this,e)}reload(){return Km(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield hd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(xn(this.auth.app))return Promise.reject(ad(this.auth));let e=yield this.getIdToken();return yield Vm(this,a2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=t.photoURL)!==null&&s!==void 0?s:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,P=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,B=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:U,emailVerified:W,isAnonymous:le,providerData:G,stsTokenManager:T}=t;ge(U&&T,e,"internal-error");let v=Sa.fromJSON(this.name,T);ge(typeof U=="string",e,"internal-error"),dr(f,e.name),dr(g,e.name),ge(typeof W=="boolean",e,"internal-error"),ge(typeof le=="boolean",e,"internal-error"),dr(m,e.name),dr(w,e.name),dr(R,e.name),dr(P,e.name),dr(O,e.name),dr(B,e.name);let E=new n({uid:U,auth:e,email:g,emailVerified:W,displayName:f,isAnonymous:le,photoURL:w,phoneNumber:m,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:B});return G&&Array.isArray(G)&&(E.providerData=G.map(D=>Object.assign({},D))),P&&(E._redirectEventId=P),E}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Sa;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield hd(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];ge(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?NC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Sa;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Aa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var yC=new Map;function yi(n){ud(n instanceof Function,"Expected a class definition");let e=yC.get(n);return e?(ud(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yC.set(n,e),e)}var h2=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Bm=h2;function Fm(n,e,t){return`firebase:${n}:${e}:${t}`}var fd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Fm(this.userKey,i.apiKey,o),this.fullPersistenceKey=Fm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield dd(this.auth,{idToken:e}).catch(()=>{});return t?mi._fromGetAccountInfoResponse(this.auth,t,e):null}return mi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(yi(Bm),e,r);let i=(yield Promise.all(t.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||yi(Bm),s=Fm(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(s);if(d){let f;if(typeof d=="string"){let g=yield dd(e,{idToken:d}).catch(()=>{});if(!g)break;f=yield mi._fromGetAccountInfoResponse(e,g,d)}else f=mi._fromJSON(e,d);l!==o&&(a=f),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function vC(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v2(e))return"Blackberry";if(_2(e))return"Webos";if(p2(e))return"Safari";if((e.includes("chrome/")||g2(e))&&!e.includes("edge/"))return"Chrome";if(y2(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function f2(n=it()){return/firefox\//i.test(n)}function p2(n=it()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g2(n=it()){return/crios\//i.test(n)}function m2(n=it()){return/iemobile/i.test(n)}function y2(n=it()){return/android/i.test(n)}function v2(n=it()){return/blackberry/i.test(n)}function _2(n=it()){return/webos/i.test(n)}function RC(n,e=[]){let t;switch(n){case"Browser":t=vC(it());break;case"Worker":t=`${vC(it())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${So}/${r}`}var Um=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function I2(t){return _(this,arguments,function*(n,e={}){return gd(n,"GET","/v2/passwordPolicy",bC(n,e))})}var E2=6,$m=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:E2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Hm=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pd(this),this.idTokenSubscription=new pd(this),this.beforeStateQueue=new Um(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield fd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield dd(this,{idToken:e}),r=yield mi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(xn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield hd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=n2()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(xn(this.app))return Promise.reject(ad(this));let t=e?we(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return xn(this.app)?Promise.reject(ad(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return xn(this.app)?Promise.reject(ad(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(yi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield I2(this),t=new $m(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield d2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&yi(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=yield fd.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&XV(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function w2(n){return we(n)}var pd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ib(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var T2={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function D2(n){T2=n}function b2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function C2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(yi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var VW=b2("rcb"),jW=new vi(3e4,6e4);var BW=new vi(2e3,1e4);var UW=10*60*1e3;var $W=new vi(3e4,6e4);var HW=new vi(5e3,15e3);var qW=encodeURIComponent("fac");var _C="@firebase/auth",IC="1.10.8";var qm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function S2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A2(n){Kt(new gt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ge(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RC(n)},l=new Hm(r,i,o,u);return C2(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Kt(new gt("auth-internal",e=>{let t=w2(e.getProvider("auth").getImmediate());return(r=>new qm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(_C,IC,S2(n)),Me(_C,IC,"esm2017")}var N2=5*60,zW=hb("authIdTokenMaxAge")||N2;function R2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}D2({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=zm("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",R2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A2("Browser");var Aj="auth";var md=class{constructor(){return fi(Aj)}};var PC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},MC={};var On,Qm;(function(){var n;function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(D,b,A){for(var I=Array(arguments.length-2),wn=2;wn<arguments.length;wn++)I[wn-2]=arguments[wn];return v.prototype[b].apply(D,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var D=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)D[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;16>b;++b)D[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],b=T.g[2];var A=T.g[3],I=v+(A^E&(b^A))+D[0]+3614090360&4294967295;v=E+(I<<7&4294967295|I>>>25),I=A+(b^v&(E^b))+D[1]+3905402710&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(E^A&(v^E))+D[2]+606105819&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(v^b&(A^v))+D[3]+3250441966&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(A^E&(b^A))+D[4]+4118548399&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(b^v&(E^b))+D[5]+1200080426&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(E^A&(v^E))+D[6]+2821735955&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(v^b&(A^v))+D[7]+4249261313&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(A^E&(b^A))+D[8]+1770035416&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(b^v&(E^b))+D[9]+2336552879&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(E^A&(v^E))+D[10]+4294925233&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(v^b&(A^v))+D[11]+2304563134&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(A^E&(b^A))+D[12]+1804603682&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(b^v&(E^b))+D[13]+4254626195&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(E^A&(v^E))+D[14]+2792965006&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(v^b&(A^v))+D[15]+1236535329&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(b^A&(E^b))+D[1]+4129170786&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(v^E))+D[6]+3225465664&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(A^v))+D[11]+643717713&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(b^A))+D[0]+3921069994&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(E^b))+D[5]+3593408605&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(v^E))+D[10]+38016083&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(A^v))+D[15]+3634488961&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(b^A))+D[4]+3889429448&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(E^b))+D[9]+568446438&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(v^E))+D[14]+3275163606&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(A^v))+D[3]+4107603335&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(b^A))+D[8]+1163531501&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(E^b))+D[13]+2850285829&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(v^E))+D[2]+4243563512&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(A^v))+D[7]+1735328473&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(b^A))+D[12]+2368359562&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(E^b^A)+D[5]+4294588738&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^b)+D[8]+2272392833&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^E)+D[11]+1839030562&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^v)+D[14]+4259657740&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^A)+D[1]+2763975236&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^b)+D[4]+1272893353&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^E)+D[7]+4139469664&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^v)+D[10]+3200236656&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^A)+D[13]+681279174&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^b)+D[0]+3936430074&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^E)+D[3]+3572445317&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^v)+D[6]+76029189&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^A)+D[9]+3654602809&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^b)+D[12]+3873151461&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^E)+D[15]+530742520&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^v)+D[2]+3299628645&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(b^(E|~A))+D[0]+4096336452&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~b))+D[7]+1126891415&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~E))+D[14]+2878612391&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~v))+D[5]+4237533241&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~A))+D[12]+1700485571&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~b))+D[3]+2399980690&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~E))+D[10]+4293915773&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~v))+D[1]+2240044497&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~A))+D[8]+1873313359&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~b))+D[15]+4264355552&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~E))+D[6]+2734768916&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~v))+D[13]+1309151649&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~A))+D[4]+4149444226&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~b))+D[11]+3174756917&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~E))+D[2]+718787259&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~v))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,D=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=E;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<v;)if(D[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,D),b=0;break}}else for(;A<v;)if(D[b++]=T[A++],b==this.blockSize){i(this,D),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var D=0;32>D;D+=8)T[E++]=this.g[v]>>>D&255;return T};function o(T,v){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function s(T,v){this.h=v;for(var E=[],D=!0,b=T.length-1;0<=b;b--){var A=T[b]|0;D&&A==v||(E[b]=A,D=!1)}this.g=E}var a={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return P(l(-T));for(var v=[],E=1,D=0;T>=E;D++)v[D]=T/E|0,E*=4294967296;return new s(v,0)}function d(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return P(d(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),D=f,b=0;b<T.length;b+=8){var A=Math.min(8,T.length-b),I=parseInt(T.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),D=D.j(A).add(l(I))):(D=D.j(E),D=D.add(l(I)))}return D}var f=u(0),g=u(1),m=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-P(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var D=this.i(E);T+=(0<=D?D:4294967296+D)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(w(this))return"0";if(R(this))return"-"+P(this).toString(T);for(var v=l(Math.pow(T,6)),E=this,D="";;){var b=W(E,v).g;E=O(E,b.j(v));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=b,w(E))return A+D;for(;6>A.length;)A="0"+A;D=A+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function w(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}n.l=function(T){return T=O(this,T),R(T)?-1:w(T)?0:1};function P(T){for(var v=T.g.length,E=[],D=0;D<v;D++)E[D]=~T.g[D];return new s(E,~T.h).add(g)}n.abs=function(){return R(this)?P(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],D=0,b=0;b<=v;b++){var A=D+(this.i(b)&65535)+(T.i(b)&65535),I=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);D=I>>>16,A&=65535,I&=65535,E[b]=I<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(P(v))}n.j=function(T){if(w(this)||w(T))return f;if(R(this))return R(T)?P(this).j(P(T)):P(P(this).j(T));if(R(T))return P(this.j(P(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],D=0;D<2*v;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var b=0;b<T.g.length;b++){var A=this.i(D)>>>16,I=this.i(D)&65535,wn=T.i(b)>>>16,Ds=T.i(b)&65535;E[2*D+2*b]+=I*Ds,B(E,2*D+2*b),E[2*D+2*b+1]+=A*Ds,B(E,2*D+2*b+1),E[2*D+2*b+1]+=I*wn,B(E,2*D+2*b+1),E[2*D+2*b+2]+=A*wn,B(E,2*D+2*b+2)}for(D=0;D<v;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=v;D<2*v;D++)E[D]=0;return new s(E,0)};function B(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function U(T,v){this.g=T,this.h=v}function W(T,v){if(w(v))throw Error("division by zero");if(w(T))return new U(f,f);if(R(T))return v=W(P(T),v),new U(P(v.g),P(v.h));if(R(v))return v=W(T,P(v)),new U(P(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,D=v;0>=D.l(T);)E=le(E),D=le(D);var b=G(E,1),A=G(D,1);for(D=G(D,2),E=G(E,2);!w(D);){var I=A.add(D);0>=I.l(T)&&(b=b.add(E),A=I),D=G(D,1),E=G(E,1)}return v=O(T,b.j(v)),new U(b,v)}for(b=f;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),A=l(E),I=A.j(v);R(I)||0<I.l(T);)E-=D,A=l(E),I=A.j(v);w(A)&&(A=g),b=b.add(A),T=O(T,I)}return new U(b,T)}n.A=function(T){return W(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],D=0;D<v;D++)E[D]=this.i(D)&T.i(D);return new s(E,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],D=0;D<v;D++)E[D]=this.i(D)|T.i(D);return new s(E,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],D=0;D<v;D++)E[D]=this.i(D)^T.i(D);return new s(E,this.h^T.h)};function le(T){for(var v=T.g.length+1,E=[],D=0;D<v;D++)E[D]=T.i(D)<<1|T.i(D-1)>>>31;return new s(E,T.h)}function G(T,v){var E=v>>5;v%=32;for(var D=T.g.length-E,b=[],A=0;A<D;A++)b[A]=0<v?T.i(A+E)>>>v|T.i(A+E+1)<<32-v:T.i(A+E);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Qm=MC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,On=MC.Integer=s}).apply(typeof PC<"u"?PC:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fn={};var Ym,Nj,Ro,Zm,Na,vd,Jm,Xm,ey;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var y=0;y<c.length-1;y++){var C=c[y];if(!(C in p))break e;p=p[C]}c=c[c.length-1],y=p[c],h=h(y),h!=y&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,y=!1,C={next:function(){if(!y&&p<c.length){var M=p++;return{value:h(M,c[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),c.apply(h,C)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function w(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(y,C,M){for(var L=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)L[_e-2]=arguments[_e];return h.prototype[C].apply(y,L)}}function R(c){let h=c.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=c[y];return p}return[]}function P(c,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(u(y)){let C=c.length||0,M=y.length||0;c.length=C+M;for(let L=0;L<M;L++)c[C+L]=y[L]}else c.push(y)}}class O{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function B(c){return/^[\s\xa0]*$/.test(c)}function U(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var le=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function G(c,h,p){for(let y in c)h.call(p,c[y],y,c)}function T(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,h){let p,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(p in y)c[p]=y[p];for(let M=0;M<E.length;M++)p=E[M],Object.prototype.hasOwnProperty.call(y,p)&&(c[p]=y[p])}}function b(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function A(c){a.setTimeout(()=>{throw c},0)}function I(){var c=of;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class wn{constructor(){this.h=this.g=null}add(h,p){let y=Ds.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var Ds=new O(()=>new dR,c=>c.reset());class dR{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let bs,Cs=!1,of=new wn,hI=()=>{let c=a.Promise.resolve(void 0);bs=()=>{c.then(hR)}};var hR=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(p){A(p)}var h=Ds;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}Cs=!1};function Kn(){this.s=this.s,this.C=this.C}Kn.prototype.s=!1,Kn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Kn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var fR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function Ss(c,h){if(Xe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(le){e:{try{W(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:pR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ss.aa.h.call(this)}}w(Ss,Xe);var pR={2:"touch",3:"pen",4:"mouse"};Ss.prototype.h=function(){Ss.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var As="closure_listenable_"+(1e6*Math.random()|0),gR=0;function mR(c,h,p,y,C){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=C,this.key=++gR,this.da=this.fa=!1}function Mc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function kc(c){this.src=c,this.g={},this.h=0}kc.prototype.add=function(c,h,p,y,C){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var L=af(c,h,y,C);return-1<L?(h=c[L],p||(h.fa=!1)):(h=new mR(h,this.src,M,!!y,C),h.fa=p,c.push(h)),h};function sf(c,h){var p=h.type;if(p in c.g){var y=c.g[p],C=Array.prototype.indexOf.call(y,h,void 0),M;(M=0<=C)&&Array.prototype.splice.call(y,C,1),M&&(Mc(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function af(c,h,p,y){for(var C=0;C<c.length;++C){var M=c[C];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==y)return C}return-1}var cf="closure_lm_"+(1e6*Math.random()|0),uf={};function fI(c,h,p,y,C){if(y&&y.once)return gI(c,h,p,y,C);if(Array.isArray(h)){for(var M=0;M<h.length;M++)fI(c,h[M],p,y,C);return null}return p=ff(p),c&&c[As]?c.K(h,p,l(y)?!!y.capture:!!y,C):pI(c,h,p,!1,y,C)}function pI(c,h,p,y,C,M){if(!h)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,_e=df(c);if(_e||(c[cf]=_e=new kc(c)),p=_e.add(h,p,y,L,M),p.proxy)return p;if(y=yR(),p.proxy=y,y.src=c,y.listener=p,c.addEventListener)fR||(C=L),C===void 0&&(C=!1),c.addEventListener(h.toString(),y,C);else if(c.attachEvent)c.attachEvent(yI(h.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function yR(){function c(p){return h.call(c.src,c.listener,p)}let h=vR;return c}function gI(c,h,p,y,C){if(Array.isArray(h)){for(var M=0;M<h.length;M++)gI(c,h[M],p,y,C);return null}return p=ff(p),c&&c[As]?c.L(h,p,l(y)?!!y.capture:!!y,C):pI(c,h,p,!0,y,C)}function mI(c,h,p,y,C){if(Array.isArray(h))for(var M=0;M<h.length;M++)mI(c,h[M],p,y,C);else y=l(y)?!!y.capture:!!y,p=ff(p),c&&c[As]?(c=c.i,h=String(h).toString(),h in c.g&&(M=c.g[h],p=af(M,p,y,C),-1<p&&(Mc(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete c.g[h],c.h--)))):c&&(c=df(c))&&(h=c.g[h.toString()],c=-1,h&&(c=af(h,p,y,C)),(p=-1<c?h[c]:null)&&lf(p))}function lf(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[As])sf(h.i,c);else{var p=c.type,y=c.proxy;h.removeEventListener?h.removeEventListener(p,y,c.capture):h.detachEvent?h.detachEvent(yI(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=df(h))?(sf(p,c),p.h==0&&(p.src=null,h[cf]=null)):Mc(c)}}}function yI(c){return c in uf?uf[c]:uf[c]="on"+c}function vR(c,h){if(c.da)c=!0;else{h=new Ss(h,this);var p=c.listener,y=c.ha||c.src;c.fa&&lf(c),c=p.call(y,h)}return c}function df(c){return c=c[cf],c instanceof kc?c:null}var hf="__closure_events_fn_"+(1e9*Math.random()>>>0);function ff(c){return typeof c=="function"?c:(c[hf]||(c[hf]=function(h){return c.handleEvent(h)}),c[hf])}function et(){Kn.call(this),this.i=new kc(this),this.M=this,this.F=null}w(et,Kn),et.prototype[As]=!0,et.prototype.removeEventListener=function(c,h,p,y){mI(this,c,h,p,y)};function ut(c,h){var p,y=c.F;if(y)for(p=[];y;y=y.F)p.push(y);if(c=c.M,y=h.type||h,typeof h=="string")h=new Xe(h,c);else if(h instanceof Xe)h.target=h.target||c;else{var C=h;h=new Xe(y,c),D(h,C)}if(C=!0,p)for(var M=p.length-1;0<=M;M--){var L=h.g=p[M];C=xc(L,y,!0,h)&&C}if(L=h.g=c,C=xc(L,y,!0,h)&&C,C=xc(L,y,!1,h)&&C,p)for(M=0;M<p.length;M++)L=h.g=p[M],C=xc(L,y,!1,h)&&C}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],y=0;y<p.length;y++)Mc(p[y]);delete c.g[h],c.h--}}this.F=null},et.prototype.K=function(c,h,p,y){return this.i.add(String(c),h,!1,p,y)},et.prototype.L=function(c,h,p,y){return this.i.add(String(c),h,!0,p,y)};function xc(c,h,p,y){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,M=0;M<h.length;++M){var L=h[M];if(L&&!L.da&&L.capture==p){var _e=L.listener,Ye=L.ha||L.src;L.fa&&sf(c.i,L),C=_e.call(Ye,y)!==!1&&C}}return C&&!y.defaultPrevented}function vI(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function _I(c){c.g=vI(()=>{c.g=null,c.i&&(c.i=!1,_I(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class _R extends Kn{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:_I(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(c){Kn.call(this),this.h=c,this.g={}}w(Ns,Kn);var II=[];function EI(c){G(c.g,function(h,p){this.g.hasOwnProperty(p)&&lf(h)},c),c.g={}}Ns.prototype.N=function(){Ns.aa.N.call(this),EI(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pf=a.JSON.stringify,IR=a.JSON.parse,ER=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function gf(){}gf.prototype.h=null;function wI(c){return c.h||(c.h=c.i())}function TI(){}var Rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mf(){Xe.call(this,"d")}w(mf,Xe);function yf(){Xe.call(this,"c")}w(yf,Xe);var Vr={},DI=null;function Oc(){return DI=DI||new et}Vr.La="serverreachability";function bI(c){Xe.call(this,Vr.La,c)}w(bI,Xe);function Ps(c){let h=Oc();ut(h,new bI(h))}Vr.STAT_EVENT="statevent";function CI(c,h){Xe.call(this,Vr.STAT_EVENT,c),this.stat=h}w(CI,Xe);function lt(c){let h=Oc();ut(h,new CI(h,c))}Vr.Ma="timingevent";function SI(c,h){Xe.call(this,Vr.Ma,c),this.size=h}w(SI,Xe);function Ms(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function ks(){this.g=!0}ks.prototype.xa=function(){this.g=!1};function wR(c,h,p,y,C,M){c.info(function(){if(c.g)if(M)for(var L="",_e=M.split("&"),Ye=0;Ye<_e.length;Ye++){var fe=_e[Ye].split("=");if(1<fe.length){var tt=fe[0];fe=fe[1];var nt=tt.split("_");L=2<=nt.length&&nt[1]=="type"?L+(tt+"="+fe+"&"):L+(tt+"=redacted&")}}else L=null;else L=M;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+h+`
`+p+`
`+L})}function TR(c,h,p,y,C,M,L){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+h+`
`+p+`
`+M+" "+L})}function Wi(c,h,p,y){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+bR(c,p)+(y?" "+y:"")})}function DR(c,h){c.info(function(){return"TIMEOUT: "+h})}ks.prototype.info=function(){};function bR(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var y=p[c];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return pf(p)}catch{return h}}var Fc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},AI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vf;function Lc(){}w(Lc,gf),Lc.prototype.g=function(){return new XMLHttpRequest},Lc.prototype.i=function(){return{}},vf=new Lc;function Qn(c,h,p,y){this.j=c,this.i=h,this.l=p,this.R=y||1,this.U=new Ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new NI}function NI(){this.i=null,this.g="",this.h=!1}var RI={},_f={};function If(c,h,p){c.L=1,c.v=Uc(Tn(h)),c.m=p,c.P=!0,PI(c,null)}function PI(c,h){c.F=Date.now(),Vc(c),c.A=Tn(c.v);var p=c.A,y=c.R;Array.isArray(y)||(y=[String(y)]),zI(p.i,"t",y),c.C=0,p=c.j.J,c.h=new NI,c.g=uE(c.j,p?h:null,!c.m),0<c.O&&(c.M=new _R(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,y=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(II[0]=C.toString()),C=II);for(var M=0;M<C.length;M++){var L=fI(p,C[M],y||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),Ps(),wR(c.i,c.u,c.A,c.l,c.R,c.m)}Qn.prototype.ca=function(c){c=c.target;let h=this.M;h&&Dn(c)==3?h.j():this.Y(c)},Qn.prototype.Y=function(c){try{if(c==this.g)e:{let nt=Dn(this.g);var h=this.g.Ba();let Qi=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||JI(this.g)))){this.J||nt!=4||h==7||(h==8||0>=Qi?Ps(3):Ps(2)),Ef(this);var p=this.g.Z();this.X=p;t:if(MI(this)){var y=JI(this.g);c="";var C=y.length,M=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),xs(this);var L="";break t}this.h.i=new a.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,c+=this.h.i.decode(y[h],{stream:!(M&&h==C-1)});y.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=p==200,TR(this.i,this.u,this.A,this.l,this.R,nt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,Ye=this.g;if((_e=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(_e)){var fe=_e;break t}}fe=null}if(p=fe)Wi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wf(this,p);else{this.o=!1,this.s=3,lt(12),jr(this),xs(this);break e}}if(this.P){p=!0;let Ut;for(;!this.J&&this.C<L.length;)if(Ut=CR(this,L),Ut==_f){nt==4&&(this.s=4,lt(14),p=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==RI){this.s=4,lt(15),Wi(this.i,this.l,L,"[Invalid Chunk]"),p=!1;break}else Wi(this.i,this.l,Ut,null),wf(this,Ut);if(MI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||L.length!=0||this.h.h||(this.s=1,lt(16),p=!1),this.o=this.o&&p,!p)Wi(this.i,this.l,L,"[Invalid Chunked Response]"),jr(this),xs(this);else if(0<L.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Af(tt),tt.M=!0,lt(11))}}else Wi(this.i,this.l,L,null),wf(this,L);nt==4&&jr(this),this.o&&!this.J&&(nt==4?oE(this.j,this):(this.o=!1,Vc(this)))}else HR(this.g),p==400&&0<L.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),jr(this),xs(this)}}}catch{}finally{}};function MI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function CR(c,h){var p=c.C,y=h.indexOf(`
`,p);return y==-1?_f:(p=Number(h.substring(p,y)),isNaN(p)?RI:(y+=1,y+p>h.length?_f:(h=h.slice(y,y+p),c.C=y+p,h)))}Qn.prototype.cancel=function(){this.J=!0,jr(this)};function Vc(c){c.S=Date.now()+c.I,kI(c,c.I)}function kI(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ms(g(c.ba,c),h)}function Ef(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Qn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(DR(this.i,this.A),this.L!=2&&(Ps(),lt(17)),jr(this),this.s=2,xs(this)):kI(this,this.S-c)};function xs(c){c.j.G==0||c.J||oE(c.j,c)}function jr(c){Ef(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,EI(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function wf(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Tf(p.h,c))){if(!c.K&&Tf(p.h,c)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Wc(p),qc(p);else break e;Sf(p),lt(18)}}else p.za=C[1],0<p.za-p.T&&37500>C[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ms(g(p.Za,p),6e3));if(1>=FI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ur(p,11)}else if((c.K||p.g==c)&&Wc(p),!B(h))for(C=p.Da.g.parse(h),h=0;h<C.length;h++){let fe=C[h];if(p.T=fe[0],fe=fe[1],p.G==2)if(fe[0]=="c"){p.K=fe[1],p.ia=fe[2];let tt=fe[3];tt!=null&&(p.la=tt,p.j.info("VER="+p.la));let nt=fe[4];nt!=null&&(p.Aa=nt,p.j.info("SVER="+p.Aa));let Qi=fe[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(y=1.5*Qi,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let Ut=c.g;if(Ut){let Kc=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kc){var M=y.h;M.g||Kc.indexOf("spdy")==-1&&Kc.indexOf("quic")==-1&&Kc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Df(M,M.h),M.h=null))}if(y.D){let Nf=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Nf&&(y.ya=Nf,Te(y.I,y.D,Nf))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var L=c;if(y.qa=cE(y,y.J?y.ia:null,y.W),L.K){LI(y.h,L);var _e=L,Ye=y.L;Ye&&(_e.I=Ye),_e.B&&(Ef(_e),Vc(_e)),y.g=L}else rE(y);0<p.i.length&&zc(p)}else fe[0]!="stop"&&fe[0]!="close"||Ur(p,7);else p.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Ur(p,7):Cf(p):fe[0]!="noop"&&p.l&&p.l.ta(fe),p.v=0)}}Ps(4)}catch{}}var SR=class{constructor(c,h){this.g=c,this.map=h}};function xI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function FI(c){return c.h?1:c.g?c.g.size:0}function Tf(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Df(c,h){c.g?c.g.add(h):c.h=h}function LI(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}xI.prototype.cancel=function(){if(this.i=VI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function VI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return R(c.i)}function AR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,y=0;y<p;y++)h.push(c[y]);return h}h=[],p=0;for(y in c)h[p++]=c[y];return h}function NR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let y in c)h[p++]=y;return h}}}function jI(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=NR(c),y=AR(c),C=y.length,M=0;M<C;M++)h.call(void 0,y[M],p&&p[M],c)}var BI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RR(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var y=c[p].indexOf("="),C=null;if(0<=y){var M=c[p].substring(0,y);C=c[p].substring(y+1)}else M=c[p];h(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Br(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Br){this.h=c.h,jc(this,c.j),this.o=c.o,this.g=c.g,Bc(this,c.s),this.l=c.l;var h=c.i,p=new Ls;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),UI(this,p),this.m=c.m}else c&&(h=String(c).match(BI))?(this.h=!1,jc(this,h[1]||"",!0),this.o=Os(h[2]||""),this.g=Os(h[3]||"",!0),Bc(this,h[4]),this.l=Os(h[5]||"",!0),UI(this,h[6]||"",!0),this.m=Os(h[7]||"")):(this.h=!1,this.i=new Ls(null,this.h))}Br.prototype.toString=function(){var c=[],h=this.j;h&&c.push(Fs(h,$I,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(Fs(h,$I,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Fs(p,p.charAt(0)=="/"?kR:MR,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Fs(p,OR)),c.join("")};function Tn(c){return new Br(c)}function jc(c,h,p){c.j=p?Os(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Bc(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function UI(c,h,p){h instanceof Ls?(c.i=h,FR(c.i,c.h)):(p||(h=Fs(h,xR)),c.i=new Ls(h,c.h))}function Te(c,h,p){c.i.set(h,p)}function Uc(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Os(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Fs(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,PR),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function PR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $I=/[#\/\?@]/g,MR=/[#\?:]/g,kR=/[#\?]/g,xR=/[#\?@]/g,OR=/#/g;function Ls(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function Yn(c){c.g||(c.g=new Map,c.h=0,c.i&&RR(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Ls.prototype,n.add=function(c,h){Yn(this),this.i=null,c=Gi(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function HI(c,h){Yn(c),h=Gi(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function qI(c,h){return Yn(c),h=Gi(c,h),c.g.has(h)}n.forEach=function(c,h){Yn(this),this.g.forEach(function(p,y){p.forEach(function(C){c.call(h,C,y,this)},this)},this)},n.na=function(){Yn(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let C=c[y];for(let M=0;M<C.length;M++)p.push(h[y])}return p},n.V=function(c){Yn(this);let h=[];if(typeof c=="string")qI(this,c)&&(h=h.concat(this.g.get(Gi(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return Yn(this),this.i=null,c=Gi(this,c),qI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function zI(c,h,p){HI(c,h),0<p.length&&(c.i=null,c.g.set(Gi(c,h),R(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let M=encodeURIComponent(String(y)),L=this.V(y);for(y=0;y<L.length;y++){var C=M;L[y]!==""&&(C+="="+encodeURIComponent(String(L[y]))),c.push(C)}}return this.i=c.join("&")};function Gi(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function FR(c,h){h&&!c.j&&(Yn(c),c.i=null,c.g.forEach(function(p,y){var C=y.toLowerCase();y!=C&&(HI(this,y),zI(this,C,p))},c)),c.j=h}function LR(c,h){let p=new ks;if(a.Image){let y=new Image;y.onload=m(Zn,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(Zn,p,"TestLoadImage: error",!1,h,y),y.onabort=m(Zn,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(Zn,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else h(!1)}function VR(c,h){let p=new ks,y=new AbortController,C=setTimeout(()=>{y.abort(),Zn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:y.signal}).then(M=>{clearTimeout(C),M.ok?Zn(p,"TestPingServer: ok",!0,h):Zn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Zn(p,"TestPingServer: error",!1,h)})}function Zn(c,h,p,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(p)}catch{}}function jR(){this.g=new ER}function BR(c,h,p){let y=p||"";try{jI(c,function(C,M){let L=C;l(C)&&(L=pf(C)),h.push(y+M+"="+encodeURIComponent(L))})}catch(C){throw h.push(y+"type="+encodeURIComponent("_badmap")),C}}function Vs(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Vs,gf),Vs.prototype.g=function(){return new $c(this.l,this.j)},Vs.prototype.i=function(c){return function(){return c}}({});function $c(c,h){et.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w($c,et),n=$c.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,Bs(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bs(this)),this.g&&(this.readyState=3,Bs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;WI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function WI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?js(this):Bs(this),this.readyState==3&&WI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,js(this))},n.Qa=function(c){this.g&&(this.response=c,js(this))},n.ga=function(){this.g&&js(this)};function js(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Bs(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function Bs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty($c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function GI(c){let h="";return G(c,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function bf(c,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=GI(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Te(c,h,p))}function Re(c){et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Re,et);var UR=/^https?$/i,$R=["POST","PUT"];n=Re.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vf.g(),this.v=this.o?wI(this.o):wI(vf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(M){KI(this,M);return}if(c=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)p.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let M of y.keys())p.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call($R,h,void 0))||y||C||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,L]of p)this.g.setRequestHeader(M,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ZI(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){KI(this,M)}};function KI(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,QI(c),Hc(c)}function QI(c){c.A||(c.A=!0,ut(c,"complete"),ut(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ut(this,"complete"),ut(this,"abort"),Hc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hc(this,!0)),Re.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?YI(this):this.bb())},n.bb=function(){YI(this)};function YI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Dn(c)!=4||c.Z()!=2)){if(c.u&&Dn(c)==4)vI(c.Ea,0,c);else if(ut(c,"readystatechange"),Dn(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=L===0){var C=String(c.D).match(BI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),y=!UR.test(C?C.toLowerCase():"")}p=y}if(p)ut(c,"complete"),ut(c,"success");else{c.m=6;try{var M=2<Dn(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",QI(c)}}finally{Hc(c)}}}}function Hc(c,h){if(c.g){ZI(c);let p=c.g,y=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||ut(c,"ready");try{p.onreadystatechange=y}catch{}}}function ZI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Dn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),IR(h)}};function JI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function HR(c){let h={};c=(c.g&&2<=Dn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(B(c[y]))continue;var p=b(c[y]);let C=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[C]||[];h[C]=M,M.push(p)}T(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function XI(c){this.Aa=0,this.i=[],this.j=new ks,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Us("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Us("baseRetryDelayMs",5e3,c),this.cb=Us("retryDelaySeedMs",1e4,c),this.Wa=Us("forwardChannelMaxRetries",2,c),this.wa=Us("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new xI(c&&c.concurrentRequestLimit),this.Da=new jR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=XI.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,y){lt(0),this.W=c,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=cE(this,null,this.W),zc(this)};function Cf(c){if(eE(c),c.G==3){var h=c.U++,p=Tn(c.I);if(Te(p,"SID",c.K),Te(p,"RID",h),Te(p,"TYPE","terminate"),$s(c,p),h=new Qn(c,c.j,h),h.L=2,h.v=Uc(Tn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=uE(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Vc(h)}aE(c)}function qc(c){c.g&&(Af(c),c.g.cancel(),c.g=null)}function eE(c){qc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Wc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function zc(c){if(!OI(c.h)&&!c.s){c.s=!0;var h=c.Ga;bs||hI(),Cs||(bs(),Cs=!0),of.add(h,c),c.B=0}}function qR(c,h){return FI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ms(g(c.Ga,c,h),sE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Qn(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),D(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=nE(this,C,h),p=Tn(this.I),Te(p,"RID",c),Te(p,"CVER",22),this.D&&Te(p,"X-HTTP-Session-Id",this.D),$s(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(GI(M)))+"&"+h:this.m&&bf(p,this.m,M)),Df(this.h,C),this.Ua&&Te(p,"TYPE","init"),this.P?(Te(p,"$req",h),Te(p,"SID","null"),C.T=!0,If(C,p,null)):If(C,p,h),this.G=2}}else this.G==3&&(c?tE(this,c):this.i.length==0||OI(this.h)||tE(this))};function tE(c,h){var p;h?p=h.l:p=c.U++;let y=Tn(c.I);Te(y,"SID",c.K),Te(y,"RID",p),Te(y,"AID",c.T),$s(c,y),c.m&&c.o&&bf(y,c.m,c.o),p=new Qn(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=nE(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Df(c.h,p),If(p,y,h)}function $s(c,h){c.H&&G(c.H,function(p,y){Te(h,y,p)}),c.l&&jI({},function(p,y){Te(h,y,p)})}function nE(c,h,p){p=Math.min(c.i.length,p);var y=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let M=-1;for(;;){let L=["count="+p];M==-1?0<p?(M=C[0].g,L.push("ofs="+M)):M=0:L.push("ofs="+M);let _e=!0;for(let Ye=0;Ye<p;Ye++){let fe=C[Ye].g,tt=C[Ye].map;if(fe-=M,0>fe)M=Math.max(0,C[Ye].g-100),_e=!1;else try{BR(tt,L,"req"+fe+"_")}catch{y&&y(tt)}}if(_e){y=L.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,y}function rE(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;bs||hI(),Cs||(bs(),Cs=!0),of.add(h,c),c.v=0}}function Sf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ms(g(c.Fa,c),sE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,iE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ms(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),qc(this),iE(this))};function Af(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function iE(c){c.g=new Qn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Tn(c.qa);Te(h,"RID","rpc"),Te(h,"SID",c.K),Te(h,"AID",c.T),Te(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(h,"TO",c.ja),Te(h,"TYPE","xmlhttp"),$s(c,h),c.m&&c.o&&bf(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Uc(Tn(h)),p.m=null,p.P=!0,PI(p,c)}n.Za=function(){this.C!=null&&(this.C=null,qc(this),Sf(this),lt(19))};function Wc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function oE(c,h){var p=null;if(c.g==h){Wc(c),Af(c),c.g=null;var y=2}else if(Tf(c.h,h))p=h.D,LI(c.h,h),y=1;else return;if(c.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var C=c.B;y=Oc(),ut(y,new SI(y,p)),zc(c)}else rE(c);else if(C=h.s,C==3||C==0&&0<h.X||!(y==1&&qR(c,h)||y==2&&Sf(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),C){case 1:Ur(c,5);break;case 4:Ur(c,10);break;case 3:Ur(c,6);break;default:Ur(c,2)}}}function sE(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function Ur(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),y=c.Xa;let C=!y;y=new Br(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jc(y,"https"),Uc(y),C?LR(y.toString(),p):VR(y.toString(),p)}else lt(2);c.G=0,c.l&&c.l.sa(h),aE(c),eE(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function aE(c){if(c.G=0,c.ka=[],c.l){let h=VI(c.h);(h.length!=0||c.i.length!=0)&&(P(c.ka,h),P(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function cE(c,h,p){var y=p instanceof Br?Tn(p):new Br(p);if(y.g!="")h&&(y.g=h+"."+y.g),Bc(y,y.s);else{var C=a.location;y=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var M=new Br(null);y&&jc(M,y),h&&(M.g=h),C&&Bc(M,C),p&&(M.l=p),y=M}return p=c.D,h=c.ya,p&&h&&Te(y,p,h),Te(y,"VER",c.la),$s(c,y),y}function uE(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Re(new Vs({eb:p})):new Re(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lE(){}n=lE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Gc(){}Gc.prototype.g=function(c,h){return new Ct(c,h)};function Ct(c,h){et.call(this),this.g=new XI(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!B(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!B(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Ki(this)}w(Ct,et),Ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){Cf(this.g)},Ct.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=pf(c),c=p);h.i.push(new SR(h.Ya++,c)),h.G==3&&zc(h)},Ct.prototype.N=function(){this.g.l=null,delete this.j,Cf(this.g),delete this.g,Ct.aa.N.call(this)};function dE(c){mf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}w(dE,mf);function hE(){yf.call(this),this.status=1}w(hE,yf);function Ki(c){this.g=c}w(Ki,lE),Ki.prototype.ua=function(){ut(this.g,"a")},Ki.prototype.ta=function(c){ut(this.g,new dE(c))},Ki.prototype.sa=function(c){ut(this.g,new hE)},Ki.prototype.ra=function(){ut(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,ey=Fn.createWebChannelTransport=function(){return new Gc},Xm=Fn.getStatEventTarget=function(){return Oc()},Jm=Fn.Event=Vr,vd=Fn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,Na=Fn.ErrorCode=Fc,AI.COMPLETE="complete",Zm=Fn.EventType=AI,TI.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",et.prototype.listen=et.prototype.K,Ro=Fn.WebChannel=TI,Nj=Fn.FetchXmlHttpFactory=Vs,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,Ym=Fn.XhrIo=Re}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});var kC="@firebase/firestore",xC="4.8.0";var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");var ms="11.10.0";var Er=new un("@firebase/firestore");function Lo(){return Er.logLevel}function ZS(n){Er.setLogLevel(n)}function x(n,...e){if(Er.logLevel<=ie.DEBUG){let t=e.map(y_);Er.debug(`Firestore (${ms}): ${n}`,...t)}}function xe(n,...e){if(Er.logLevel<=ie.ERROR){let t=e.map(y_);Er.error(`Firestore (${ms}): ${n}`,...t)}}function mt(n,...e){if(Er.logLevel<=ie.WARN){let t=e.map(y_);Er.warn(`Firestore (${ms}): ${n}`,...t)}}function y_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function $(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,JS(n,r,t)}function JS(n,e,t){let r=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xe(r),new Error(r)}function H(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||JS(e,i,r)}function GG(n,e){n||$(57014,e)}function F(n,e){return n}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends jt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qe=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var kd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},cy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($e.UNAUTHENTICATED))}shutdown(){}},uy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ly=class{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){H(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new qe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qe)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(H(typeof r.accessToken=="string",31837,{l:r}),new kd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return H(e===null||typeof e=="string",2055,{h:e}),new $e(e)}},dy=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},hy=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new dy(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qa=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},fy=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){H(this.o===void 0,3512);let r=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,x("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qa(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(H(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}},OC=class{getToken(){return Promise.resolve(new qa(""))}invalidateToken(){}start(e,t){}shutdown(){}};function Rj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function v_(){return new TextEncoder}var za=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Rj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function z(n,e){return n<e?-1:n>e?1:0}function py(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return z(r,i);{let o=v_(),s=Pj(o.encode(FC(n,t)),o.encode(FC(e,t)));return s!==0?s:z(r,i)}}t+=r>65535?2:1}return z(n.length,e.length)}function FC(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Pj(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return z(n[t],e[t]);return z(n.length,e.length)}function Wo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function XS(n){return n+"\0"}var gy="__name__",xd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&$(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&$(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return z(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):py(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return On.fromString(e.substring(4,e.length-2))}},ce=class n extends xd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Mj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ze=class n extends xd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Mj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gy}static keyField(){return new n([gy])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var V=class n{constructor(e){this.path=e}static fromPath(e){return new n(ce.fromString(e))}static fromName(e){return new n(ce.fromString(e).popFirst(5))}static empty(){return new n(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ce(e.slice()))}};function __(n,e,t){if(!t)throw new k(S.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kj(n,e,t,r){if(e===!0&&r===!0)throw new k(S.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LC(n){if(!V.isDocumentKey(n))throw new k(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VC(n){if(V.isDocumentKey(n))throw new k(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function e0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Oh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$(12329,{type:typeof n})}function oe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Oh(n);throw new k(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function t0(n,e){if(e<=0)throw new k(S.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function He(n,e){let t={typeString:n};return e&&(t.value=e),t}function $i(n,e){if(!e0(n))throw new k(S.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new k(S.INVALID_ARGUMENT,t);return!0}var jC=-62135596800,BC=1e6,Ae=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*BC);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jC)throw new k(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BC}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($i(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-jC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:He("string",Ae._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};var q=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ae(0,0))}static max(){return new n(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Go=-1,wr=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function my(n){return n.fields.find(e=>e.kind===2)}function Ii(n){return n.fields.filter(e=>e.kind!==2)}function xj(n,e){let t=z(n.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let r=0;r<Math.min(n.fields.length,e.fields.length);++r)if(t=Oj(n.fields[r],e.fields[r]),t!==0)return t;return z(n.fields.length,e.fields.length)}wr.UNKNOWN_ID=-1;var Vn=class{constructor(e,t){this.fieldPath=e,this.kind=t}};function Oj(n,e){let t=ze.comparator(n.fieldPath,e.fieldPath);return t!==0?t:z(n.kind,e.kind)}var Ko=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Bt.min())}};function n0(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Ae(t+1,0):new Ae(t,r));return new Bt(i,V.empty(),e)}function r0(n){return new Bt(n.readTime,n.key,Go)}var Bt=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(q.min(),V.empty(),Go)}static max(){return new n(q.max(),V.empty(),Go)}};function I_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=V.comparator(n.documentKey,e.documentKey),t!==0?t:z(n.largestBatchId,e.largestBatchId))}var i0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Od=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Mr(n){return _(this,null,function*(){if(n.code!==S.FAILED_PRECONDITION||n.message!==i0)throw n;x("LocalStore","Unexpectedly lost primary lease")})}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var At="SimpleDb",Fd=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Ai(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new qe,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ai(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=E_(r.target.error);this.S.reject(new Ai(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(x(At,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new vy(t)}},Tr=class n{static delete(e){return x(At,"Removing database:",e),wi($l().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!bo())return!1;if(n.F())return!0;let e=it(),t=n.M(e),r=0<t&&t<10,i=o0(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(it())===12.2&&xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return _(this,null,function*(){return this.db||(x(At,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Ai(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(S.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ai(e,s))},i.onupgradeneeded=o=>{x(At,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{x(At,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(mt('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return _(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Fd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),N.reject(l))).toPromise();return u.catch(()=>{}),yield a.D,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(x(At,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function o0(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var yy=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return wi(this.$.delete())}},Ai=class extends k{constructor(e,t){super(S.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function kr(n){return n.name==="IndexedDbTransactionError"}var vy=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(x(At,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(x(At,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wi(r)}add(e){return x(At,"ADD",this.store.name,e,e),wi(this.store.add(e))}get(e){return wi(this.store.get(e)).next(t=>(t===void 0&&(t=null),x(At,"GET",this.store.name,e,t),t))}delete(e){return x(At,"DELETE",this.store.name,e),wi(this.store.delete(e))}count(){return x(At,"COUNT",this.store.name),wi(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new N((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,u)=>{s.push(u)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new N((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){x(At,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new N((r,i)=>{t.onerror=o=>{let s=E_(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new N((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new yy(a),l=t(a.primaryKey,a.value,u);if(l instanceof N){let d=l.catch(f=>(u.done(),N.reject(f)));r.push(d)}u.isDone?i():u.W===null?a.continue():a.continue(u.W)}}).next(()=>N.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function wi(n){return new N((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=E_(r.target.error);t(i)}})}var UC=!1;function E_(n){let e=Tr.M(it());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return UC||(UC=!0,setTimeout(()=>{throw r},0)),r}}return n}var Fa="IndexBackfiller",_y=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){x(Fa,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>_(this,null,function*(){this.task=null;try{let t=yield this.te.re();x(Fa,`Documents written: ${t}`)}catch(t){kr(t)?x(Fa,"Ignoring IndexedDB error during index backfill: ",t):yield Mr(t)}yield this.ne(6e4)}))}},Iy=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return _(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return N.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return x(Fa,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>(x(Fa,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=r0(o);I_(s,r)>0&&(r=s)}),new Bt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Nt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),_r=-1;function Tc(n){return n==null}function Wa(n){return n===0&&1/n==-1/0}function s0(n){return typeof n=="number"&&Number.isInteger(n)&&!Wa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Ld="";function at(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$C(e)),e=Fj(n.get(t),e);return $C(e)}function Fj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Ld:t+="";break;default:t+=o}}return t}function $C(n){return n+Ld+""}function fn(n){let e=n.length;if(H(e>=2,64408,{path:n}),e===2)return H(n.charAt(0)===Ld&&n.charAt(1)==="",56145,{path:n}),ce.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Ld,o);switch((s<0||s>t)&&$(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:$(61167,{path:n})}o=s+2}return new ce(r)}var Ei="remoteDocuments",Dc="owner",Po="owner",Ga="mutationQueues",Lj="userId",Yt="mutations",HC="batchId",Ci="userMutationsIndex",qC=["userId","batchId"];function bd(n,e){return[n,at(e)]}function a0(n,e,t){return[n,at(e),t]}var Vj={},Qo="documentMutations",Vd="remoteDocumentsV14",jj=["prefixPath","collectionGroup","readTime","documentId"],Cd="documentKeyIndex",Bj=["prefixPath","collectionGroup","documentId"],c0="collectionGroupIndex",Uj=["collectionGroup","readTime","prefixPath","documentId"],Ka="remoteDocumentGlobal",Ey="remoteDocumentGlobalKey",Yo="targets",u0="queryTargetsIndex",$j=["canonicalId","targetId"],Zo="targetDocuments",Hj=["targetId","path"],w_="documentTargetsIndex",qj=["path","targetId"],jd="targetGlobalKey",Ni="targetGlobal",Qa="collectionParents",zj=["collectionId","parent"],Jo="clientMetadata",Wj="clientId",Fh="bundles",Gj="bundleId",Lh="namedQueries",Kj="name",T_="indexConfiguration",Qj="indexId",wy="collectionGroupIndex",Yj="collectionGroup",La="indexState",Zj=["indexId","uid"],l0="sequenceNumberIndex",Jj=["uid","sequenceNumber"],Va="indexEntries",Xj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],d0="documentKeyIndex",eB=["indexId","uid","orderedDocumentKey"],Vh="documentOverlays",tB=["userId","collectionPath","documentId"],Ty="collectionPathOverlayIndex",nB=["userId","collectionPath","largestBatchId"],h0="collectionGroupOverlayIndex",rB=["userId","collectionGroup","largestBatchId"],D_="globals",iB="name",f0=[Ga,Yt,Qo,Ei,Yo,Dc,Ni,Zo,Jo,Ka,Qa,Fh,Lh],oB=[...f0,Vh],p0=[Ga,Yt,Qo,Vd,Yo,Dc,Ni,Zo,Jo,Ka,Qa,Fh,Lh,Vh],g0=p0,b_=[...g0,T_,La,Va],sB=b_,m0=[...b_,D_],aB=m0;var Ya=class extends Od{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function Ke(n,e){let t=F(n);return Tr.N(t.ce,e)}function zC(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function y0(n,e){let t=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function v0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ce=class n{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uo(this.root,e,this.comparator,!0)}},Uo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ve=class n{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bd(this.data.getIterator())}getIteratorFrom(e){return new Bd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Bd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Mo(n){return n.hasNext()?n.getNext():void 0}var Rt=class n{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new n([])}unionWith(e){let t=new ve(ze.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ud=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function QG(){return typeof atob<"u"}var Fe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ud("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Fe.EMPTY_BYTE_STRING=new Fe("");var cB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Un(n){if(H(!!n,39018),typeof n=="string"){let e=0,t=cB.exec(n);if(H(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(n.seconds),nanos:Se(n.nanos)}}function Se(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $n(n){return typeof n=="string"?Fe.fromBase64String(n):Fe.fromUint8Array(n)}var _0="server_timestamp",I0="__type__",E0="__previous_value__",w0="__local_write_time__";function jh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[I0])===null||t===void 0?void 0:t.stringValue)===_0}function Bh(n){let e=n.mapValue.fields[E0];return jh(e)?Bh(e):e}function Za(n){let e=Un(n.mapValue.fields[w0].timestampValue);return new Ae(e.seconds,e.nanos)}var Dy=class{constructor(e,t,r,i,o,s,a,u,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=d}},Ja="(default)",Xo=class n{constructor(e,t){this.projectId=e,this.database=t||Ja}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ja}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var C_="__type__",T0="__max__",yr={mapValue:{fields:{__type__:{stringValue:T0}}}},S_="__vector__",es="value",Sd={nullValue:"NULL_VALUE"};function Dr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jh(n)?4:D0(n)?9007199254740991:Uh(n)?10:11:$(28295,{value:n})}function _n(n,e){if(n===e)return!0;let t=Dr(n);if(t!==Dr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Za(n).isEqual(Za(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Un(i.timestampValue),a=Un(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return $n(i.bytesValue).isEqual($n(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Se(i.geoPointValue.latitude)===Se(o.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Se(i.integerValue)===Se(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Se(i.doubleValue),a=Se(o.doubleValue);return s===a?Wa(s)===Wa(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Wo(n.arrayValue.values||[],e.arrayValue.values||[],_n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(zC(s)!==zC(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!_n(s[u],a[u])))return!1;return!0}(n,e);default:return $(52216,{left:n})}}function Xa(n,e){return(n.values||[]).find(t=>_n(t,e))!==void 0}function br(n,e){if(n===e)return 0;let t=Dr(n),r=Dr(e);if(t!==r)return z(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return z(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Se(o.integerValue||o.doubleValue),u=Se(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return WC(n.timestampValue,e.timestampValue);case 4:return WC(Za(n),Za(e));case 5:return py(n.stringValue,e.stringValue);case 6:return function(o,s){let a=$n(o),u=$n(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=z(a[l],u[l]);if(d!==0)return d}return z(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=z(Se(o.latitude),Se(s.latitude));return a!==0?a:z(Se(o.longitude),Se(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return GC(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},m=(a=f[es])===null||a===void 0?void 0:a.arrayValue,w=(u=g[es])===null||u===void 0?void 0:u.arrayValue,R=z(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:GC(m,w)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===yr.mapValue&&s===yr.mapValue)return 0;if(o===yr.mapValue)return 1;if(s===yr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=py(u[f],d[f]);if(g!==0)return g;let m=br(a[u[f]],l[d[f]]);if(m!==0)return m}return z(u.length,d.length)}(n.mapValue,e.mapValue);default:throw $(23264,{le:t})}}function WC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return z(n,e);let t=Un(n),r=Un(e),i=z(t.seconds,r.seconds);return i!==0?i:z(t.nanos,r.nanos)}function GC(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=br(t[i],r[i]);if(o)return o}return z(t.length,r.length)}function ts(n){return by(n)}function by(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Un(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return $n(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return V.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=by(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${by(t.fields[s])}`;return i+"}"}(n.mapValue):$(61005,{value:n})}function Ad(n){switch(Dr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Bh(n);return e?16+Ad(e):16;case 5:return 2*n.stringValue.length;case 6:return $n(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Ad(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return xr(r.fields,(o,s)=>{i+=o.length+Ad(s)}),i}(n.mapValue);default:throw $(13486,{value:n})}}function Ri(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cy(n){return!!n&&"integerValue"in n}function ec(n){return!!n&&"arrayValue"in n}function KC(n){return!!n&&"nullValue"in n}function QC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nd(n){return!!n&&"mapValue"in n}function Uh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[C_])===null||t===void 0?void 0:t.stringValue)===S_}function ja(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return xr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ja(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ja(n.arrayValue.values[t]);return e}return Object.assign({},n)}function D0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===T0}var b0={mapValue:{fields:{[C_]:{stringValue:S_},[es]:{arrayValue:{}}}}};function uB(n){return"nullValue"in n?Sd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ri(Xo.empty(),V.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Uh(n)?b0:{mapValue:{}}:$(35942,{value:n})}function lB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ri(Xo.empty(),V.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?b0:"mapValue"in n?Uh(n)?{mapValue:{}}:yr:$(61959,{value:n})}function YC(n,e){let t=br(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZC(n,e){let t=br(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var st=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ja(t)}setAll(e){let t=ze.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ja(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Nd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Nd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ja(this.value))}};function C0(n){let e=[];return xr(n.fields,(t,r)=>{let i=new ze([t]);if(Nd(r)){let o=C0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Rt(e)}var We=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,q.min(),q.min(),q.min(),st.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,q.min(),q.min(),st.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,q.min(),q.min(),st.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=st.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=st.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var In=class{constructor(e,t){this.position=e,this.inclusive=t}};function JC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=V.comparator(V.fromName(s.referenceValue),t.key):r=br(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function XC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_n(n.position[t],e.position[t]))return!1;return!0}var Pi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function dB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $d=class{},ue=class n extends $d{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ny(e,t,r):t==="array-contains"?new My(e,r):t==="in"?new Hd(e,r):t==="not-in"?new ky(e,r):t==="array-contains-any"?new xy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ry(e,r):new Py(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(br(t,this.value)):t!==null&&Dr(this.value)===Dr(t)&&this.matchesComparison(br(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},me=class n extends $d{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return ns(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function ns(n){return n.op==="and"}function Sy(n){return n.op==="or"}function A_(n){return S0(n)&&ns(n)}function S0(n){for(let e of n.filters)if(e instanceof me)return!1;return!0}function Ay(n){if(n instanceof ue)return n.field.canonicalString()+n.op.toString()+ts(n.value);if(A_(n))return n.filters.map(e=>Ay(e)).join(",");{let e=n.filters.map(t=>Ay(t)).join(",");return`${n.op}(${e})`}}function A0(n,e){return n instanceof ue?function(r,i){return i instanceof ue&&r.op===i.op&&r.field.isEqual(i.field)&&_n(r.value,i.value)}(n,e):n instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&A0(s,i.filters[a]),!0):!1}(n,e):void $(19439)}function N0(n,e){let t=n.filters.concat(e);return me.create(t,n.op)}function R0(n){return n instanceof ue?function(t){return`${t.field.canonicalString()} ${t.op} ${ts(t.value)}`}(n):n instanceof me?function(t){return t.op.toString()+" {"+t.getFilters().map(R0).join(" ,")+"}"}(n):"Filter"}var Ny=class extends ue{constructor(e,t,r){super(e,t,r),this.key=V.fromName(r.referenceValue)}matches(e){let t=V.comparator(e.key,this.key);return this.matchesComparison(t)}},Ry=class extends ue{constructor(e,t){super(e,"in",t),this.keys=P0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Py=class extends ue{constructor(e,t){super(e,"not-in",t),this.keys=P0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function P0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>V.fromName(r.referenceValue))}var My=class extends ue{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ec(t)&&Xa(t.arrayValue,this.value)}},Hd=class extends ue{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Xa(this.value.arrayValue,t)}},ky=class extends ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xa(this.value.arrayValue,t)}},xy=class extends ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ec(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xa(this.value.arrayValue,r))}};var Oy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Fy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Oy(n,e,t,r,i,o,s)}function Mi(n){let e=F(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ay(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Tc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ts(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ts(r)).join(",")),e.Pe=t}return e.Pe}function bc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!A0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XC(n.startAt,e.startAt)&&XC(n.endAt,e.endAt)}function qd(n){return V.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zd(n,e){return n.filters.filter(t=>t instanceof ue&&t.field.isEqual(e))}function eS(n,e,t){let r=Sd,i=!0;for(let o of zd(n,e)){let s=Sd,a=!0;switch(o.op){case"<":case"<=":s=uB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Sd}YC({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];YC({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function tS(n,e,t){let r=yr,i=!0;for(let o of zd(n,e)){let s=yr,a=!0;switch(o.op){case">=":case">":s=lB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=yr}ZC({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];ZC({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Zt=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function M0(n,e,t,r,i,o,s,a){return new Zt(n,e,t,r,i,o,s,a)}function ys(n){return new Zt(n)}function nS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function N_(n){return n.collectionGroup!==null}function $o(n){let e=F(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ve(ze.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Pi(o,r))}),t.has(ze.keyField().canonicalString())||e.Te.push(new Pi(ze.keyField(),r))}return e.Te}function ct(n){let e=F(n);return e.Ie||(e.Ie=x0(e,$o(n))),e.Ie}function k0(n){let e=F(n);return e.de||(e.de=x0(e,n.explicitOrderBy)),e.de}function x0(n,e){if(n.limitType==="F")return Fy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Pi(i.field,o)});let t=n.endAt?new In(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new In(n.startAt.position,n.startAt.inclusive):null;return Fy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ly(n,e){let t=n.filters.concat([e]);return new Zt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wd(n,e,t){return new Zt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cc(n,e){return bc(ct(n),ct(e))&&n.limitType===e.limitType}function O0(n){return`${Mi(ct(n))}|lt:${n.limitType}`}function Vo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>R0(i)).join(", ")}]`),Tc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ts(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ts(i)).join(",")),`Target(${r})`}(ct(n))}; limitType=${n.limitType})`}function Sc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):V.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of $o(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=JC(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,$o(r),i)||r.endAt&&!function(s,a,u){let l=JC(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,$o(r),i))}(n,e)}function F0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function L0(n){return(e,t)=>{let r=!1;for(let i of $o(n)){let o=hB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function hB(n,e,t){let r=n.field.isKeyField()?V.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?br(u,l):$(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:n.dir})}}var Jt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return v0(this.inner)}size(){return this.innerSize}};var fB=new Ce(V.comparator);function bt(){return fB}var V0=new Ce(V.comparator);function xa(...n){let e=V0;for(let t of n)e=e.insert(t.key,t);return e}function j0(n){let e=V0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pn(){return Ba()}function B0(){return Ba()}function Ba(){return new Jt(n=>n.toString(),(n,e)=>n.isEqual(e))}var pB=new Ce(V.comparator),gB=new ve(V.comparator);function J(...n){let e=gB;for(let t of n)e=e.add(t);return e}var mB=new ve(z);function R_(){return mB}function P_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wa(e)?"-0":e}}function U0(n){return{integerValue:""+n}}function $0(n,e){return s0(e)?U0(e):P_(n,e)}var rs=class{constructor(){this._=void 0}};function yB(n,e,t){return n instanceof Cr?function(i,o){let s={fields:{[I0]:{stringValue:_0},[w0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&jh(o)&&(o=Bh(o)),o&&(s.fields[E0]=o),{mapValue:s}}(t,e):n instanceof Hn?q0(n,e):n instanceof qn?z0(n,e):function(i,o){let s=H0(i,o),a=rS(s)+rS(i.Ee);return Cy(s)&&Cy(i.Ee)?U0(a):P_(i.serializer,a)}(n,e)}function vB(n,e,t){return n instanceof Hn?q0(n,e):n instanceof qn?z0(n,e):t}function H0(n,e){return n instanceof Sr?function(r){return Cy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Cr=class extends rs{},Hn=class extends rs{constructor(e){super(),this.elements=e}};function q0(n,e){let t=W0(e);for(let r of n.elements)t.some(i=>_n(i,r))||t.push(r);return{arrayValue:{values:t}}}var qn=class extends rs{constructor(e){super(),this.elements=e}};function z0(n,e){let t=W0(e);for(let r of n.elements)t=t.filter(i=>!_n(i,r));return{arrayValue:{values:t}}}var Sr=class extends rs{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function rS(n){return Se(n.integerValue||n.doubleValue)}function W0(n){return ec(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ki=class{constructor(e,t){this.field=e,this.transform=t}};function _B(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Hn&&i instanceof Hn||r instanceof qn&&i instanceof qn?Wo(r.elements,i.elements,_n):r instanceof Sr&&i instanceof Sr?_n(r.Ee,i.Ee):r instanceof Cr&&i instanceof Cr}(n.transform,e.transform)}var Vy=class{constructor(e,t){this.version=e,this.transformResults=t}},ke=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Rd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var is=class{};function G0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Nr(n.key,ke.none()):new Ar(n.key,n.data,ke.none());{let t=n.data,r=st.empty(),i=new ve(ze.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xt(n.key,r,new Rt(i.toArray()),ke.none())}}function IB(n,e,t){n instanceof Ar?function(i,o,s){let a=i.value.clone(),u=oS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xt?function(i,o,s){if(!Rd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=oS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(K0(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ua(n,e,t,r){return n instanceof Ar?function(o,s,a,u){if(!Rd(o.precondition,s))return a;let l=o.value.clone(),d=sS(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xt?function(o,s,a,u){if(!Rd(o.precondition,s))return a;let l=sS(o.fieldTransforms,u,s),d=s.data;return d.setAll(K0(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Rd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function EB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=H0(r.transform,i||null);o!=null&&(t===null&&(t=st.empty()),t.set(r.field,o))}return t||null}function iS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wo(r,i,(o,s)=>_B(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ar=class extends is{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xt=class extends is{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function K0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function oS(n,e,t){let r=new Map;H(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,vB(s,a,t[i]))}return r}function sS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,yB(o,s,e))}return r}var Nr=class extends is{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},tc=class extends is{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var nc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&IB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ua(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ua(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=B0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=G0(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),J())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(t,r)=>iS(t,r))&&Wo(this.baseMutations,e.baseMutations,(t,r)=>iS(t,r))}},jy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){H(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return pB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var rc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Gd=class{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}};var By=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Be,he;function Q0(n){switch(n){case S.OK:return $(64938);case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return $(15467,{code:n})}}function Y0(n){if(n===void 0)return xe("GRPC error has no .code"),S.UNKNOWN;switch(n){case Be.OK:return S.OK;case Be.CANCELLED:return S.CANCELLED;case Be.UNKNOWN:return S.UNKNOWN;case Be.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Be.INTERNAL:return S.INTERNAL;case Be.UNAVAILABLE:return S.UNAVAILABLE;case Be.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Be.NOT_FOUND:return S.NOT_FOUND;case Be.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Be.ABORTED:return S.ABORTED;case Be.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Be.DATA_LOSS:return S.DATA_LOSS;default:return $(39323,{code:n})}}(he=Be||(Be={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var Kd=null;var wB=new On([4294967295,4294967295],0);function aS(n){let e=v_().encode(n),t=new Qm;return t.update(e),new Uint8Array(t.digest())}function cS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new On([t,r],0),new On([i,o],0)]}var Uy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Si(`Invalid padding: ${t}`);if(r<0)throw new Si(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Si(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Si(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=On.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(On.fromNumber(r)));return i.compare(wB)===1&&(i=new On([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=aS(e),[r,i]=cS(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=aS(e),[r,i]=cS(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Si=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ic=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,oc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(q.min(),i,new Ce(z),bt(),J())}},oc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,J(),J(),J())}};var Ho=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Qd=class{constructor(e,t){this.targetId=e,this.De=t}},Yd=class{constructor(e,t,r=Fe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Zd=class{constructor(){this.ve=0,this.Ce=uS(),this.Fe=Fe.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=J(),t=J(),r=J();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new oc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=uS()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,H(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},$y=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=bt(),this.je=_d(),this.Je=_d(),this.He=new Ce(z)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(qd(o))if(r===0){let s=new V(o.path);this.Xe(t,s,We.newNoDocument(s,q.min()))}else H(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}Kd?.ct(function(d,f,g,m,w){var R,P,O,B,U,W;let le={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},G=f.unchangedNames;return G&&(le.bloomFilter={applied:w===0,hashCount:(R=G?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(B=(O=(P=G?.bits)===null||P===void 0?void 0:P.bitmap)===null||O===void 0?void 0:O.length)!==null&&B!==void 0?B:0,padding:(W=(U=G?.bits)===null||U===void 0?void 0:U.padding)!==null&&W!==void 0?W:0,mightContain:T=>{var v;return(v=m?.mightContain(T))!==null&&v!==void 0&&v}}),le}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=$n(r).toUint8Array()}catch(u){if(u instanceof Ud)return mt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Uy(s,i,o)}catch(u){return mt(u instanceof Si?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&qd(a.target)){let u=new V(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,We.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=J();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new ic(e,t,this.He,this.ze,r);return this.ze=bt(),this.je=_d(),this.Je=_d(),this.He=new Ce(z),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Zd,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new ve(z),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new ve(z),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||x("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Zd),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function _d(){return new Ce(V.comparator)}function uS(){return new Ce(V.comparator)}var TB={asc:"ASCENDING",desc:"DESCENDING"},DB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bB={and:"AND",or:"OR"},Hy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function qy(n,e){return n.useProto3Json||Tc(e)?e:{value:e}}function os(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function CB(n,e){return os(n,e.toTimestamp())}function Oe(n){return H(!!n,49232),q.fromTimestamp(function(t){let r=Un(t);return new Ae(r.seconds,r.nanos)}(n))}function M_(n,e){return zy(n,e).canonicalString()}function zy(n,e){let t=function(i){return new ce(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function J0(n){let e=ce.fromString(n);return H(aA(e),10190,{key:e.toString()}),e}function sc(n,e){return M_(n.databaseId,e.path)}function yn(n,e){let t=J0(e);if(t.get(1)!==n.databaseId.projectId)throw new k(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new V(tA(t))}function X0(n,e){return M_(n.databaseId,e)}function eA(n){let e=J0(n);return e.length===4?ce.emptyPath():tA(e)}function Wy(n){return new ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tA(n){return H(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lS(n,e,t){return{name:sc(n,e),fields:t.value.mapValue.fields}}function $h(n,e,t){let r=yn(n,e.name),i=Oe(e.updateTime),o=e.createTime?Oe(e.createTime):q.min(),s=new st({mapValue:{fields:e.fields}}),a=We.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function SB(n,e){return"found"in e?function(r,i){H(!!i.found,43571),i.found.name,i.found.updateTime;let o=yn(r,i.found.name),s=Oe(i.found.updateTime),a=i.found.createTime?Oe(i.found.createTime):q.min(),u=new st({mapValue:{fields:i.found.fields}});return We.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){H(!!i.missing,3894),H(!!i.readTime,22933);let o=yn(r,i.missing),s=Oe(i.readTime);return We.newNoDocument(o,s)}(n,e):$(7234,{result:e})}function AB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(H(d===void 0||typeof d=="string",58123),Fe.fromBase64String(d||"")):(H(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Fe.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?S.UNKNOWN:Y0(l.code);return new k(d,l.message||"")}(s);t=new Yd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=yn(n,r.document.name),o=Oe(r.document.updateTime),s=r.document.createTime?Oe(r.document.createTime):q.min(),a=new st({mapValue:{fields:r.document.fields}}),u=We.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Ho(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=yn(n,r.document),o=r.readTime?Oe(r.readTime):q.min(),s=We.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ho([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=yn(n,r.document),o=r.removedTargetIds||[];t=new Ho([],o,i,null)}else{if(!("filter"in e))return $(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new By(i,o),a=r.targetId;t=new Qd(a,s)}}return t}function ac(n,e){let t;if(e instanceof Ar)t={update:lS(n,e.key,e.value)};else if(e instanceof Nr)t={delete:sc(n,e.key)};else if(e instanceof Xt)t={update:lS(n,e.key,e.data),updateMask:xB(e.fieldMask)};else{if(!(e instanceof tc))return $(16599,{Rt:e.type});t={verify:sc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Cr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sr)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw $(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:CB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)}(n,e.precondition)),t}function Gy(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?ke.updateTime(Oe(o.updateTime)):o.exists!==void 0?ke.exists(o.exists):ke.none()}(e.currentDocument):ke.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)H(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new Cr;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new Hn(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new qn(d)}else"increment"in a?u=new Sr(s,a.increment):$(16584,{proto:a});let l=ze.fromServerFormat(a.fieldPath);return new ki(l,u)}(n,i)):[];if(e.update){e.update.name;let i=yn(n,e.update.name),o=new st({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Rt(l.map(d=>ze.fromServerFormat(d)))}(e.updateMask);return new Xt(i,o,s,t,r)}return new Ar(i,o,t,r)}if(e.delete){let i=yn(n,e.delete);return new Nr(i,t)}if(e.verify){let i=yn(n,e.verify);return new tc(i,t)}return $(1463,{proto:e})}function NB(n,e){return n&&n.length>0?(H(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Oe(i.updateTime):Oe(o);return s.isEqual(q.min())&&(s=Oe(o)),new Vy(s,i.transformResults||[])}(t,e))):[]}function nA(n,e){return{documents:[X0(n,e.path)]}}function Hh(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=X0(n,i);let o=function(l){if(l.length!==0)return sA(me.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:gr(g.field),direction:PB(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=qy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function rA(n,e,t,r){let{Vt:i,parent:o}=Hh(n,e),s={},a=[],u=0;return t.forEach(l=>{let d=r?l.alias:"aggregate_"+u++;s[d]=l.alias,l.aggregateType==="count"?a.push({alias:d,count:{}}):l.aggregateType==="avg"?a.push({alias:d,avg:{field:gr(l.fieldPath)}}):l.aggregateType==="sum"&&a.push({alias:d,sum:{field:gr(l.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ft:s,parent:o}}function iA(n){let e=eA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){H(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=oA(f);return g instanceof me&&A_(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(w){return new Pi(jo(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Tc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,m=f.values||[];return new In(m,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,m=f.values||[];return new In(m,g)}(t.endAt)),M0(e,i,s,o,a,"F",u,l)}function RB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=jo(t.unaryFilter.field);return ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=jo(t.unaryFilter.field);return ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=jo(t.unaryFilter.field);return ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=jo(t.unaryFilter.field);return ue.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(n):n.fieldFilter!==void 0?function(t){return ue.create(jo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return me.create(t.compositeFilter.filters.map(r=>oA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(t.compositeFilter.op))}(n):$(30097,{filter:n})}function PB(n){return TB[n]}function MB(n){return DB[n]}function kB(n){return bB[n]}function gr(n){return{fieldPath:n.canonicalString()}}function jo(n){return ze.fromServerFormat(n.fieldPath)}function sA(n){return n instanceof ue?function(t){if(t.op==="=="){if(QC(t.value))return{unaryFilter:{field:gr(t.field),op:"IS_NAN"}};if(KC(t.value))return{unaryFilter:{field:gr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(QC(t.value))return{unaryFilter:{field:gr(t.field),op:"IS_NOT_NAN"}};if(KC(t.value))return{unaryFilter:{field:gr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(t.field),op:MB(t.op),value:t.value}}}(n):n instanceof me?function(t){let r=t.getFilters().map(i=>sA(i));return r.length===1?r[0]:{compositeFilter:{op:kB(t.op),filters:r}}}(n):$(54877,{filter:n})}function xB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ss=class n{constructor(e,t,r,i,o=q.min(),s=q.min(),a=Fe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Jd=class{constructor(e){this.gt=e}};function OB(n,e){let t;if(e.document)t=$h(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=V.fromSegments(e.noDocument.path),i=Oi(e.noDocument.readTime);t=We.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $(56709);{let r=V.fromSegments(e.unknownDocument.path),i=Oi(e.unknownDocument.version);t=We.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ae(i[0],i[1]);return q.fromTimestamp(o)}(e.readTime)),t}function dS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Xd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:sc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:os(o,s.version.toTimestamp()),createTime:os(o,s.createTime.toTimestamp())}}(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xi(e.version)};else{if(!e.isUnknownDocument())return $(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:xi(e.version)}}return r}function Xd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oi(n){let e=new Ae(n.seconds,n.nanoseconds);return q.fromTimestamp(e)}function Ti(n,e){let t=(e.baseMutations||[]).map(o=>Gy(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Gy(n.gt,o)),i=Ae.fromMillis(e.localWriteTimeMs);return new nc(e.batchId,i,t,r)}function Oa(n){let e=Oi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Oi(n.lastLimboFreeSnapshotVersion):q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){let s=o.documents.length;return H(s===1,1966,{count:s}),ct(ys(eA(o.documents[0])))}(n.query):function(o){return ct(iA(o))}(n.query),new ss(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Fe.fromBase64String(n.resumeToken))}function cA(n,e){let t=xi(e.snapshotVersion),r=xi(e.lastLimboFreeSnapshotVersion),i;i=qd(e.target)?nA(n.gt,e.target):Hh(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qh(n){let e=iA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wd(e,e.limit,"L"):e}function ty(n,e){return new rc(e.largestBatchId,Gy(n.gt,e.overlayMutation))}function hS(n,e){let t=e.path.lastSegment();return[n,at(e.path.popLast()),t]}function fS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:xi(r.readTime),documentKey:at(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ky=class{getBundleMetadata(e,t){return pS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Oi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return pS(e).put(function(i){return{bundleId:i.id,createTime:xi(Oe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return gS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:qh(o.bundledQuery),readTime:Oi(o.readTime)}}(r)})}saveNamedQuery(e,t){return gS(e).put(function(i){return{name:i.name,readTime:xi(Oe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function pS(n){return Ke(n,Fh)}function gS(n){return Ke(n,Lh)}var eh=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ra(e).get(hS(this.userId,t)).next(r=>r?ty(this.serializer,r):null)}getOverlays(e,t){let r=pn();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new rc(t,s);i.push(this.wt(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(at(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ra(e).Y(Ty,a))}),N.waitFor(o)}getOverlaysForCollection(e,t,r){let i=pn(),o=at(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ra(e).j(Ty,s).next(a=>{for(let u of a){let l=ty(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=pn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ra(e).X({index:h0,range:a},(u,l,d)=>{let f=ty(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}wt(e,t){return Ra(e).put(function(i,o,s){let[a,u,l]=hS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ac(i.gt,s.mutation)}}(this.serializer,this.userId,t))}};function Ra(n){return Ke(n,Vh)}var Qy=class{St(e){return Ke(e,D_)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?Fe.fromUint8Array(r):Fe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Ln=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Wa(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Un(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt($n(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?D0(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Uh(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):$(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=es,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Se(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),V.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Ln.Ut=new Ln;var ko=255;function FB(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function mS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=FB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Yy=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=mS(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=mS(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(ko),this.rn(255)}sn(){this._n(ko),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===ko?(this.rn(ko),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===ko?(this._n(ko),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Zy=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},Jy=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},Di=class{constructor(){this.un=new Yy,this.cn=new Zy(this.un),this.ln=new Jy(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var bi=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:Pd(this.In),directionalValue:Pd(this.dn),orderedDocumentKey:Pd(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function hr(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=yS(n.In,e.In),t!==0?t:(t=yS(n.dn,e.dn),t!==0?t:V.comparator(n.Tn,e.Tn)))}function yS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Pd(n){return im()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function vS(n){return typeof n!="string"?n:function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}var th=class{constructor(e){this.Vn=new ve((t,r)=>ze.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(H(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=my(e);if(t!==void 0&&!this.yn(t))return!1;let r=Ii(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.wn(a,u)||!this.Sn(this.mn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new ve(ze.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Vn(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Vn(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Vn(r.field,r.dir==="asc"?0:1)));return new wr(wr.UNKNOWN_ID,this.collectionId,t,Ko.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function uA(n){var e,t;if(H(n instanceof ue||n instanceof me,20012),n instanceof ue){if(n instanceof Hd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ue.create(n.field,"==",o)))||[];return me.create(i,"or")}return n}let r=n.filters.map(i=>uA(i));return me.create(r,n.op)}function LB(n){if(n.getFilters().length===0)return[];let e=tv(uA(n));return H(lA(e),7391),Xy(e)||ev(e)?[e]:e.getFilters()}function Xy(n){return n instanceof ue}function ev(n){return n instanceof me&&A_(n)}function lA(n){return Xy(n)||ev(n)||function(t){if(t instanceof me&&Sy(t)){for(let r of t.getFilters())if(!Xy(r)&&!ev(r))return!1;return!0}return!1}(n)}function tv(n){if(H(n instanceof ue||n instanceof me,34018),n instanceof ue)return n;if(n.filters.length===1)return tv(n.filters[0]);let e=n.filters.map(r=>tv(r)),t=me.create(e,n.op);return t=nh(t),lA(t)?t:(H(t instanceof me,64498),H(ns(t),40251),H(t.filters.length>1,57927),t.filters.reduce((r,i)=>k_(r,i)))}function k_(n,e){let t;return H(n instanceof ue||n instanceof me,38388),H(e instanceof ue||e instanceof me,25473),t=n instanceof ue?e instanceof ue?function(i,o){return me.create([i,o],"and")}(n,e):_S(n,e):e instanceof ue?_S(e,n):function(i,o){if(H(i.filters.length>0&&o.filters.length>0,48005),ns(i)&&ns(o))return N0(i,o.getFilters());let s=Sy(i)?i:o,a=Sy(i)?o:i,u=s.filters.map(l=>k_(l,a));return me.create(u,"or")}(n,e),nh(t)}function _S(n,e){if(ns(e))return N0(e,n.getFilters());{let t=e.filters.map(r=>k_(n,r));return me.create(t,"or")}}function nh(n){if(H(n instanceof ue||n instanceof me,11850),n instanceof ue)return n;let e=n.getFilters();if(e.length===1)return nh(e[0]);if(S0(n))return n;let t=e.map(i=>nh(i)),r=[];return t.forEach(i=>{i instanceof ue?r.push(i):i instanceof me&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:me.create(r,n.op)}var nv=class{constructor(){this.Dn=new cc}addToCollectionParentIndex(e,t){return this.Dn.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(Bt.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(Bt.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},cc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ve(ce.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ve(ce.comparator)).toArray()}};var IS="IndexedDbIndexManager",Id=new Uint8Array(0),rv=class{constructor(e,t){this.databaseId=t,this.vn=new cc,this.Cn=new Jt(r=>Mi(r),(r,i)=>bc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:at(i)};return ES(e).put(o)}return N.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[XS(t),""],!1,!0);return ES(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(fn(s.parent))}return r})}addFieldIndex(e,t){let r=Pa(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Oo(e);return o.next(a=>{s.put(fS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Pa(e),i=Oo(e),o=xo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Pa(e),r=xo(e),i=Oo(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return N.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new th(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=xo(e),i=!0,o=new Map;return N.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=J(),a=[];return N.forEach(o,(u,l)=>{x(IS,`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(u)} to execute ${Mi(t)}`);let d=function(U,W){let le=my(W);if(le===void 0)return null;for(let G of zd(U,le.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(l,u),f=function(U,W){let le=new Map;for(let G of Ii(W))for(let T of zd(U,G.fieldPath))switch(T.op){case"==":case"in":le.set(G.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return le.set(G.fieldPath.canonicalString(),T.value),Array.from(le.values())}return null}(l,u),g=function(U,W){let le=[],G=!0;for(let T of Ii(W)){let v=T.kind===0?eS(U,T.fieldPath,U.startAt):tS(U,T.fieldPath,U.startAt);le.push(v.value),G&&(G=v.inclusive)}return new In(le,G)}(l,u),m=function(U,W){let le=[],G=!0;for(let T of Ii(W)){let v=T.kind===0?tS(U,T.fieldPath,U.endAt):eS(U,T.fieldPath,U.endAt);le.push(v.value),G&&(G=v.inclusive)}return new In(le,G)}(l,u),w=this.xn(u,l,g),R=this.xn(u,l,m),P=this.On(u,l,f),O=this.Nn(u.indexId,d,w,g.inclusive,R,m.inclusive,P);return N.forEach(O,B=>r.H(B,t.limit).next(U=>{U.forEach(W=>{let le=V.fromSegments(W.documentKey);s.has(le)||(s=s.add(le),a.push(le))})}))}).next(()=>a)}return N.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=LB(me.create(e.filters,"and")).map(r=>Fy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let g=t?this.Bn(t[f/l]):Id,m=this.Ln(e,g,r[f%l],i),w=this.kn(e,g,o[f%l],s),R=a.map(P=>this.Ln(e,g,P,!0));d.push(...this.createRange(m,w,R))}return d}Ln(e,t,r,i){let o=new bi(e,V.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new bi(e,V.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new th(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return N.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new ve(ze.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new Di;for(let i of Ii(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);Ln.Ut.bt(o,s)}return r.an()}Bn(e){let t=new Di;return Ln.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new Di;return Ln.Ut.bt(Ri(this.databaseId,t),r.hn(function(o){let s=Ii(o);return s.length===0?0:s[s.length-1].kind}(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new Di);let o=0;for(let s of Ii(e)){let a=r[o++];for(let u of i)if(this.$n(t,s.fieldPath)&&ec(a))i=this.Un(i,s,a);else{let l=u.hn(s.kind);Ln.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Di;u.seed(a.an()),Ln.Ut.bt(s,u.hn(t.kind)),o.push(u)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof ue&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Pa(e),i=Oo(e);return(t?r.j(wy,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return N.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new Ko(f.sequenceNumber,new Bt(Oi(f.readTime),new V(fn(f.documentKey)),f.largestBatchId)):Ko.empty(),m=d.fields.map(([w,R])=>new Vn(ze.fromServerFormat(w),R));return new wr(d.indexId,d.collectionGroup,m,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:z(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Pa(e),o=Oo(e);return this.Wn(e).next(s=>i.j(wy,IDBKeyRange.bound(t,t)).next(a=>N.forEach(a,u=>o.put(fS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return N.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?N.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,u=>this.Gn(e,i,u).next(l=>{let d=this.zn(o,u);return l.isEqual(d)?N.resolve():this.jn(e,o,u,l,d)}))))})}Jn(e,t,r,i){return xo(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return xo(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=xo(e),o=new ve(hr);return i.X({index:d0,range:IDBKeyRange.only([r.indexId,this.uid,Pd(this.Qn(r,t))])},(s,a)=>{o=o.add(new bi(r.indexId,t,vS(a.arrayValue),vS(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new ve(hr),i=this.qn(t,e);if(i==null)return r;let o=my(t);if(o!=null){let s=e.data.field(o.fieldPath);if(ec(s))for(let a of s.arrayValue.values||[])r=r.add(new bi(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new bi(t.indexId,e.key,Id,i));return r}jn(e,t,r,i,o){x(IS,"Updating index entries for document '%s'",t.key);let s=[];return function(u,l,d,f,g){let m=u.getIterator(),w=l.getIterator(),R=Mo(m),P=Mo(w);for(;R||P;){let O=!1,B=!1;if(R&&P){let U=d(R,P);U<0?B=!0:U>0&&(O=!0)}else R!=null?B=!0:O=!0;O?(f(P),P=Mo(w)):B?(g(R),R=Mo(m)):(R=Mo(m),P=Mo(w))}}(i,o,hr,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),N.waitFor(s)}Wn(e){let t=1;return Oo(e).X({index:l0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>hr(s,a)).filter((s,a,u)=>!a||hr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=hr(s,e),u=hr(s,t);if(a===0)i[0]=e.En();else if(a>0&&u<0)i.push(s),i.push(s.En());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,Id,V.empty()),u=i[s+1].Rn(this.uid,Id,V.empty());o.push(IDBKeyRange.bound(a,u))}return o}Yn(e,t){return hr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wS)}getMinOffset(e,t){return N.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||$(44426))).next(wS)}};function ES(n){return Ke(n,Qa)}function xo(n){return Ke(n,Va)}function Pa(n){return Ke(n,T_)}function Oo(n){return Ke(n,La)}function wS(n){H(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;I_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Bt(e.readTime,e.documentKey,t)}var TS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dA=41943040,Dt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function hA(n,e,t){let r=n.store(Yt),i=n.store(Qo),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.X({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{H(a===1,47070,{batchId:t.batchId})}));let l=[];for(let d of t.mutations){let f=a0(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return N.waitFor(o).next(()=>l)}function rh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $(14731);e=n.noDocument}return JSON.stringify(e).length}Dt.DEFAULT_COLLECTION_PERCENTILE=10,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dt.DEFAULT=new Dt(dA,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dt.DISABLED=new Dt(-1,0,0);var ih=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){H(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fr(e).X({index:Ci,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Bo(e),s=fr(e);return s.add({}).next(a=>{H(typeof a=="number",49019);let u=new nc(a,t,r,i),l=function(m,w,R){let P=R.baseMutations.map(B=>ac(m.gt,B)),O=R.mutations.map(B=>ac(m.gt,B));return{userId:w,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:P,mutations:O}}(this.serializer,this.userId,u),d=[],f=new ve((g,m)=>z(g.canonicalString(),m.canonicalString()));for(let g of i){let m=a0(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(m,Vj))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Zn[a]=u.keys()}),N.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return fr(e).get(t).next(r=>r?(H(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Ti(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?N.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fr(e).X({index:Ci,range:i},(s,a,u)=>{a.userId===this.userId&&(H(a.batchId>=r,47524,{er:r}),o=Ti(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=_r;return fr(e).X({index:Ci,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,_r],[this.userId,Number.POSITIVE_INFINITY]);return fr(e).j(Ci,t).next(r=>r.map(i=>Ti(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=bd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Bo(e).X({range:i},(s,a,u)=>{let[l,d,f]=s,g=fn(d);if(l===this.userId&&t.path.isEqual(g))return fr(e).get(f).next(m=>{if(!m)throw $(61480,{tr:s,batchId:f});H(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:f}),o.push(Ti(this.serializer,m))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ve(z),i=[];return t.forEach(o=>{let s=bd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Bo(e).X({range:a},(l,d,f)=>{let[g,m,w]=l,R=fn(m);g===this.userId&&o.path.isEqual(R)?r=r.add(w):f.done()});i.push(u)}),N.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=bd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ve(z);return Bo(e).X({range:s},(u,l,d)=>{let[f,g,m]=u,w=fn(g);f===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(m)):d.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(fr(e).get(o).next(s=>{if(s===null)throw $(35274,{batchId:o});H(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Ti(this.serializer,s))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return hA(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return N.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Bo(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=fn(o[1]);i.push(u)}else a.done()}).next(()=>{H(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return fA(e,this.userId,t)}sr(e){return pA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:_r,lastStreamToken:""})}};function fA(n,e,t){let r=bd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Bo(n).X({range:o,Z:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function fr(n){return Ke(n,Yt)}function Bo(n){return Ke(n,Qo)}function pA(n){return Ke(n,Ga)}var as=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var iv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new as(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>q.fromTimestamp(new Ae(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fo(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(H(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Fo(e).X((s,a)=>{let u=Oa(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>N.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Fo(e).X((r,i)=>{let o=Oa(i);t(o)})}cr(e){return DS(e).get(jd).next(t=>(H(t!==null,2888),t))}lr(e,t){return DS(e).put(jd,t)}hr(e,t){return Fo(e).put(cA(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Mi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Fo(e).X({range:i,index:u0},(s,a,u)=>{let l=Oa(a);bc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=mr(e);return t.forEach(s=>{let a=at(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),N.waitFor(i)}removeMatchingKeys(e,t,r){let i=mr(e);return N.forEach(t,o=>{let s=at(o.path);return N.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=mr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=mr(e),o=J();return i.X({range:r,Z:!0},(s,a,u)=>{let l=fn(s[1]),d=new V(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=at(t.path),i=IDBKeyRange.bound([r],[XS(r)],!1,!0),o=0;return mr(e).X({index:w_,Z:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return Fo(e).get(t).next(r=>r?Oa(r):null)}};function Fo(n){return Ke(n,Yo)}function DS(n){return Ke(n,Ni)}function mr(n){return Ke(n,Zo)}var bS="LruGarbageCollector",gA=1048576;function CS([n,e],[t,r]){let i=z(n,t);return i===0?z(e,r):i}var ov=class{constructor(e){this.Tr=e,this.buffer=new ve(CS),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();CS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},oh=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){x(bS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){kr(t)?x(bS,"Ignoring IndexedDB error during garbage collection: ",t):yield Mr(t)}yield this.Rr(3e5)}))}},sv=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return N.resolve(Nt.ue);let r=new ov(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(TS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TS):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Lo()<=ie.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function mA(n,e){return new sv(n,e)}var av=class{constructor(e,t){this.db=e,this.garbageCollector=mA(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return Ed(e,r)}removeReference(e,t,r){return Ed(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ed(e,t)}Sr(e,t){return function(i,o){let s=!1;return pA(i).ee(a=>fA(i,a,o).next(u=>(u&&(s=!0),N.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let u=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,q.min()),mr(e).delete(function(f){return[0,at(f.path)]}(s))))});i.push(u)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ed(e,t)}wr(e,t){let r=mr(e),i,o=Nt.ue;return r.X({index:w_},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Nt.ue&&t(new V(fn(i)),o),o=l,i=u):o=Nt.ue}).next(()=>{o!==Nt.ue&&t(new V(fn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ed(n,e){return mr(n).put(function(r,i){return{targetId:0,path:at(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var sh=class{constructor(){this.changes=new Jt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var cv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _i(e).put(r)}removeEntry(e,t,r){return _i(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Xd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=We.newInvalidDocument(t);return _i(e).X({index:Cd,range:IDBKeyRange.only(Ma(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:We.newInvalidDocument(t)};return _i(e).X({index:Cd,range:IDBKeyRange.only(Ma(t))},(i,o)=>{r={document:this.Dr(t,o),size:rh(o)}}).next(()=>r)}getEntries(e,t){let r=bt();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=bt(),i=new Ce(V.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,rh(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return N.resolve();let i=new ve(NS);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Ma(i.first()),Ma(i.last())),s=i.getIterator(),a=s.getNext();return _i(e).X({index:Cd,range:o},(u,l,d)=>{let f=V.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&NS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.G(Ma(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Xd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _i(e).j(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=bt();for(let f of l){let g=this.Dr(V.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Sc(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=bt(),s=AS(t,r),a=AS(t,Bt.max());return _i(e).X({index:c0,range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.Dr(V.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new uv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return SS(e).get(Ey).next(t=>(H(!!t,20021),t))}br(e,t){return SS(e).put(Ey,t)}Dr(e,t){if(t){let r=OB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(q.min())))return r}return We.newInvalidDocument(e)}};function yA(n){return new cv(n)}var uv=class extends sh{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Jt(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new ve((o,s)=>z(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=dS(this.Or.serializer,s);i=i.add(o.path.popLast());let l=rh(u);r+=l-a.size,t.push(this.Or.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=dS(this.Or.serializer,s.convertToNoDocument(q.min()));t.push(this.Or.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),N.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function SS(n){return Ke(n,Ka)}function _i(n){return Ke(n,Vd)}function Ma(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AS(n,e){let t=e.documentKey.path.toArray();return[n,Xd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function NS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=z(t[o],r[o]),i)return i;return i=z(t.length,r.length),i||(i=z(t[t.length-2],r[r.length-2]),i||z(t[t.length-1],r[r.length-1]))}var lv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ah=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ua(r.mutation,i,Rt.empty(),Ae.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,J()).next(()=>r))}getLocalViewOfDocuments(e,t,r=J()){let i=pn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=xa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=pn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,J()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=bt(),s=Ba(),a=function(){return Ba()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Xt)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Ua(d.mutation,l,d.mutation.getFieldMask(),Ae.now())):s.set(l.key,Rt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new lv(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ba(),i=new Ce((s,a)=>s-a),o=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||Rt.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||J()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=B0();d.forEach(g=>{if(!o.has(g)){let m=G0(t.get(g),r.get(g));m!==null&&f.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return V.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):N_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(pn()),a=Go,u=o;return s.next(l=>N.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?N.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,J())).next(d=>({batchId:a,changes:j0(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next(r=>{let i=xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=xa();return this.indexManager.getCollectionParents(e,o).next(a=>N.forEach(a,u=>{let l=function(f,g){return new Zt(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,We.newInvalidDocument(d)))});let a=xa();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&Ua(d.mutation,l,Rt.empty(),Ae.now()),Sc(t,l)&&(a=a.insert(u,l))}),a})}};var dv=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return N.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Oe(i.createTime)}}(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:qh(i.bundledQuery),readTime:Oe(i.readTime)}}(t)),N.resolve()}};var hv=class{constructor(){this.overlays=new Ce(V.comparator),this.kr=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=pn();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=pn(),o=t.length+1,s=new V(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ce((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=pn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=pn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return N.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new rc(t,r));let o=this.kr.get(t);o===void 0&&(o=J(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var fv=class{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var uc=class{constructor(){this.qr=new ve(Ue.Qr),this.$r=new ve(Ue.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ue(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ue(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new V(new ce([])),r=new Ue(t,e),i=new Ue(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new V(new ce([])),r=new Ue(t,e),i=new Ue(t,e+1),o=J();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ue(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return V.comparator(e.key,t.key)||z(e.Hr,t.Hr)}static Ur(e,t){return z(e.Hr,t.Hr)||V.comparator(e.key,t.key)}};var pv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new ve(Ue.Qr)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new nc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ue(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,t){return N.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?_r:this.er-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ue(t,0),i=new Ue(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ve(z);return t.forEach(i=>{let o=new Ue(i,0),s=new Ue(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),N.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;V.isDocumentKey(o)||(o=o.child(""));let s=new Ue(new V(o),0),a=new ve(z);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),N.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){H(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return N.forEach(t.mutations,i=>{let o=new Ue(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ue(t,0),i=this.Yr.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var gv=class{constructor(e){this.ni=e,this.docs=function(){return new Ce(V.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():We.newInvalidDocument(t))}getEntries(e,t){let r=bt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():We.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=bt(),s=t.path,a=new V(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||I_(r0(d),r)<=0||(i.has(d.key)||Sc(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){$(9500)}ri(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mv(this)}getSize(e){return N.resolve(this.size)}},mv=class extends sh{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var yv=class{constructor(e){this.persistence=e,this.ii=new Jt(t=>Mi(t),bc),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.si=0,this.oi=new uc,this.targetCount=0,this._i=as.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),N.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new as(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.hr(t),N.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this.oi.containsKey(t))}};var lc=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Nt(0),this.ci=!1,this.ci=!0,this.li=new fv,this.referenceDelegate=e(this),this.hi=new yv(this),this.indexManager=new nv,this.remoteDocumentCache=function(i){return new gv(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Jd(t),this.Ti=new dv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new pv(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);let i=new vv(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return N.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},vv=class extends Od{constructor(e){super(),this.currentSequenceNumber=e}},ch=class n{constructor(e){this.persistence=e,this.Ai=new uc,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw $(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),N.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.mi,r=>{let i=V.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,q.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return N.or([()=>N.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},uh=class n{constructor(e,t){this.persistence=e,this.gi=new Jt(r=>at(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=mA(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return N.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return N.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?N.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),N.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),N.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ad(e.data.value)),t}Sr(e,t,r){return N.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var _v=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Fd("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore(Dc)}(e),function(u){u.createObjectStore(Ga,{keyPath:Lj}),u.createObjectStore(Yt,{keyPath:HC,autoIncrement:!0}).createIndex(Ci,qC,{unique:!0}),u.createObjectStore(Qo)}(e),RS(e),function(u){u.createObjectStore(Ei)}(e));let s=N.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(Zo),u.deleteObjectStore(Yo),u.deleteObjectStore(Ni)}(e),RS(e)),s=s.next(()=>function(u){let l=u.store(Ni),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return l.put(jd,d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store(Yt).j().next(f=>{u.deleteObjectStore(Yt),u.createObjectStore(Yt,{keyPath:HC,autoIncrement:!0}).createIndex(Ci,qC,{unique:!0});let g=l.store(Yt),m=f.map(w=>g.put(w));return N.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(Jo,{keyPath:Wj})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore(Ka)}(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(Fh,{keyPath:Gj})})(e),function(u){u.createObjectStore(Lh,{keyPath:Kj})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(Vh,{keyPath:tB});l.createIndex(Ty,nB,{unique:!1}),l.createIndex(h0,rB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore(Vd,{keyPath:jj});l.createIndex(Cd,Bj),l.createIndex(c0,Uj)}(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(Ei))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore(T_,{keyPath:Qj,autoIncrement:!0}).createIndex(wy,Yj,{unique:!1}),u.createObjectStore(La,{keyPath:Zj}).createIndex(l0,Jj,{unique:!1}),u.createObjectStore(Va,{keyPath:Xj}).createIndex(d0,eB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(La).clear()}).next(()=>{t.objectStore(Va).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(D_,{keyPath:iB})})(e)})),r<18&&i>=18&&im()&&(s=s.next(()=>{t.objectStore(La).clear()}).next(()=>{t.objectStore(Va).clear()})),s}yi(e){let t=0;return e.store(Ei).X((r,i)=>{t+=rh(i)}).next(()=>{let r={byteSize:t};return e.store(Ka).put(Ey,r)})}pi(e){let t=e.store(Ga),r=e.store(Yt);return t.j().next(i=>N.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,_r],[o.userId,o.lastAcknowledgedBatchId]);return r.j(Ci,s).next(a=>N.forEach(a,u=>{H(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});let l=Ti(this.serializer,u);return hA(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(Zo),r=e.store(Ei);return e.store(Ni).get(jd).next(i=>{let o=[];return r.X((s,a)=>{let u=new ce(s),l=function(f){return[0,at(f)]}(u);o.push(t.get(l).next(d=>d?N.resolve():(f=>t.put({targetId:0,path:at(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>N.waitFor(o))})}Si(e,t){e.createObjectStore(Qa,{keyPath:zj});let r=t.store(Qa),i=new cc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:at(u)})}};return t.store(Ei).X({Z:!0},(s,a)=>{let u=new ce(s);return o(u.popLast())}).next(()=>t.store(Qo).X({Z:!0},([s,a,u],l)=>{let d=fn(a);return o(d.popLast())}))}bi(e){let t=e.store(Yo);return t.X((r,i)=>{let o=Oa(i),s=cA(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(Ei),i=[];return r.X((o,s)=>{let a=t.store(Vd),u=function(f){return f.document?new V(ce.fromString(f.document.name).popFirst(5)):f.noDocument?V.fromSegments(f.noDocument.path):f.unknownDocument?V.fromSegments(f.unknownDocument.path):$(36783)}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>N.waitFor(i))}Ci(e,t){let r=t.store(Yt),i=yA(this.serializer),o=new lc(ch.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:J();Ti(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),N.forEach(a,(u,l)=>{let d=new $e(l),f=eh.yt(this.serializer,d),g=o.getIndexManager(d),m=ih.yt(d,this.serializer,g,o.referenceDelegate);return new ah(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Ya(t,Nt.ue),u).next()})})}};function RS(n){n.createObjectStore(Zo,{keyPath:Hj}).createIndex(w_,qj,{unique:!0}),n.createObjectStore(Yo,{keyPath:"targetId"}).createIndex(u0,$j,{unique:!0}),n.createObjectStore(Ni)}var pr="IndexedDbPersistence",ny=18e5,ry=5e3,iy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vA="main",Iv=class n{constructor(e,t,r,i,o,s,a,u,l,d,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=d,this.Oi=f,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=g=>Promise.resolve(),!n.C())throw new k(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new av(this,i),this.Qi=t+vA,this.serializer=new Jd(u),this.$i=new Tr(this.Qi,this.Oi,new _v(this.serializer)),this.li=new Qy,this.hi=new iv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yA(this.serializer),this.Ti=new Ky,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,d===!1&&xe(pr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(S.FAILED_PRECONDITION,iy);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Nt(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>_(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>_(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(kr(e))return x(pr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return x(pr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return ka(e).get(Po).next(t=>N.resolve(this.Xi(t)))}es(e){return wd(e).delete(this.clientId)}ts(){return _(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,ny)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Ke(t,Jo);return r.j().next(i=>{let o=this.rs(i,ny),s=i.filter(a=>o.indexOf(a)===-1);return N.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?N.resolve(!0):ka(e).get(Po).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,ry)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new k(S.FAILED_PRECONDITION,iy);return!1}}return!(!this.networkEnabled||!this.inForeground)||wd(e).j().next(r=>this.rs(r,ry).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&x(pr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return _(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[Dc,Jo],e=>{let t=new Ya(e,Nt.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>wd(e).j().next(t=>this.rs(t,ny).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return ih.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rv(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return eh.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){x(pr,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===18?aB:u===17?m0:u===16?sB:u===15?b_:u===14?g0:u===13?p0:u===12?oB:u===11?f0:void $(60245)}(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new Ya(a,this.ui?this.ui.next():Nt.ue),t==="readwrite-primary"?this.Ji(s).next(u=>!!u||this.Hi(s)).next(u=>{if(!u)throw xe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new k(S.FAILED_PRECONDITION,i0);return r(s)}).next(u=>this.Zi(s).next(()=>u)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return ka(e).get(Po).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,ry)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(S.FAILED_PRECONDITION,iy)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ka(e).put(Po,t)}static C(){return Tr.C()}Yi(e){let t=ka(e);return t.get(Po).next(r=>this.Xi(r)?(x(pr,"Releasing primary lease."),t.delete(Po)):N.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(xe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;rm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return x(pr,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xe(pr,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){xe("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ka(n){return Ke(n,Dc)}function wd(n){return Ke(n,Jo)}function x_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Ev=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=J(),i=J();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var wv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lh=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return rm()?8:o0(it())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new wv;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Lo()<=ie.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",Vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),N.resolve()):(Lo()<=ie.DEBUG&&x("QueryEngine","Query:",Vo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Lo()<=ie.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",Vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ct(t))):N.resolve())}ps(e,t){if(nS(t))return N.resolve(null);let r=ct(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Wd(t,null,"F"),r=ct(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=J(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,Wd(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return nS(t)||i.isEqual(q.min())?N.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?N.resolve(null):(Lo()<=ie.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vo(t)),this.vs(e,s,t,n0(i,Go)).next(a=>a))})}bs(e,t){let r=new ve(L0(e));return t.forEach((i,o)=>{Sc(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Lo()<=ie.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Vo(t)),this.gs.getDocumentsMatchingQuery(e,t,Bt.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var O_="LocalStore",VB=3e8,Tv=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ce(z),this.Ms=new Jt(o=>Mi(o),bc),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ah(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function _A(n,e,t,r){return new Tv(n,e,t,r)}function IA(n,e){return _(this,null,function*(){let t=F(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=J();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function jB(n,e){let t=F(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),m=N.resolve();return g.forEach(w=>{m=m.next(()=>d.getEntry(u,w)).next(R=>{let P=l.docVersions.get(w);H(P!==null,48541),R.version.compareTo(P)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=J();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function EA(n){let e=F(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function BB(n,e){let t=F(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,f)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Fe.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(R,P,O){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=VB?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,m,d)&&a.push(t.hi.updateTargetData(o,m))});let u=bt(),l=J();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(wA(o,s,e.documentUpdates).next(d=>{u=d.Ls,l=d.ks})),!r.isEqual(q.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(f=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return N.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function wA(n,e,t){let r=J(),i=J();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=bt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(q.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):x(O_,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function UB(n,e){let t=F(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=_r),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cs(n,e){let t=F(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new ss(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function us(n,e,t){return _(this,null,function*(){let r=F(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!kr(s))throw s;x(O_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function dh(n,e,t){let r=F(n),i=q.min(),o=J();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=F(u),g=f.Ms.get(d);return g!==void 0?N.resolve(f.Fs.get(g)):f.hi.getTargetData(l,d)}(r,s,ct(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:q.min(),t?o:J())).next(a=>(bA(r,F0(e),a),{documents:a,qs:o})))}function TA(n,e){let t=F(n),r=F(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function DA(n,e){let t=F(n),r=t.xs.get(e)||q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,n0(r,Go),Number.MAX_SAFE_INTEGER)).then(i=>(bA(t,e,i),i))}function bA(n,e,t){let r=n.xs.get(e)||q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function $B(n,e,t,r){return _(this,null,function*(){let i=F(n),o=J(),s=bt();for(let l of t){let d=e.Qs(l.metadata.name);l.document&&(o=o.add(d));let f=e.$s(l);f.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(d,f)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),u=yield cs(i,function(d){return ct(ys(ce.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>wA(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.hi.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.hi.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ls,d.ks)).next(()=>d.Ls)))})}function HB(r,i){return _(this,arguments,function*(n,e,t=J()){let o=yield cs(n,ct(qh(e.bundledQuery))),s=F(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Oe(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(Fe.EMPTY_BYTE_STRING,u);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var CA="firestore_clients";function PS(n,e){return`${CA}_${n}_${e}`}var SA="firestore_mutations";function MS(n,e,t){let r=`${SA}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var AA="firestore_targets";function oy(n,e){return`${AA}_${n}_${e}`}var hn="SharedClientState",hh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(xe(hn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},$a=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(xe(hn,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=R_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=s0(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(xe(hn,`Failed to parse client data for instance '${e}': ${t}`),null)}},Dv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(xe(hn,`Failed to parse online state: ${e}`),null)}},dc=class{constructor(){this.activeTargetIds=R_()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Ha=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Ce(z),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=PS(this.persistenceKey,this.js),this.eo=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new dc),this.no=new RegExp(`^${CA}_${s}_([^_]*)$`),this.ro=new RegExp(`^${SA}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${AA}_${s}_(\\d+)$`),this.so=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.oo=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return _(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(PS(this.persistenceKey,r));if(i){let o=fh.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(oy(this.persistenceKey,e));if(i){let o=$a.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(oy(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return x(hn,"READ",e,t),t}setItem(e,t){x(hn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){x(hn,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(x(hn,"EVENT",t.key,t.newValue),t.key===this.Xs)return void xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>_(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=function(o){let s=Nt.ue;if(o!=null)try{let a=JSON.parse(o);H(typeof a=="number",30636,{wo:o}),s=a}catch(a){xe(hn,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Nt.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new hh(this.currentUser,e,t,r),o=MS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=MS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=oy(this.persistenceKey,e),o=new $a(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return fh.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return hh.Ks(new $e(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return $a.Ks(i,t)}ao(e){return Dv.Ks(e)}So(e){return JSON.parse(e)}fo(e){return _(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);x(hn,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=R_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},ph=class{constructor(){this.Fo=new dc,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new dc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var bv=class{xo(e){}shutdown(){}};var kS="ConnectivityMonitor",gh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){x(kS,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){x(kS,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Td=null;function Cv(){return Td===null?Td=function(){return 268435456+Math.round(2147483648*Math.random())}():Td++,"0x"+Td.toString(16)}var sy="RestConnection",qB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Sv=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Ja?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Cv(),a=this.Go(e,t.toUriEncodedString());x(sy,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),d=sr(l);return this.jo(e,a,u,r,d).then(f=>(x(sy,`Received RPC '${e}' ${s}: `,f),f),f=>{throw mt(sy,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ms}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=qB[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Av=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ot="WebChannelConnection",Nv=class extends Sv{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=Cv();return new Promise((a,u)=>{let l=new Ym;l.setWithCredentials(!0),l.listenOnce(Zm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Na.NO_ERROR:let f=l.getResponseJson();x(ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Na.TIMEOUT:x(ot,`RPC '${e}' ${s} timed out`),u(new k(S.DEADLINE_EXCEEDED,"Request time out"));break;case Na.HTTP_ERROR:let g=l.getStatus();if(x(ot,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let w=m?.error;if(w&&w.status&&w.message){let R=function(O){let B=O.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(B)>=0?B:S.UNKNOWN}(w.status);u(new k(R,w.message))}else u(new k(S.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new k(S.UNAVAILABLE,"Connection failed."));break;default:$(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{x(ot,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);x(ot,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}P_(e,t,r){let i=Cv(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ey(),a=Xm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");x(ot,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u);this.T_(f);let g=!1,m=!1,w=new Av({Ho:P=>{m?x(ot,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(x(ot,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),x(ot,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Yo:()=>f.close()}),R=(P,O,B)=>{P.listen(O,U=>{try{B(U)}catch(W){setTimeout(()=>{throw W},0)}})};return R(f,Ro.EventType.OPEN,()=>{m||(x(ot,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),R(f,Ro.EventType.CLOSE,()=>{m||(m=!0,x(ot,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(f))}),R(f,Ro.EventType.ERROR,P=>{m||(m=!0,mt(ot,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),w.__(new k(S.UNAVAILABLE,"The operation could not be completed")))}),R(f,Ro.EventType.MESSAGE,P=>{var O;if(!m){let B=P.data[0];H(!!B,16349);let U=B,W=U?.error||((O=U[0])===null||O===void 0?void 0:O.error);if(W){x(ot,`RPC '${e}' stream ${i} received error:`,W);let le=W.status,G=function(E){let D=Be[E];if(D!==void 0)return Y0(D)}(le),T=W.message;G===void 0&&(G=S.INTERNAL,T="Unknown error status: "+le+" with message "+W.message),m=!0,w.__(new k(G,T)),f.close()}else x(ot,`RPC '${e}' stream ${i} received:`,B),w.a_(B)}}),R(a,Jm.STAT_EVENT,P=>{P.stat===vd.PROXY?x(ot,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===vd.NOPROXY&&x(ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function NA(){return typeof window<"u"?window:null}function Md(){return typeof document<"u"?document:null}function Hi(n){return new Hy(n,!0)}var hc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var xS="PersistentStream",mh=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new hc(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(xe(t.toString()),xe("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new k(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return x(xS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(x(xS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Rv=class extends mh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=AB(this.serializer,e),r=function(o){if(!("targetChange"in o))return q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?q.min():s.readTime?Oe(s.readTime):q.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Wy(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=qd(u)?{documents:nA(o,u)}:{query:Hh(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Z0(o,s.resumeToken);let l=qy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(q.min())>0){a.readTime=os(o,s.snapshotVersion.toTimestamp());let l=qy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=RB(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Wy(this.serializer),t.removeTarget=e,this.k_(t)}},Pv=class extends mh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return H(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,H(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){H(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=NB(e.writeResults,e.commitTime),r=Oe(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Wy(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>ac(this.serializer,r))};this.k_(t)}};var Mv=class{},kv=class extends Mv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new k(S.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,zy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(S.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,zy(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(S.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},xv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xe(t),this._a=!1):x("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Fi="RemoteStore",Ov=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Or(this)&&(x(Fi,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=F(u);l.Ia.add(4),yield vs(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Ac(l)})}(this))}))}),this.Aa=new xv(r,i)}};function Ac(n){return _(this,null,function*(){if(Or(n))for(let e of n.da)yield e(!0)})}function vs(n){return _(this,null,function*(){for(let e of n.da)yield e(!1)})}function zh(n,e){let t=F(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),V_(t)?L_(t):Is(t).x_()&&F_(t,e))}function ls(n,e){let t=F(n),r=Is(t);t.Ta.delete(e),r.x_()&&RA(t,e),t.Ta.size===0&&(r.x_()?r.B_():Or(t)&&t.Aa.set("Unknown"))}function F_(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Is(n).H_(e)}function RA(n,e){n.Ra.$e(e),Is(n).Y_(e)}function L_(n){n.Ra=new $y({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Is(n).start(),n.Aa.aa()}function V_(n){return Or(n)&&!Is(n).M_()&&n.Ta.size>0}function Or(n){return F(n).Ia.size===0}function PA(n){n.Ra=void 0}function zB(n){return _(this,null,function*(){n.Aa.set("Online")})}function WB(n){return _(this,null,function*(){n.Ta.forEach((e,t)=>{F_(n,e)})})}function GB(n,e){return _(this,null,function*(){PA(n),V_(n)?(n.Aa.la(e),L_(n)):n.Aa.set("Unknown")})}function KB(n,e,t){return _(this,null,function*(){if(n.Aa.set("Online"),e instanceof Yd&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){x(Fi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yh(n,r)}else if(e instanceof Ho?n.Ra.Ye(e):e instanceof Qd?n.Ra.it(e):n.Ra.et(e),!t.isEqual(q.min()))try{let r=yield EA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.Ta.get(l);d&&o.Ta.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.Ta.get(u);if(!d)return;o.Ta.set(u,d.withResumeToken(Fe.EMPTY_BYTE_STRING,d.snapshotVersion)),RA(o,u);let f=new ss(d.target,u,l,d.sequenceNumber);F_(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){x(Fi,"Failed to raise snapshot:",r),yield yh(n,r)}})}function yh(n,e,t){return _(this,null,function*(){if(!kr(e))throw e;n.Ia.add(1),yield vs(n),n.Aa.set("Offline"),t||(t=()=>EA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){x(Fi,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Ac(n)}))})}function MA(n,e){return e().catch(t=>yh(n,t,e))}function _s(n){return _(this,null,function*(){let e=F(n),t=Rr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:_r;for(;QB(e);)try{let i=yield UB(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,YB(e,i)}catch(i){yield yh(e,i)}kA(e)&&xA(e)})}function QB(n){return Or(n)&&n.Pa.length<10}function YB(n,e){n.Pa.push(e);let t=Rr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function kA(n){return Or(n)&&!Rr(n).M_()&&n.Pa.length>0}function xA(n){Rr(n).start()}function ZB(n){return _(this,null,function*(){Rr(n).na()})}function JB(n){return _(this,null,function*(){let e=Rr(n);for(let t of n.Pa)e.X_(t.mutations)})}function XB(n,e,t){return _(this,null,function*(){let r=n.Pa.shift(),i=jy.from(r,e,t);yield MA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _s(n)})}function eU(n,e){return _(this,null,function*(){e&&Rr(n).Z_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return Q0(s)&&s!==S.ABORTED}(i.code)){let o=r.Pa.shift();Rr(r).N_(),yield MA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _s(r)}})}(n,e)),kA(n)&&xA(n)})}function OS(n,e){return _(this,null,function*(){let t=F(n);t.asyncQueue.verifyOperationInProgress(),x(Fi,"RemoteStore received new credentials");let r=Or(t);t.Ia.add(3),yield vs(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Ac(t)})}function Fv(n,e){return _(this,null,function*(){let t=F(n);e?(t.Ia.delete(2),yield Ac(t)):e||(t.Ia.add(2),yield vs(t),t.Aa.set("Unknown"))})}function Is(n){return n.Va||(n.Va=function(t,r,i){let o=F(t);return o.ia(),new Rv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:zB.bind(null,n),e_:WB.bind(null,n),n_:GB.bind(null,n),J_:KB.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.Va.N_(),V_(n)?L_(n):n.Aa.set("Unknown")):(yield n.Va.stop(),PA(n))}))),n.Va}function Rr(n){return n.ma||(n.ma=function(t,r,i){let o=F(t);return o.ia(),new Pv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:ZB.bind(null,n),n_:eU.bind(null,n),ea:JB.bind(null,n),ta:XB.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.ma.N_(),yield _s(n)):(yield n.ma.stop(),n.Pa.length>0&&(x(Fi,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var Lv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Es(n,e){if(xe("AsyncQueue",`${e}: ${n}`),kr(n))return new k(S.UNAVAILABLE,`${e}: ${n}`);throw n}var fc=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||V.comparator(t.key,r.key):(t,r)=>V.comparator(t.key,r.key),this.keyedMap=xa(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var vh=class{constructor(){this.fa=new Ce(V.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):$(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Li=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,fc.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Vv=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},jv=class{constructor(){this.queries=FS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=F(t),o=i.queries;i.queries=FS(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new k(S.ABORTED,"Firestore shutting down"))}};function FS(){return new Jt(n=>O0(n),Cc)}function j_(n,e){return _(this,null,function*(){let t=F(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Vv,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Es(s,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&U_(t)})}function B_(n,e){return _(this,null,function*(){let t=F(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function tU(n,e){let t=F(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&U_(t)}function nU(n,e,t){let r=F(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function U_(n){n.Da.forEach(e=>{e.next()})}var Bv,LS;(LS=Bv||(Bv={})).Fa="default",LS.Cache="cache";var pc=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Li(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Li.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Bv.Cache}};var _h=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var Ih=class{constructor(e){this.serializer=e}Qs(e){return yn(this.serializer,e)}$s(e){return e.metadata.exists?$h(this.serializer,e.document,!1):We.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Oe(e)}},gc=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=OA(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=ce.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new Ih(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||J()).add(o);t.set(s,a)}}return t}za(e){return _(this,null,function*(){let t=yield $B(e,new Ih(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield HB(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function OA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Eh=class{constructor(e){this.key=e}},wh=class{constructor(e){this.key=e}},Th=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=J(),this.mutatedKeys=J(),this.Xa=L0(e),this.eu=new fc(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new vh,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=Sc(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),R=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),P=!1;g&&m?g.data.isEqual(m.data)?w!==R&&(r.track({type:3,doc:m}),P=!0):this.iu(g,m)||(r.track({type:2,doc:m}),P=!0,(u&&this.Xa(m,u)>0||l&&this.Xa(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),P=!0):g&&!m&&(r.track({type:1,doc:g}),P=!0,(u||l)&&(a=!0)),P&&(m?(s=s.add(m),o=R?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,f)=>function(m,w){let R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{At:P})}};return R(m)-R(w)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Li(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vh,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=J(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new wh(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Eh(r))}),t}uu(e){this.Ha=e.qs,this.Za=J();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Li.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Fr="SyncEngine",Uv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},$v=class{constructor(e){this.key=e,this.lu=!1}},Hv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Jt(a=>O0(a),Cc),this.Tu=new Map,this.Iu=new Set,this.du=new Ce(V.comparator),this.Eu=new Map,this.Au=new uc,this.Ru={},this.Vu=new Map,this.mu=as.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function rU(n,e,t=!0){return _(this,null,function*(){let r=Wh(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield FA(r,e,t,!0),i})}function iU(n,e){return _(this,null,function*(){let t=Wh(n);yield FA(t,e,!0,!1)})}function FA(n,e,t,r){return _(this,null,function*(){let i=yield cs(n.localStore,ct(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield $_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&zh(n.remoteStore,i),a})}function $_(n,e,t,r,i){return _(this,null,function*(){n.gu=(f,g,m)=>function(R,P,O,B){return _(this,null,function*(){let U=P.view.nu(O);U.Ds&&(U=yield dh(R.localStore,P.query,!1).then(({documents:T})=>P.view.nu(T,U)));let W=B&&B.targetChanges.get(P.targetId),le=B&&B.targetMismatches.get(P.targetId)!=null,G=P.view.applyChanges(U,R.isPrimaryClient,W,le);return qv(R,P.targetId,G._u),G.snapshot})}(n,f,g,m);let o=yield dh(n.localStore,e,!0),s=new Th(e,o.qs),a=s.nu(o.documents),u=oc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);qv(n,t,l._u);let d=new Uv(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function oU(n,e,t){return _(this,null,function*(){let r=F(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Cc(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield us(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ls(r.remoteStore,i.targetId),ds(r,i.targetId)}).catch(Mr))):(ds(r,i.targetId),yield us(r.localStore,i.targetId,!0))})}function sU(n,e){return _(this,null,function*(){let t=F(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ls(t.remoteStore,r.targetId))})}function aU(n,e,t){return _(this,null,function*(){let r=W_(n);try{let i=yield function(s,a){let u=F(s),l=Ae.now(),d=a.reduce((m,w)=>m.add(w.key),J()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=bt(),R=J();return u.Os.getEntries(m,d).next(P=>{w=P,w.forEach((O,B)=>{B.isValidDocument()||(R=R.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,w)).next(P=>{f=P;let O=[];for(let B of a){let U=EB(B,f.get(B.key).overlayedDocument);U!=null&&O.push(new Xt(B.key,U,C0(U.value.mapValue),ke.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,O,a)}).next(P=>{g=P;let O=P.applyToLocalDocumentSet(f,R);return u.documentOverlayCache.saveOverlays(m,P.batchId,O)})}).then(()=>({batchId:g.batchId,changes:j0(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ce(z)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Gn(r,i.changes),yield _s(r.remoteStore)}catch(i){let o=Es(i,"Failed to persist write");t.reject(o)}})}function LA(n,e){return _(this,null,function*(){let t=F(n);try{let r=yield BB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(H(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?H(s.lu,14607):i.removedDocuments.size>0&&(H(s.lu,42227),s.lu=!1))}),yield Gn(t,r,e)}catch(r){yield Mr(r)}})}function VS(n,e,t){let r=F(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=F(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.wa)g.va(a)&&(l=!0)}),l&&U_(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cU(n,e,t){return _(this,null,function*(){let r=F(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ce(V.comparator);s=s.insert(o,We.newNoDocument(o,q.min()));let a=J().add(o),u=new ic(q.min(),new Map,new Ce(z),s,a);yield LA(r,u),r.du=r.du.remove(o),r.Eu.delete(e),z_(r)}else yield us(r.localStore,e,!1).then(()=>ds(r,e,t)).catch(Mr)})}function uU(n,e){return _(this,null,function*(){let t=F(n),r=e.batch.batchId;try{let i=yield jB(t.localStore,e);q_(t,r,null),H_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gn(t,i)}catch(i){yield Mr(i)}})}function lU(n,e,t){return _(this,null,function*(){let r=F(n);try{let i=yield function(s,a){let u=F(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(H(f!==null,37113),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);q_(r,e,t),H_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gn(r,i)}catch(i){yield Mr(i)}})}function dU(n,e){return _(this,null,function*(){let t=F(n);Or(t.remoteStore)||x(Fr,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=F(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===_r)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=Es(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function H_(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function q_(n,e,t){let r=F(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function ds(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||VA(n,r)})}function VA(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(ls(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),z_(n))}function qv(n,e,t){for(let r of t)r instanceof Eh?(n.Au.addReference(r.key,e),hU(n,r)):r instanceof wh?(x(Fr,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||VA(n,r.key)):$(19791,{yu:r})}function hU(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(x(Fr,"New document in limbo: "+t),n.Iu.add(r),z_(n))}function z_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new V(ce.fromString(e)),r=n.mu.next();n.Eu.set(r,new $v(t)),n.du=n.du.insert(t,r),zh(n.remoteStore,new ss(ct(ys(t.path)),r,"TargetPurposeLimboResolution",Nt.ue))}}function Gn(n,e,t){return _(this,null,function*(){let r=F(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Ev.Es(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return _(this,null,function*(){let d=F(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>N.forEach(l,g=>N.forEach(g.Is,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>N.forEach(g.ds,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!kr(f))throw f;x(O_,"Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.Fs.get(g),w=m.snapshotVersion,R=m.withLastLimboFreeSnapshotVersion(w);d.Fs=d.Fs.insert(g,R)}}})}(r.localStore,o))})}function fU(n,e){return _(this,null,function*(){let t=F(n);if(!t.currentUser.isEqual(e)){x(Fr,"User change. New user:",e.toKey());let r=yield IA(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new k(S.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gn(t,r.Bs)}})}function pU(n,e){let t=F(n),r=t.Eu.get(e);if(r&&r.lu)return J().add(r.key);{let i=J(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function gU(n,e){return _(this,null,function*(){let t=F(n),r=yield dh(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&qv(t,e.targetId,i._u),i})}function mU(n,e){return _(this,null,function*(){let t=F(n);return DA(t.localStore,e).then(r=>Gn(t,r))})}function yU(n,e,t,r){return _(this,null,function*(){let i=F(n),o=yield function(a,u){let l=F(a),d=F(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Xn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):N.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield _s(i.remoteStore):t==="acknowledged"||t==="rejected"?(q_(i,e,r||null),H_(i,e),function(a,u){F(F(a).mutationQueue).rr(u)}(i.localStore,e)):$(6720,"Unknown batchState",{wu:t}),yield Gn(i,o)):x(Fr,"Cannot apply mutation batch with id: "+e)})}function vU(n,e){return _(this,null,function*(){let t=F(n);if(Wh(t),W_(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield jS(t,r.toArray());t.fu=!0,yield Fv(t.remoteStore,!0);for(let o of i)zh(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ds(t,s),us(t.localStore,s,!0))),ls(t.remoteStore,s)}),yield i,yield jS(t,r),function(s){let a=F(s);a.Eu.forEach((u,l)=>{ls(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new Ce(V.comparator)}(t),t.fu=!1,yield Fv(t.remoteStore,!1)}})}function jS(n,e,t){return _(this,null,function*(){let r=F(n),i=[],o=[];for(let s of e){let a,u=r.Tu.get(s);if(u&&u.length!==0){a=yield cs(r.localStore,ct(u[0]));for(let l of u){let d=r.Pu.get(l),f=yield gU(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield TA(r.localStore,s);a=yield cs(r.localStore,l),yield $_(r,jA(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function jA(n){return M0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _U(n){return function(t){return F(F(t).persistence).Ps()}(F(n).localStore)}function IU(n,e,t,r){return _(this,null,function*(){let i=F(n);if(i.fu)return void x(Fr,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield DA(i.localStore,F0(o[0])),a=ic.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Fe.EMPTY_BYTE_STRING);yield Gn(i,s,a);break}case"rejected":yield us(i.localStore,e,!0),ds(i,e,r);break;default:$(64155,t)}})}function EU(n,e,t){return _(this,null,function*(){let r=Wh(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){x(Fr,"Adding an already active target "+i);continue}let o=yield TA(r.localStore,i),s=yield cs(r.localStore,o);yield $_(r,jA(o),s.targetId,!1,s.resumeToken),zh(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield us(r.localStore,i,!1).then(()=>{ls(r.remoteStore,i),ds(r,i)}).catch(Mr))}})}function Wh(n){let e=F(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cU.bind(null,e),e.hu.J_=tU.bind(null,e.eventManager),e.hu.pu=nU.bind(null,e.eventManager),e}function W_(n){let e=F(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lU.bind(null,e),e}function wU(n,e,t){let r=F(n);(function(o,s,a){return _(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(m,w){let R=F(m),P=Oe(w.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",O=>R.Ti.getBundleMetadata(O,w.id)).then(O=>!!O&&O.createTime.compareTo(P)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(OA(u));let l=new gc(u,s.serializer),d=yield s.Su();for(;d;){let g=yield l.Wa(d);g&&a._updateProgress(g),d=yield s.Su()}let f=yield l.za(o.localStore);return yield Gn(o,f.Ja,void 0),yield function(m,w){let R=F(m);return R.persistence.runTransaction("Save bundle","readwrite",P=>R.Ti.saveBundleMetadata(P,w))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.ja)}catch(u){return mt(Fr,`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Gh=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=Hi(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return _A(this.persistence,new lh,t.initialUser,this.serializer)}Du(t){return new lc(ch.Vi,this.serializer)}bu(t){return new ph}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),mc=class extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){H(this.persistence.referenceDelegate instanceof uh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new oh(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Dt.withCacheSize(this.cacheSizeBytes):Dt.DEFAULT;return new lc(r=>uh.Vi(r,t),this.serializer)}},yc=class n extends Gh{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){yield Qc(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield W_(this.Mu.syncEngine),yield _s(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return _A(this.persistence,new lh,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new oh(r,e.asyncQueue,t)}Fu(e,t){let r=new Iy(t,this.persistence);return new _y(e.asyncQueue,r)}Du(e){let t=x_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Dt.withCacheSize(this.cacheSizeBytes):Dt.DEFAULT;return new Iv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,NA(),Md(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new ph}},Dh=class n extends yc{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return _(this,null,function*(){yield Qc(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof Ha&&(this.sharedClientState.syncEngine={Do:yU.bind(null,t),vo:IU.bind(null,t),Co:EU.bind(null,t),Ps:_U.bind(null,t),bo:mU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>_(this,null,function*(){yield vU(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=NA();if(!Ha.C(t))throw new k(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=x_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ha(t,e.asyncQueue,r,e.clientId,e.initialUser)}},ws=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>VS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fU.bind(null,this.syncEngine),yield Fv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new jv}()}createDatastore(t){let r=Hi(t.databaseInfo.databaseId),i=function(s){return new Nv(s)}(t.databaseInfo);return function(s,a,u,l){return new kv(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Ov(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>VS(this.syncEngine,r,0),function(){return gh.C()?new gh:new bv}())}createSyncEngine(t,r){return function(o,s,a,u,l,d,f){let g=new Hv(o,s,a,u,l,d);return f&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(o){return _(this,null,function*(){let s=F(o);x(Fi,"RemoteStore shutting down."),s.Ia.add(5),yield vs(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function BS(n,e=10240){let t=0;return{read(){return _(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return _(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var hs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xe("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var zv=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new qe,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return _(this,null,function*(){return this.metadata.promise})}Su(){return _(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return _(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new _h(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return _(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return _(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return _(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Wv=class{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Qa())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Ku(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;let e=this.ku(),t=this.Qu(e);return new _h(JSON.parse(t),e)}Qu(e){if(this.cursor+e>this.bundleData.length)throw new k(S.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}ku(){let e=this.cursor,t=this.cursor;for(;t<this.bundleData.length;){if(this.bundleData[t]==="{"){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}};var Gv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return _(this,null,function*(){let s=F(i),a={documents:o.map(f=>sc(s.serializer,f))},u=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,ce.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=SB(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());H(!!g,55234,{key:f}),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=V.fromPath(r);this.mutations.push(new tc(i,this.precondition(i)))}),yield function(r,i){return _(this,null,function*(){let o=F(r),s={writes:i.map(a=>ac(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,ce.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $(50498,{Wu:e.constructor.name});t=q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(S.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(q.min())?ke.exists(!1):ke.updateTime(t):ke.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(q.min()))throw new k(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ke.updateTime(t)}return ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Kv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new hc(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>_(this,null,function*(){let e=new Gv(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!Tc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Q0(t)}return!1}};var Pr="FirestoreClient",Qv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=$e.UNAUTHENTICATED,this.clientId=za.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){x(Pr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(x(Pr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Es(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ay(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),x(Pr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield IA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{mt("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{x("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{mt("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function US(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield G_(n);x(Pr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>OS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>OS(e.remoteStore,i)),n._onlineComponents=e})}function G_(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x(Pr,"Using user provided OfflineComponentProvider");try{yield ay(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===S.FAILED_PRECONDITION||i.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;mt("Error using user provided cache. Falling back to memory cache: "+t),yield ay(n,new Gh)}}else x(Pr,"Using default OfflineComponentProvider"),yield ay(n,new mc(void 0));return n._offlineComponents})}function Kh(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(x(Pr,"Using user provided OnlineComponentProvider"),yield US(n,n._uninitializedComponentsProvider._online)):(x(Pr,"Using default OnlineComponentProvider"),yield US(n,new ws))),n._onlineComponents})}function BA(n){return G_(n).then(e=>e.persistence)}function Ts(n){return G_(n).then(e=>e.localStore)}function UA(n){return Kh(n).then(e=>e.remoteStore)}function K_(n){return Kh(n).then(e=>e.syncEngine)}function $A(n){return Kh(n).then(e=>e.datastore)}function fs(n){return _(this,null,function*(){let e=yield Kh(n),t=e.eventManager;return t.onListen=rU.bind(null,e.syncEngine),t.onUnlisten=oU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sU.bind(null,e.syncEngine),t})}function TU(n){return n.asyncQueue.enqueue(()=>_(null,null,function*(){let e=yield BA(n),t=yield UA(n);return e.setNetworkEnabled(!0),function(i){let o=F(i);return o.Ia.delete(0),Ac(o)}(t)}))}function DU(n){return n.asyncQueue.enqueue(()=>_(null,null,function*(){let e=yield BA(n),t=yield UA(n);return e.setNetworkEnabled(!1),function(i){return _(this,null,function*(){let o=F(i);o.Ia.add(0),yield vs(o),o.Aa.set("Offline")})}(t)}))}function bU(n,e){let t=new qe;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(i,o,s){return _(this,null,function*(){try{let a=yield function(l,d){let f=F(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Es(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield Ts(n),e,t)})),t.promise}function HA(n,e,t={}){let r=new qe;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,u,l){let d=new hs({next:g=>{d.Ou(),s.enqueueAndForget(()=>B_(o,f));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new k(S.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&u&&u.source==="server"?l.reject(new k(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new pc(ys(a.path),d,{includeMetadataChanges:!0,ka:!0});return j_(o,f)}(yield fs(n),n.asyncQueue,e,t,r)})),r.promise}function CU(n,e){let t=new qe;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(i,o,s){return _(this,null,function*(){try{let a=yield dh(i,o,!0),u=new Th(o,a.qs),l=u.nu(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=Es(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield Ts(n),e,t)})),t.promise}function qA(n,e,t={}){let r=new qe;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,u,l){let d=new hs({next:g=>{d.Ou(),s.enqueueAndForget(()=>B_(o,f)),g.fromCache&&u.source==="server"?l.reject(new k(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new pc(a,d,{includeMetadataChanges:!0,ka:!0});return j_(o,f)}(yield fs(n),n.asyncQueue,e,t,r)})),r.promise}function SU(n,e,t){let r=new qe;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){try{let i=yield $A(n);r.resolve(function(s,a,u){return _(this,null,function*(){var l;let d=F(s),{request:f,ft:g,parent:m}=rA(d.serializer,k0(a),u);d.connection.Qo||delete f.parent;let w=(yield d.Jo("RunAggregationQuery",d.serializer.databaseId,m,f,1)).filter(P=>!!P.result);H(w.length===1,64727);let R=(l=w[0].result)===null||l===void 0?void 0:l.aggregateFields;return Object.keys(R).reduce((P,O)=>(P[g[O]]=R[O],P),{})})}(i,e,t))}catch(i){r.reject(i)}})),r.promise}function AU(n,e){let t=new hs(e);return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(i,o){F(i).Da.add(o),o.next()}(yield fs(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(i,o){F(i).Da.delete(o)}(yield fs(n),t)}))}}function NU(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?v_().encode(s):s,function(d,f){return new zv(d,f)}(function(d,f){if(d instanceof Uint8Array)return BS(d,f);if(d instanceof ArrayBuffer)return BS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Hi(e));n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){wU(yield K_(n),i,r)}))}function RU(n,e){return n.asyncQueue.enqueue(()=>_(null,null,function*(){return function(r,i){let o=F(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))}(yield Ts(n),e)}))}function zA(n,e){return function(r,i){return new Wv(r,i)}(n,e)}function PU(n,e){return n.asyncQueue.enqueue(()=>_(null,null,function*(){return function(r,i){return _(this,null,function*(){let o=F(r),s=o.indexManager,a=[];return o.persistence.runTransaction("Configure indexes","readwrite",u=>s.getFieldIndexes(u).next(l=>function(f,g,m,w,R){f=[...f],g=[...g],f.sort(m),g.sort(m);let P=f.length,O=g.length,B=0,U=0;for(;B<O&&U<P;){let W=m(f[U],g[B]);W<0?R(f[U++]):W>0?w(g[B++]):(B++,U++)}for(;B<O;)w(g[B++]);for(;U<P;)R(f[U++])}(l,i,xj,d=>{a.push(s.addFieldIndex(u,d))},d=>{a.push(s.deleteFieldIndex(u,d))})).next(()=>N.waitFor(a)))})}(yield Ts(n),e)}))}function MU(n,e){return n.asyncQueue.enqueue(()=>_(null,null,function*(){return function(r,i){F(r).Cs.Rs=i}(yield Ts(n),e)}))}function kU(n){return n.asyncQueue.enqueue(()=>_(null,null,function*(){return function(t){let r=F(t),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",o=>i.deleteAllFieldIndexes(o))}(yield Ts(n))}))}function WA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var $S=new Map;var GA="firestore.googleapis.com",HS=!0,bh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GA,this.ssl=HS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:HS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gA)throw new k(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Vi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cy;switch(r.type){case"firstParty":return new hy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=$S.get(t);r&&(x("ComponentProvider","Removing Datastore"),$S.delete(t),r.terminate())}(this),Promise.resolve()}};function Q_(n,e,t,r={}){var i;n=oe(n,Vi);let o=sr(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(ql(`https://${u}`),nm("Firestore",!0)),s.host!==GA&&s.host!==u&&mt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Gt(l,a)&&(n._setSettings(l),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=$e.MOCK_USER;else{d=fb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new k(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new $e(g)}n._authCredentials=new uy(new kd(d,f))}}var Qe=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},be=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if($i(t,n._jsonSchema))return new n(e,r||null,new V(ce.fromString(t.referencePath)))}};be._jsonSchemaVersion="firestore/documentReference/1.0",be._jsonSchema={type:He("string",be._jsonSchemaVersion),referencePath:He("string")};var vn=class n extends Qe{constructor(e,t,r){super(e,t,ys(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new be(this.firestore,null,new V(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function KA(n,e,...t){if(n=we(n),__("collection","path",e),n instanceof Vi){let r=ce.fromString(e,...t);return VC(r),new vn(n,null,r)}{if(!(n instanceof be||n instanceof vn))throw new k(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ce.fromString(e,...t));return VC(r),new vn(n.firestore,null,r)}}function QA(n,e){if(n=oe(n,Vi),__("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(S.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qe(n,null,function(r){return new Zt(ce.emptyPath(),r)}(e))}function Y_(n,e,...t){if(n=we(n),arguments.length===1&&(e=za.newId()),__("doc","path",e),n instanceof Vi){let r=ce.fromString(e,...t);return LC(r),new be(n,null,new V(r))}{if(!(n instanceof be||n instanceof vn))throw new k(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ce.fromString(e,...t));return LC(r),new be(n.firestore,n instanceof vn?n.converter:null,new V(r))}}function Lr(n,e){return n=we(n),e=we(e),(n instanceof be||n instanceof vn)&&(e instanceof be||e instanceof vn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Qh(n,e){return n=we(n),e=we(e),n instanceof Qe&&e instanceof Qe&&n.firestore===e.firestore&&Cc(n._query,e._query)&&n.converter===e.converter}var qS="AsyncQueue",Ch=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new hc(this,"async_queue_retry"),this.oc=()=>{let r=Md();r&&x(qS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Md();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Md();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new qe;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!kr(e))throw e;x(qS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xe("INTERNAL UNHANDLED ERROR: ",zS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Lv.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&$(47125,{hc:zS(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function zS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function qo(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Yv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var YG=-1,ye=class extends Vi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ch,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ch(e),this._firestoreClient=void 0,yield e}})}};function YA(n,e,t){t||(t=Ja);let r=Co(n,"firestore");if(r.isInitialized(t)){let i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(Gt(o,e))return i;throw new k(S.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new k(S.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gA)throw new k(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&sr(e.host)&&ql(e.host),r.initialize({options:e,instanceIdentifier:t})}function ZA(n,e){let t=typeof n=="object"?n:di(),r=typeof n=="string"?n:e||Ja,i=Co(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=db("firestore");o&&Q_(i,...o)}return i}function Ne(n){if(n._terminated)throw new k(S.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JA(n),n._firestoreClient}function JA(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,d){return new Dy(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,WA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Qv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function XA(n,e){mt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return tN(n,ws.provider,{build:r=>new yc(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function eN(n){return _(this,null,function*(){mt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();tN(n,ws.provider,{build:t=>new Dh(t,e.cacheSizeBytes)})})}function tN(n,e,t){if((n=oe(n,ye))._firestoreClient||n._terminated)throw new k(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(S.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},JA(n)}function nN(n){if(n._initialized&&!n._terminated)throw new k(S.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new qe;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>_(null,null,function*(){try{yield function(r){return _(this,null,function*(){if(!Tr.C())return Promise.resolve();let i=r+vA;yield Tr.delete(i)})}(x_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function rN(n){return function(t){let r=new qe;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return dU(yield K_(t),r)})),r.promise}(Ne(n=oe(n,ye)))}function iN(n){return TU(Ne(n=oe(n,ye)))}function oN(n){return DU(Ne(n=oe(n,ye)))}function sN(n){return kb(n.app,"firestore",n._databaseId.database),n._delete()}function Sh(n,e){let t=Ne(n=oe(n,ye)),r=new Yv;return NU(t,n._databaseId,e,r),r}function Z_(n,e){return RU(Ne(n=oe(n,ye)),e).then(t=>t?new Qe(n,null,t.query):null)}var ji=class{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}},Zv=class{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}};var jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Fe.fromBase64String(e))}catch(t){throw new k(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Fe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($i(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:He("string",jn._jsonSchemaVersion),bytes:He("string")};var zn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};function aN(){return new zn(gy)}var Wn=class{constructor(e){this._methodName=e}};var Ir=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if($i(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ir._jsonSchemaVersion="firestore/geoPoint/1.0",Ir._jsonSchema={type:He("string",Ir._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};var Bn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($i(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new k(S.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Bn._jsonSchemaVersion="firestore/vectorValue/1.0",Bn._jsonSchema={type:He("string",Bn._jsonSchemaVersion),vectorValues:He("object")};var xU=/^__.*__$/,Jv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ar(e,this.data,t,this.fieldTransforms)}},Ah=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xt(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function cN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ec:n})}}var Nh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(cN(this.Ec)&&xU.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Xv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hi(e)}Dc(e,t,r,i=!1){return new Nh({Ec:e,methodName:t,bc:r,path:ze.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qi(n){let e=n._freezeSettings(),t=Hi(n._databaseId);return new Xv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yh(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);eI("Data must be an object, but it was:",s,r);let a=dN(r,s),u,l;if(o.merge)u=new Rt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=_c(e,f,t);if(!s.contains(g))throw new k(S.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);fN(d,g)||d.push(g)}u=new Rt(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new Jv(new st(a),u,l)}var vc=class n extends Wn{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function uN(n,e,t){return new Nh({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var e_=class n extends Wn{_toFieldTransform(e){return new ki(e.path,new Cr)}isEqual(e){return e instanceof n}},t_=class n extends Wn{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=uN(this,e,!0),r=this.vc.map(o=>zi(o,t)),i=new Hn(r);return new ki(e.path,i)}isEqual(e){return e instanceof n&&Gt(this.vc,e.vc)}},n_=class n extends Wn{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=uN(this,e,!0),r=this.vc.map(o=>zi(o,t)),i=new qn(r);return new ki(e.path,i)}isEqual(e){return e instanceof n&&Gt(this.vc,e.vc)}},r_=class n extends Wn{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new Sr(e.serializer,$0(e.serializer,this.Cc));return new ki(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function J_(n,e,t,r){let i=n.Dc(1,e,t);eI("Data must be an object, but it was:",i,r);let o=[],s=st.empty();xr(r,(u,l)=>{let d=Zh(e,u,t);l=we(l);let f=i.gc(d);if(l instanceof vc)o.push(d);else{let g=zi(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Rt(o);return new Ah(s,a,i.fieldTransforms)}function X_(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[_c(e,r,t)],u=[i];if(o.length%2!=0)throw new k(S.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(_c(e,o[g])),u.push(o[g+1]);let l=[],d=st.empty();for(let g=a.length-1;g>=0;--g)if(!fN(l,a[g])){let m=a[g],w=u[g];w=we(w);let R=s.gc(m);if(w instanceof vc)l.push(m);else{let P=zi(w,R);P!=null&&(l.push(m),d.set(m,P))}}let f=new Rt(l);return new Ah(d,f,s.fieldTransforms)}function lN(n,e,t,r=!1){return zi(t,n.Dc(r?4:3,e))}function zi(n,e){if(hN(n=we(n)))return eI("Unsupported field value:",e,n),dN(n,e);if(n instanceof Wn)return function(r,i){if(!cN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=zi(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=we(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ae.fromDate(r);return{timestampValue:os(i.serializer,o)}}if(r instanceof Ae){let o=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:os(i.serializer,o)}}if(r instanceof Ir)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:Z0(i.serializer,r._byteString)};if(r instanceof be){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:M_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bn)return function(s,a){return{mapValue:{fields:{[C_]:{stringValue:S_},[es]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return P_(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Oh(r)}`)}(n,e)}function dN(n,e){let t={};return v0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xr(n,(r,i)=>{let o=zi(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function hN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ae||n instanceof Ir||n instanceof jn||n instanceof be||n instanceof Wn||n instanceof Bn)}function eI(n,e,t){if(!hN(t)||!e0(t)){let r=Oh(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function _c(n,e,t){if((e=we(e))instanceof zn)return e._internalPath;if(typeof e=="string")return Zh(n,e);throw Rh("Field path arguments must be of type string or ",n,!1,void 0,t)}var OU=new RegExp("[~\\*/\\[\\]]");function Zh(n,e,t){if(e.search(OU)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zn(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(S.INVALID_ARGUMENT,a+n+u)}function fN(n,e){return n.some(t=>t.isEqual(e))}var Bi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new i_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Jh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},i_=class extends Bi{data(){return super.data()}};function Jh(n,e){return typeof e=="string"?Zh(n,e):e instanceof zn?e._internalPath:e._delegate._internalPath}function pN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ic=class{},Ui=class extends Ic{};function gN(n,e,...t){let r=[];e instanceof Ic&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof ps).length,a=o.filter(u=>u instanceof Ec).length;if(s>1||s>0&&a>0)throw new k(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Ec=class n extends Ui{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return SN(e._query,t),new Qe(e.firestore,e.converter,Ly(e._query,t))}_parse(e){let t=qi(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){GS(f,d);let w=[];for(let R of f)w.push(WS(u,o,R));g={arrayValue:{values:w}}}else g=WS(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||GS(f,d),g=lN(a,s,f,d==="in"||d==="not-in");return ue.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function mN(n,e,t){let r=e,i=Jh("where",n);return Ec._create(i,r,t)}var ps=class n extends Ic{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:me.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)SN(s,u),s=Ly(s,u)}(e._query,t),new Qe(e.firestore,e.converter,Ly(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function yN(...n){return n.forEach(e=>AN("or",e)),ps._create("or",n)}function vN(...n){return n.forEach(e=>AN("and",e)),ps._create("and",n)}var o_=class n extends Ui{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pi(o,s)}(e._query,this._field,this._direction);return new Qe(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Zt(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function _N(n,e="asc"){let t=e,r=Jh("orderBy",n);return o_._create(r,t)}var Ph=class n extends Ui{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Qe(e.firestore,e.converter,Wd(e._query,this._limit,this._limitType))}};function IN(n){return t0("limit",n),Ph._create("limit",n,"F")}function EN(n){return t0("limitToLast",n),Ph._create("limitToLast",n,"L")}var Mh=class n extends Ui{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=CN(e,this.type,this._docOrFields,this._inclusive);return new Qe(e.firestore,e.converter,function(i,o){return new Zt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function wN(...n){return Mh._create("startAt",n,!0)}function TN(...n){return Mh._create("startAfter",n,!1)}var kh=class n extends Ui{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=CN(e,this.type,this._docOrFields,this._inclusive);return new Qe(e.firestore,e.converter,function(i,o){return new Zt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function DN(...n){return kh._create("endBefore",n,!1)}function bN(...n){return kh._create("endAt",n,!0)}function CN(n,e,t,r){if(t[0]=we(t[0]),t[0]instanceof Bi)return function(o,s,a,u,l){if(!u)throw new k(S.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of $o(o))if(f.field.isKeyField())d.push(Ri(s,u.key));else{let g=u.data.field(f.field);if(jh(g))throw new k(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new k(S.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new In(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=qi(n.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(S.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let w=0;w<d.length;w++){let R=d[w];if(g[w].field.isKeyField()){if(typeof R!="string")throw new k(S.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!N_(s)&&R.indexOf("/")!==-1)throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let P=s.path.child(ce.fromString(R));if(!V.isDocumentKey(P))throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);let O=new V(P);m.push(Ri(a,O))}else{let P=lN(u,l,R);m.push(P)}}return new In(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function WS(n,e,t){if(typeof(t=we(t))=="string"){if(t==="")throw new k(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N_(e)&&t.indexOf("/")!==-1)throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ce.fromString(t));if(!V.isDocumentKey(r))throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ri(n,new V(r))}if(t instanceof be)return Ri(n,t._key);throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oh(t)}.`)}function GS(n,e){if(!Array.isArray(n)||n.length===0)throw new k(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SN(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function AN(n,e){if(!(e instanceof Ec||e instanceof ps))throw new k(S.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}var xh=class{convertValue(e,t="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return xr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[es].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Se(s.doubleValue));return new Bn(o)}convertGeoPoint(e){return new Ir(Se(e.latitude),Se(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Bh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Za(e));default:return null}}convertTimestamp(e){let t=Un(e);return new Ae(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ce.fromString(e);H(aA(r),9688,{name:e});let i=new Xo(r.get(1),r.get(3)),o=new V(r.popFirst(5));return i.isEqual(t)||xe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Xh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var wc=class extends xh{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new be(this.firestore,null,t)}};function NN(n){return new ji("sum",_c("sum",n))}function ZG(n){return new ji("avg",_c("average",n))}function FU(){return new ji("count")}function RN(n,e){var t,r;return n instanceof ji&&e instanceof ji&&n.aggregateType===e.aggregateType&&((t=n._internalFieldPath)===null||t===void 0?void 0:t.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function PN(n,e){return Qh(n.query,e.query)&&Gt(n.data(),e.data())}var MN="NOT SUPPORTED",gn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pt=class n extends Bi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new zo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Jh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new k(S.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};function JG(n,e,t){if($i(e,Pt._jsonSchema)){if(e.bundle===MN)throw new k(S.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");let r=Hi(n._databaseId),i=zA(e.bundle,r),o=i.Ku(),s=new gc(i.getMetadata(),r);for(let d of o)s.Wa(d);let a=s.documents;if(a.length!==1)throw new k(S.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);let u=$h(r,a[0].document),l=new V(ce.fromString(e.bundleName));return new Pt(n,new wc(n),l,u,new gn(!1,!1),t||null)}}Pt._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pt._jsonSchema={type:He("string",Pt._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};var zo=class extends Pt{data(e={}){return super.data(e)}},Mt=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zo(this._firestore,this._userDataWriter,r.key,r,new gn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new zo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new zo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:LU(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new k(S.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=za.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function XG(n,e,t){if($i(e,Mt._jsonSchema)){if(e.bundle===MN)throw new k(S.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");let r=Hi(n._databaseId),i=zA(e.bundle,r),o=i.Ku(),s=new gc(i.getMetadata(),r);for(let g of o)s.Wa(g);if(s.queries.length!==1)throw new k(S.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${s.queries.length} queries.`);let a=qh(s.queries[0].bundledQuery),u=s.documents,l=new fc;u.map(g=>{let m=$h(r,g.document);l=l.add(m)});let d=Li.fromInitialDocuments(a,l,J(),!1,!1),f=new Qe(n,t||null,a);return new Mt(n,new wc(n),f,d)}}function LU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:n})}}function kN(n,e){return n instanceof Pt&&e instanceof Pt?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mt&&e instanceof Mt&&n._firestore===e._firestore&&Qh(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function xN(n){n=oe(n,be);let e=oe(n.firestore,ye);return HA(Ne(e),n._key).then(t=>tI(e,n,t))}Mt._jsonSchemaVersion="firestore/querySnapshot/1.0",Mt._jsonSchema={type:He("string",Mt._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};var En=class extends xh{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new be(this.firestore,null,t)}};function ON(n){n=oe(n,be);let e=oe(n.firestore,ye),t=Ne(e),r=new En(e);return bU(t,n._key).then(i=>new Pt(e,r,n._key,i,new gn(i!==null&&i.hasLocalMutations,!0),n.converter))}function FN(n){n=oe(n,be);let e=oe(n.firestore,ye);return HA(Ne(e),n._key,{source:"server"}).then(t=>tI(e,n,t))}function LN(n){n=oe(n,Qe);let e=oe(n.firestore,ye),t=Ne(e),r=new En(e);return pN(n._query),qA(t,n._query).then(i=>new Mt(e,r,n,i))}function VN(n){n=oe(n,Qe);let e=oe(n.firestore,ye),t=Ne(e),r=new En(e);return CU(t,n._query).then(i=>new Mt(e,r,n,i))}function jN(n){n=oe(n,Qe);let e=oe(n.firestore,ye),t=Ne(e),r=new En(e);return qA(t,n._query,{source:"server"}).then(i=>new Mt(e,r,n,i))}function BN(n,e,t){n=oe(n,be);let r=oe(n.firestore,ye),i=Xh(n.converter,e,t);return Nc(r,[Yh(qi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ke.none())])}function UN(n,e,t,...r){n=oe(n,be);let i=oe(n.firestore,ye),o=qi(i),s;return s=typeof(e=we(e))=="string"||e instanceof zn?X_(o,"updateDoc",n._key,e,t,r):J_(o,"updateDoc",n._key,e),Nc(i,[s.toMutation(n._key,ke.exists(!0))])}function $N(n){return Nc(oe(n.firestore,ye),[new Nr(n._key,ke.none())])}function HN(n,e){let t=oe(n.firestore,ye),r=Y_(n),i=Xh(n.converter,e);return Nc(t,[Yh(qi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ke.exists(!1))]).then(()=>r)}function gs(n,...e){var t,r,i;n=we(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||qo(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(qo(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof be)l=oe(n.firestore,ye),d=ys(n._key.path),u={next:f=>{e[s]&&e[s](tI(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=oe(n,Qe);l=oe(f.firestore,ye),d=f._query;let g=new En(l);u={next:m=>{e[s]&&e[s](new Mt(l,g,f,m))},error:e[s+1],complete:e[s+2]},pN(n._query)}return function(g,m,w,R){let P=new hs(R),O=new pc(m,P,w);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return j_(yield fs(g),O)})),()=>{P.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return B_(yield fs(g),O)}))}}(Ne(l),d,a,u)}function e7(n,e,...t){let r=we(n),i=function(u){let l={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(let f of d){if(!(f in u)){l.error=`snapshotJson missing required field: ${f}`;break}let g=u[f];if(typeof g!="string"){l.error=`snapshotJson field '${f}' must be a string.`;break}if(g.length===0){l.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?l.bundle=g:f==="bundleName"?l.bundleName=g:f==="bundleSource"&&(l.bundleSource=g)}return l}(e);if(i.error)throw new k(S.INVALID_ARGUMENT,i.error);let o,s=0;if(typeof t[s]!="object"||qo(t[s])||(o=t[s++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof t[s]=="object"&&qo(t[s])){let u=t[s++];a={next:u.next,error:u.error,complete:u.complete}}else a={next:t[s++],error:t[s++],complete:t[s++]};return function(l,d,f,g,m){let w,R=!1;return Sh(l,d.bundle).then(()=>Z_(l,d.bundleName)).then(O=>{O&&!R&&(m&&O.withConverter(m),w=gs(O,f||{},g))}).catch(O=>(g.error&&g.error(O),()=>{})),()=>{R||(R=!0,w&&w())}}(r,i,o,a,t[s])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof t[s]=="object"&&qo(t[s])){let u=t[s++];a={next:u.next,error:u.error,complete:u.complete}}else a={next:t[s++],error:t[s++],complete:t[s++]};return function(l,d,f,g,m){let w,R=!1;return Sh(l,d.bundle).then(()=>{if(!R){let O=new be(l,m||null,V.fromPath(d.bundleName));w=gs(O,f||{},g)}}).catch(O=>(g.error&&g.error(O),()=>{})),()=>{R||(R=!0,w&&w())}}(r,i,o,a,t[s])}throw new k(S.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function qN(n,e){return AU(Ne(n=oe(n,ye)),qo(e)?e:{next:e})}function Nc(n,e){return function(r,i){let o=new qe;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return aU(yield K_(r),i,o)})),o.promise}(Ne(n),e)}function tI(n,e,t){let r=t.docs.get(e._key),i=new En(n);return new Pt(n,i,e._key,r,new gn(t.hasPendingWrites,t.fromCache),e.converter)}function ef(n){return nI(n,{count:FU()})}function nI(n,e){let t=oe(n.firestore,ye),r=Ne(t),i=y0(e,(o,s)=>new Gd(s,o.aggregateType,o._internalFieldPath));return SU(r,n._query,i).then(o=>function(a,u,l){let d=new En(a);return new Zv(u,d,l)}(t,n,o))}var s_=class{constructor(e){this.kind="memory",this._onlineComponentProvider=ws.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new mc(void 0)}}toJSON(){return{kind:this.kind}}},a_=class{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=VU(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}},c_=class{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Gh.provider}toJSON(){return{kind:this.kind}}},u_=class{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new mc(e)}}toJSON(){return{kind:this.kind}}};function t7(){return new c_}function n7(n){return new u_(n?.cacheSizeBytes)}function r7(n){return new s_(n)}function i7(n){return new a_(n)}var l_=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ws.provider,this._offlineComponentProvider={build:t=>new yc(t,e?.cacheSizeBytes,this.forceOwnership)}}},d_=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ws.provider,this._offlineComponentProvider={build:t=>new Dh(t,e?.cacheSizeBytes)}}};function VU(n){return new l_(n?.forceOwnership)}function o7(){return new d_}var jU={maxAttempts:5};var h_=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qi(e)}set(e,t,r){this._verifyNotCommitted();let i=vr(e,this._firestore),o=Xh(i.converter,t,r),s=Yh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ke.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=vr(e,this._firestore),s;return s=typeof(t=we(t))=="string"||t instanceof zn?X_(this._dataReader,"WriteBatch.update",o._key,t,r,i):J_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ke.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=vr(e,this._firestore);return this._mutations=this._mutations.concat(new Nr(t._key,ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function vr(n,e){if((n=we(n)).firestore!==e)throw new k(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var f_=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qi(e)}get(e){let t=vr(e,this._firestore),r=new wc(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return $(24041);let o=i[0];if(o.isFoundDocument())return new Bi(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Bi(this._firestore,r,t._key,null,t.converter);throw $(18433,{doc:o})})}set(e,t,r){let i=vr(e,this._firestore),o=Xh(i.converter,t,r),s=Yh(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=vr(e,this._firestore),s;return s=typeof(t=we(t))=="string"||t instanceof zn?X_(this._dataReader,"Transaction.update",o._key,t,r,i):J_(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=vr(e,this._firestore);return this._transaction.delete(t._key),this}};var p_=class extends f_{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=vr(e,this._firestore),r=new En(this._firestore);return super.get(e).then(i=>new Pt(this._firestore,r,t._key,i._document,new gn(!1,!1),t.converter))}};function zN(n,e,t){n=oe(n,ye);let r=Object.assign(Object.assign({},jU),t);return function(o){if(o.maxAttempts<1)throw new k(S.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new qe;return o.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){let l=yield $A(o);new Kv(o.asyncQueue,l,a,s,u).zu()})),u.promise}(Ne(n),i=>e(new p_(n,i)),r)}function WN(){return new vc("deleteField")}function s7(){return new e_("serverTimestamp")}function a7(...n){return new t_("arrayUnion",n)}function c7(...n){return new n_("arrayRemove",n)}function GN(n){return new r_("increment",n)}function KN(n){return new Bn(n)}function QN(n){return Ne(n=oe(n,ye)),new h_(n,e=>Nc(n,e))}function YN(n,e){let t=Ne(n=oe(n,ye));if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return mt("Cannot enable indexes when persistence is disabled"),Promise.resolve();let r=function(o){let s=typeof o=="string"?function(l){try{return JSON.parse(l)}catch(d){throw new k(S.INVALID_ARGUMENT,"Failed to parse JSON: "+d?.message)}}(o):o,a=[];if(Array.isArray(s.indexes))for(let u of s.indexes){let l=KS(u,"collectionGroup"),d=[];if(Array.isArray(u.fields))for(let f of u.fields){let g=Zh("setIndexConfiguration",KS(f,"fieldPath"));f.arrayConfig==="CONTAINS"?d.push(new Vn(g,2)):f.order==="ASCENDING"?d.push(new Vn(g,0)):f.order==="DESCENDING"&&d.push(new Vn(g,1))}a.push(new wr(wr.UNKNOWN_ID,l,d,Ko.empty()))}return a}(e);return PU(t,r)}function KS(n,e){if(typeof n[e]!="string")throw new k(S.INVALID_ARGUMENT,"Missing string value for: "+e);return n[e]}var g_=class{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}};function ZN(n){var e;n=oe(n,ye);let t=QS.get(n);if(t)return t;if(((e=Ne(n)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;let r=new g_(n);return QS.set(n,r),r}function JN(n){tR(n,!0)}function XN(n){tR(n,!1)}function eR(n){kU(Ne(n._firestore)).then(e=>x("deleting all persistent cache indexes succeeded")).catch(e=>mt("deleting all persistent cache indexes failed",e))}function tR(n,e){MU(Ne(n._firestore),e).then(t=>x(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(t=>mt(`setting persistent cache index auto creation isEnabled=${e} failed`,t))}var QS=new WeakMap;function u7(n){var e;let t=(e=Ne(oe(n.firestore,ye))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return t===void 0?null:Hh(t,ct(n._query)).Vt}function l7(n,e){var t;let r=y0(e,(o,s)=>new Gd(s,o.aggregateType,o._internalFieldPath)),i=(t=Ne(oe(n.firestore,ye))._onlineComponents)===null||t===void 0?void 0:t.datastore.serializer;return i===void 0?null:rA(i,k0(n._query),r,!0).request}var YS=class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return m_.instance.onExistenceFilterMismatch(e)}},m_=class n{constructor(){this.Fc=new Map}static get instance(){return Dd||(Dd=new n,function(t){if(Kd)throw new Error("a TestingHooksSpi instance is already set");Kd=t}(Dd)),Dd}ct(e){this.Fc.forEach(t=>t(e))}onExistenceFilterMismatch(e){let t=Symbol(),r=this.Fc;return r.set(t,e),()=>r.delete(t)}},Dd=null;(function(e,t=!0){(function(i){ms=i})(So),Kt(new gt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ye(new ly(r.getProvider("auth-internal")),new fy(s,r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Me(kC,xC,e),Me(kC,xC,"esm2017")})();var tf=function(){return tf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},tf.apply(this,arguments)};function oI(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var BU={includeMetadataChanges:!1};function Rc(n,e){return e===void 0&&(e=BU),new X(function(t){var r=gs(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function sI(n){return Rc(n,{includeMetadataChanges:!0})}function nR(n,e){return e===void 0&&(e={}),sI(n).pipe(vt(function(t){return nf(t,e)}))}function nf(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:tf(tf({},r),(t={},t[e.idField]=n.id,t))}var rR=["added","modified","removed"],UU=function(n){return nr(function(e){for(var t=!1,r=0;r<e.length;r++){var i=e[r];if(n&&n.indexOf(i.type)>=0){t=!0;break}}return t})};function rI(n,e,t){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=n.slice();return o.splice.apply(o,oI([e,t],r,!1)),o}function $U(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&Lr(n[e.newIndex].doc.ref,e.doc.ref)))return rI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||Lr(n[e.oldIndex].doc.ref,e.doc.ref))if(e.oldIndex!==e.newIndex){var t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return rI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&Lr(n[e.oldIndex].doc.ref,e.doc.ref))return rI(n,e.oldIndex,1);break}return n}function HU(n,e,t){return t===void 0&&(t=rR),e.forEach(function(r){t.indexOf(r.type)>-1&&(n=$U(n,r))}),n}var iR=function(){return cu(hp(void 0),dp())},iI=function(n,e){return JSON.stringify(n.metadata)===JSON.stringify(e.metadata)},qU=function(){return cu(iR(),nr(function(n){var e=n[0],t=n[1];return t.length>0||e===void 0}),vt(function(n){var e=n[1];return e}))};function rf(n,e){return e===void 0&&(e={}),Rc(n,{includeMetadataChanges:!0}).pipe(iR(),vt(function(t){var r=t[0],i=t[1],o=i.docChanges();return r&&!iI(r,i)&&i.docs.forEach(function(s,a){var u=o.find(function(d){return Lr(d.doc.ref,s.ref)});if(u){if(iI(u.doc,s))return}else{var l=r?.docs.find(function(d){return Lr(d.ref,s.ref)});if(l&&iI(l,s))return}o.push({oldIndex:a,newIndex:a,type:"modified",doc:s})}),o}),UU(e.events||rR),qU())}function aI(n){return Rc(n,{includeMetadataChanges:!0}).pipe(vt(function(e){return e.docs}))}function oR(n,e){return e===void 0&&(e={}),rf(n,e).pipe(Pu(function(t,r){return HU(t,r,e.events)},[]),up())}function sR(n,e){return e===void 0&&(e={}),rf(n,e).pipe(Pu(function(t,r){return oI(oI([],t,!0),r,!0)},[]))}function aR(n,e){return e===void 0&&(e={}),aI(n).pipe(vt(function(t){return t.map(function(r){return nf(r,e)})}))}function cI(n){return xt(ef(n))}function cR(n){return cI(n).pipe(vt(function(e){return e.data().count}))}var Pc=class{constructor(e){return e}},lI="firestore",uI=class{constructor(){return fi(lI)}},R7=op(0,300).pipe(sp(()=>xt(fi(lI))),cp()),dI=new ae("angularfire2.firestore-instances");function zU(n,e){let t=Yl(lI,n,e);return t&&new Pc(t)}function WU(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Pc(r)}}var uR={provide:uI,deps:[[new Rn,dI]]},lR={provide:Pc,useFactory:zU,deps:[[new Rn,dI],gi]},P7=(()=>{class n{constructor(){Me("angularfire",cr.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ol({type:n});static \u0275inj=gl({providers:[lR,uR]})}return n})();function M7(n,...e){return Me("angularfire",cr.full,"fst"),pa([lR,uR,{provide:dI,useFactory:WU(n),multi:!0,deps:[Ve,Vt,pi,Ea,[new Rn,md],[new Rn,id],...e]}])}var k7=j(sR,!0),x7=j(aI,!0),O7=j(rf,!0),F7=j(cR,!0),L7=j(cI,!0),V7=j(aR,!0),j7=j(sI,!0),B7=j(nR,!0),U7=j(Rc,!0),$7=j(nf,!0),H7=j(oR,!0),q7=j(HN,!0,2),z7=j(RN,!0,2),W7=j(PN,!0,2),G7=j(vN,!0,2),K7=j(nN,!0),Q7=j(KA,!0,2),Y7=j(QA,!0,2),Z7=j(Q_,!0),J7=j(eR,!0),X7=j($N,!0,2),eK=j(WN,!0,2),tK=j(oN,!0),nK=j(XN,!0),rK=j(Y_,!0,2),iK=j(aN,!0,2),oK=j(XA,!0),sK=j(eN,!0),aK=j(iN,!0),cK=j(JN,!0),uK=j(bN,!0,2),lK=j(DN,!0,2),dK=j(nI,!0),hK=j(ef,!0),fK=j(xN,!0),pK=j(ON,!0),gK=j(FN,!0),mK=j(LN,!0),yK=j(VN,!0),vK=j(jN,!0),_K=j(ZA,!0),IK=j(ZN,!0),EK=j(GN,!0,2),wK=j(YA,!0),TK=j(IN,!0,2),DK=j(EN,!0,2),bK=j(Sh,!0),CK=j(Z_,!0,2),SK=j(gs,!0),AK=j(qN,!0),NK=j(yN,!0,2),RK=j(_N,!0,2),PK=j(gN,!0,2),MK=j(Qh,!0,2),kK=j(Lr,!0,2),xK=j(zN,!0),OK=j(BN,!0,2),FK=j(YN,!0),LK=j(ZS,!0),VK=j(kN,!0,2),jK=j(TN,!0,2),BK=j(wN,!0,2),UK=j(NN,!0,2),$K=j(sN,!0),HK=j(UN,!0,2),qK=j(KN,!0,2),zK=j(rN,!0),WK=j(mN,!0,2),GK=j(QN,!0,2);export{Ze as a,Je as b,_ as c,Le as d,cu as e,X as f,Xf as g,ep as h,Cn as i,Qs as j,Zs as k,xt as l,vP as m,_P as n,IP as o,Sn as p,EP as q,vt as r,NP as s,Gr as t,Nu as u,PP as v,MP as w,op as x,nr as y,zE as z,sp as A,Js as B,ap as C,OP as D,FP as E,lp as F,LP as G,Pu as H,hp as I,GE as J,VP as K,jP as L,re as M,Lw as N,De as O,gl as P,qz as Q,ae as R,ne as S,ft as T,K as U,Rn as V,pa as W,Xw as X,tn as Y,Io as Z,DM as _,zz as $,Wz as aa,Gz as ba,Vt as ca,Dl as da,ma as ea,rr as fa,Ve as ga,yo as ha,Kz as ia,kg as ja,bk as ka,Qz as la,Yz as ma,Mk as na,YT as oa,Zz as pa,XT as qa,sa as ra,Jz as sa,Xz as ta,al as ua,ul as va,MD as wa,Tt as xa,xl as ya,$1 as za,H1 as Aa,u9 as Ba,Ol as Ca,Fl as Da,Z1 as Ea,uO as Fa,l9 as Ga,Qg as Ha,pO as Ia,ua as Ja,_O as Ka,AO as La,NO as Ma,RO as Na,WD as Oa,GD as Pa,BO as Qa,HO as Ra,qO as Sa,d9 as Ta,XO as Ua,h9 as Va,f9 as Wa,p9 as Xa,nF as Ya,QD as Za,rF as _a,iF as $a,g9 as ab,oF as bb,m9 as cb,y9 as db,v9 as eb,_9 as fb,I9 as gb,E9 as hb,w9 as ib,T9 as jb,CF as kb,D9 as lb,b9 as mb,rb as nb,RF as ob,ib as pb,Zl as qb,Jl as rb,nV as sb,wm as tb,zb as ub,mV as vb,nC as wb,yV as xb,_V as yb,wV as zb,TV as Ab,DV as Bb,bV as Cb,Am as Db,db as Eb,sr as Fb,ql as Gb,fb as Hb,nm as Ib,jt as Jb,we as Kb,gt as Lb,Kt as Mb,Co as Nb,xn as Ob,So as Pb,di as Qb,Me as Rb,cr as Sb,Yl as Tb,fi as Ub,pi as Vb,j as Wb,gi as Xb,Ea as Yb,C8 as Zb,S8 as _b,A8 as $b,id as ac,md as bc,mt as cc,GG as dc,k as ec,cy as fc,OC as gc,za as hc,ze as ic,V as jc,kj as kc,oe as lc,Ae as mc,QG as nc,Fe as oc,Xo as pc,Qe as qc,be as rc,vn as sc,Yv as tc,YG as uc,YA as vc,Ne as wc,ji as xc,Zv as yc,jn as zc,zn as Ac,Wn as Bc,Ir as Cc,Bn as Dc,Ui as Ec,Ec as Fc,ps as Gc,o_ as Hc,Ph as Ic,Mh as Jc,kh as Kc,xh as Lc,ZG as Mc,FU as Nc,gn as Oc,Pt as Pc,JG as Qc,zo as Rc,Mt as Sc,XG as Tc,e7 as Uc,Nc as Vc,t7 as Wc,n7 as Xc,r7 as Yc,i7 as Zc,VU as _c,o7 as $c,h_ as ad,p_ as bd,s7 as cd,a7 as dd,c7 as ed,g_ as fd,u7 as gd,l7 as hd,YS as id,Pc as jd,uI as kd,R7 as ld,P7 as md,M7 as nd,k7 as od,x7 as pd,O7 as qd,F7 as rd,L7 as sd,V7 as td,j7 as ud,B7 as vd,U7 as wd,$7 as xd,H7 as yd,q7 as zd,z7 as Ad,W7 as Bd,G7 as Cd,K7 as Dd,Q7 as Ed,Y7 as Fd,Z7 as Gd,J7 as Hd,X7 as Id,eK as Jd,tK as Kd,nK as Ld,rK as Md,iK as Nd,oK as Od,sK as Pd,aK as Qd,cK as Rd,uK as Sd,lK as Td,dK as Ud,hK as Vd,fK as Wd,pK as Xd,gK as Yd,mK as Zd,yK as _d,vK as $d,_K as ae,IK as be,EK as ce,wK as de,TK as ee,DK as fe,bK as ge,CK as he,SK as ie,AK as je,NK as ke,RK as le,PK as me,MK as ne,kK as oe,xK as pe,OK as qe,FK as re,LK as se,VK as te,jK as ue,BK as ve,UK as we,$K as xe,HK as ye,qK as ze,zK as Ae,WK as Be,GK as Ce};
